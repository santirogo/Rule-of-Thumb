(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.5.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n("SpAZ");function l(t=Number.POSITIVE_INFINITY){return s(c.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Gs}),n.d(e,"b",function(){return zs}),n.d(e,"c",function(){return Hs}),n.d(e,"d",function(){return Fa}),n.d(e,"e",function(){return Da}),n.d(e,"f",function(){return zo}),n.d(e,"g",function(){return Zs}),n.d(e,"h",function(){return Wo}),n.d(e,"i",function(){return lr}),n.d(e,"j",function(){return Us}),n.d(e,"k",function(){return Vi}),n.d(e,"l",function(){return Ze}),n.d(e,"m",function(){return to}),n.d(e,"n",function(){return ls}),n.d(e,"o",function(){return hs}),n.d(e,"p",function(){return Js}),n.d(e,"q",function(){return Es}),n.d(e,"r",function(){return Sa}),n.d(e,"s",function(){return la}),n.d(e,"t",function(){return on}),n.d(e,"u",function(){return Ys}),n.d(e,"v",function(){return Qs}),n.d(e,"w",function(){return Yo}),n.d(e,"x",function(){return Qo}),n.d(e,"y",function(){return gr}),n.d(e,"z",function(){return Xo}),n.d(e,"A",function(){return ir}),n.d(e,"B",function(){return vs}),n.d(e,"C",function(){return ma}),n.d(e,"D",function(){return Zo}),n.d(e,"E",function(){return Jo}),n.d(e,"F",function(){return Is}),n.d(e,"G",function(){return R}),n.d(e,"H",function(){return ka}),n.d(e,"I",function(){return Ta}),n.d(e,"J",function(){return Ia}),n.d(e,"K",function(){return Ra}),n.d(e,"L",function(){return wa}),n.d(e,"M",function(){return Xs}),n.d(e,"N",function(){return qi}),n.d(e,"O",function(){return Lo}),n.d(e,"P",function(){return nr}),n.d(e,"Q",function(){return Vn}),n.d(e,"R",function(){return Sn}),n.d(e,"S",function(){return Pn}),n.d(e,"T",function(){return Mn}),n.d(e,"U",function(){return Nn}),n.d(e,"V",function(){return An}),n.d(e,"W",function(){return Dn}),n.d(e,"X",function(){return Do}),n.d(e,"Y",function(){return ja}),n.d(e,"Z",function(){return Mo}),n.d(e,"ab",function(){return jo}),n.d(e,"bb",function(){return kn}),n.d(e,"cb",function(){return q}),n.d(e,"db",function(){return io}),n.d(e,"eb",function(){return wo}),n.d(e,"fb",function(){return vo}),n.d(e,"gb",function(){return No}),n.d(e,"hb",function(){return Pt}),n.d(e,"ib",function(){return y}),n.d(e,"jb",function(){return xn}),n.d(e,"kb",function(){return Et}),n.d(e,"lb",function(){return Xr}),n.d(e,"mb",function(){return J}),n.d(e,"nb",function(){return ot}),n.d(e,"ob",function(){return _}),n.d(e,"pb",function(){return O}),n.d(e,"qb",function(){return nt}),n.d(e,"rb",function(){return st}),n.d(e,"sb",function(){return co}),n.d(e,"tb",function(){return go}),n.d(e,"ub",function(){return mo}),n.d(e,"vb",function(){return yo}),n.d(e,"wb",function(){return po}),n.d(e,"xb",function(){return fo}),n.d(e,"yb",function(){return bo}),n.d(e,"zb",function(){return mn}),n.d(e,"Ab",function(){return $e}),n.d(e,"Bb",function(){return Bs}),n.d(e,"Cb",function(){return _o}),n.d(e,"Db",function(){return ge}),n.d(e,"Eb",function(){return pe}),n.d(e,"Fb",function(){return Co}),n.d(e,"Gb",function(){return lo}),n.d(e,"Hb",function(){return Vs}),n.d(e,"Ib",function(){return uo}),n.d(e,"Jb",function(){return dr}),n.d(e,"Kb",function(){return Kt}),n.d(e,"Lb",function(){return or}),n.d(e,"Mb",function(){return rt}),n.d(e,"Nb",function(){return ao}),n.d(e,"Ob",function(){return qs}),n.d(e,"Pb",function(){return Io}),n.d(e,"Qb",function(){return To}),n.d(e,"Rb",function(){return xo}),n.d(e,"Sb",function(){return So}),n.d(e,"Tb",function(){return sr});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(y).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function m(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=g({__forward_ref__:g});function v(t){return t.__forward_ref__=v,t.toString=function(){return y(this())},t}function w(t){return"function"==typeof(e=t)&&e.hasOwnProperty(b)&&e.__forward_ref__===v?t():t;var e}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function O(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function E(t){return C(t,T)||C(t,S)}function C(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const T=g({"\u0275prov":g}),x=g({"\u0275inj":g}),S=g({ngInjectableDef:g}),k=g({ngInjectorDef:g});var P=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let A;function N(t){const e=A;return A=t,e}function D(t,e,n){const r=E(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&P.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${y(t)}]`)}function M(t){return{toString:t}.toString()}var j=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),R=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=L||U||F||V,B={},z=[],H=g({"\u0275cmp":g}),G=g({"\u0275dir":g}),K=g({"\u0275pipe":g}),W=g({"\u0275mod":g}),Q=g({"\u0275loc":g}),Y=g({"\u0275fac":g}),$=g({__NG_ELEMENT_ID__:g});let X=0;function J(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===j.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||R.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function Z(t){return at(t)||function(t){return t[G]||null}(t)}function tt(t){return function(t){return t[K]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&M(()=>{et[t.id]=t.type}),e}function rt(t,e){return M(()=>{const n=ut(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function it(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[H]||null}function ut(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${y(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class bt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function vt(t){return"string"==typeof t?t:null==t?"":String(t)}function wt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():vt(t)}function _t(t,e){const n=e?" in "+e:"";throw new bt("201",`No provider for ${wt(t)} found${n}`)}class Ot{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Et(){return Ct}function Ct(t){return t.type.prototype.ngOnChanges&&(t.setInput=Tt),It}function It(){const t=xt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Tt(t,e,n,r){const i=xt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Ot(u&&u.currentValue,e,s===B),t[r]=e}function xt(t){return t.__ngSimpleChanges__||null}Et.ngInherit=!0;const St="http://www.w3.org/2000/svg";let kt=void 0;function Pt(t){kt=t}function At(t){return!!t.listen}const Nt={createRenderer:(t,e)=>void 0!==kt?kt:"undefined"!=typeof document?document:void 0};function Dt(t){for(;Array.isArray(t);)t=t[0];return t}function Mt(t,e){return Dt(e[t.index])}function jt(t,e){return t.data[e]}function Rt(t,e){const n=e[t];return ht(n)?n:n[0]}function Lt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function qt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zt(){return Bt.bindingsEnabled}function Ht(){return Bt.lFrame.lView}function Gt(){return Bt.lFrame.tView}function Kt(t){Bt.lFrame.contextLView=t}function Wt(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Bt.lFrame.currentTNode}function Yt(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return Bt.lFrame.isParent}function Xt(){Bt.lFrame.isParent=!1}function Jt(){return Bt.isInCheckNoChangesMode}function Zt(t){Bt.isInCheckNoChangesMode=t}function te(){return Bt.lFrame.bindingIndex++}function ee(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){Bt.lFrame.currentDirectiveIndex=t}function re(t){Bt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&P.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&P.Host||(r=ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=ae();return r.currentTNode=e,r.lView=t,!0}function se(t){const e=ae(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ae(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ce(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ce;function he(){const t=ce();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return Bt.lFrame.selectedIndex}function de(t){Bt.lFrame.selectedIndex=t}function pe(){Bt.lFrame.currentNamespace=St}function ge(){Bt.lFrame.currentNamespace=null}function ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){we(t,e,3,n)}function be(t,e,n,r){(3&t[2])===n&&we(t,e,n,r)}function ve(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function we(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(_e(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function _e(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Oe=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ce(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Te(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function Te(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==Oe}function Pe(t){return 32767&t}function Ae(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function De(t){const e=Ne;return Ne=t,e}let Me=0;function je(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Re(r.data,t),Re(e,null),Re(r.blueprint,null));const i=Fe(t,e),o=t.injectorIndex;if(ke(i)){const t=Pe(i),n=Ae(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Re(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Oe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oe}function Ve(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty($)&&(r=n[$]),null==r&&(r=n[$]=Me++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Ue(t,e,n){if(n&P.Optional)return t;_t(e,"NodeInjector")}function qe(t,e,n,r){if(n&P.Optional&&void 0===r&&(r=null),0==(n&(P.Self|P.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&P.Optional):D(e,r,n&P.Optional)}finally{N(o)}}return Ue(r,e,n)}function Be(t,e,n,r=P.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty($)?t[$]:void 0;return"number"==typeof e?e>=0?255&e:He:e}(n);if("function"==typeof o){if(!oe(e,t,r))return r&P.Host?Ue(i,n,r):qe(e,n,r,i);try{const t=o();if(null!=t||r&P.Optional)return t;_t(n)}finally{le()}}else if("number"==typeof o){let i=null,s=Le(t,e),a=Oe,u=r&P.Host?e[16][6]:null;for((-1===s||r&P.SkipSelf)&&(a=-1===s?Fe(t,e):e[s+8],a!==Oe&&Qe(r,!1)?(i=e[1],s=Pe(a),e=Ae(a,e)):s=-1);-1!==s;){const t=e[1];if(We(o,s,t.data)){const t=Ge(s,e,n,i,r,u);if(t!==ze)return t}a=e[s+8],a!==Oe&&Qe(r,e[1].data[s+8]===u)&&We(o,s,e)?(i=t,s=Pe(a),e=Ae(a,e)):s=-1}}}return qe(e,n,r,i)}const ze={};function He(){return new Ye(Wt(),Ht())}function Ge(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}(a,s,n,null==r?pt(a)&&Ne:r!=s&&0!=(3&a.type),i&P.Host&&o===a);return null!==u?Ke(e,s,u,a):ze}function Ke(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new bt("200","Circular dependency in DI detected for "+t)}(wt(o[n]));const a=De(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;oe(t,r,P.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ct(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),De(a),s.resolving=!1,le()}}return i}function We(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Qe(t,e){return!(t&P.Self||t&P.Host&&e)}class Ye{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Be(this._tNode,this._lView,t,void 0,e)}}function $e(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const Xe="__parameters__";function Je(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Xe)?t[Xe]:Object.defineProperty(t,Xe,{value:[]})[Xe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ze{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}function tn(t,e){t.forEach(t=>Array.isArray(t)?tn(t,e):e(t))}function en(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const rn=Je("Inject",t=>({token:t})),on=Je("Optional"),sn=Je("Self"),an=Je("SkipSelf"),un=Je("Host"),cn={},ln=/\n/gm,hn="__source",fn=g({provide:String,useValue:g});let dn,pn=void 0;function gn(t){const e=pn;return pn=t,e}function yn(t,e=P.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?D(t,void 0,e):pn.get(t,e&P.Optional?null:void 0,e)}function mn(t,e=P.Default){return(A||yn)(w(t),e)}function bn(t){const e=[];for(let n=0;n<t.length;n++){const r=w(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=P.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof on||"Optional"===i.ngMetadataName||i===on?n|=P.Optional:i instanceof an||"SkipSelf"===i.ngMetadataName||i===an?n|=P.SkipSelf:i instanceof sn||"Self"===i.ngMetadataName||i===sn?n|=P.Self:i instanceof un||"Host"===i.ngMetadataName||i===un?n|=P.Host:t=i instanceof rn||i===rn?i.token:i}e.push(mn(t,n))}else e.push(mn(r))}return e}function vn(){if(void 0===dn&&(dn=null,q.trustedTypes))try{dn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return dn}function wn(t){var e;return(null===(e=vn())||void 0===e?void 0:e.createHTML(t))||t}class _n{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class On extends _n{getTypeName(){return"HTML"}}class En extends _n{getTypeName(){return"Style"}}class Cn extends _n{getTypeName(){return"Script"}}class In extends _n{getTypeName(){return"URL"}}class Tn extends _n{getTypeName(){return"ResourceURL"}}function xn(t){return t instanceof _n?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=kn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function kn(t){return t instanceof _n&&t.getTypeName()||null}function Pn(t){return new On(t)}function An(t){return new En(t)}function Nn(t){return new Cn(t)}function Dn(t){return new In(t)}function Mn(t){return new Tn(t)}class jn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(wn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Rn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=wn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=wn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ln=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Vn(t){return(t=String(t)).match(Ln)||t.match(Fn)?t:"unsafe:"+t}function Un(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Bn=Un("area,br,col,hr,img,wbr"),zn=Un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hn=Un("rp,rt"),Gn=qn(Hn,zn),Kn=qn(Bn,qn(zn,Un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qn(Hn,Un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gn),Wn=Un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qn=Un("srcset"),Yn=qn(Wn,Qn,Un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$n=Un("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Kn.hasOwnProperty(e))return this.sanitizedSomething=!0,!$n.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Yn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Wn[o]&&(s=Vn(s)),Qn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Vn(t.trim())).join(", ")),this.buf.push(" ",e,'="',tr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Kn.hasOwnProperty(e)&&!Bn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(tr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Jn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zn=/([^\#-~ |!])/g;function tr(t){return t.replace(/&/g,"&amp;").replace(Jn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Zn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let er;function nr(t,e){let n=null;try{er=er||function(t){const e=new Rn(t);return function(){try{return!!(new window.DOMParser).parseFromString(wn(""),"text/html")}catch(t){return!1}}()?new jn(e):e}(t);let r=e?String(e):"";n=er.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=er.getInertBodyElement(r)}while(r!==o);return(new Xn).sanitizeChildren(rr(n)||n)}finally{if(n){const t=rr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function rr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function or(t){const e=function(){const t=Ht();return t&&t[12]}();return e?e.sanitize(ir.URL,t)||"":Sn(t,"URL")?xn(t):Vn(vt(t))}function sr(t){return function(t){var e;return(null===(e=vn())||void 0===e?void 0:e.createScriptURL(t))||t}(t)}function ar(t){return t.ngDebugContext}function ur(t){return t.ngOriginalError}function cr(t,...e){t.error(...e)}class lr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ar(t)?ar(t):this._findContext(ur(t)):null}_findOriginalError(t){let e=ur(t);for(;e&&ur(e);)e=ur(e);return e}}function hr(t,e){t.__ngContext__=e}const fr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function dr(t){return{name:"document",target:t.ownerDocument}}function pr(t){return t instanceof Function?t():t}var gr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function yr(t,e){return(void 0)(t,e)}function mr(t){const e=t[3];return ft(e)?e[3]:e}function br(t){return wr(t[13])}function vr(t){return wr(t[4])}function wr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function _r(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=Dt(r);0===t&&null!==n?null==i?Sr(e,n,a):xr(e,n,a,i||null,!0):1===t&&null!==n?xr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Pr(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Dt(n)&&_r(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];jr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Or(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=nn(t,lt+e);jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&jr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Tr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Tr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Tr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Tr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Dt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Sr(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?xr(t,e,n,r,i):Sr(t,e,n)}function Pr(t,e){return At(t)?t.parentNode(e):e.parentNode}function Ar(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===R.None||e===R.Emulated)return null}return Mt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Mt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return Mt(e,t);if(4&n)return Dr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return ft(n)?Dr(-1,n):Dt(n)}}if(32&n)return yr(e,t)()||Dt(t[e.index]);{const n=t[16],r=n[6],i=mr(n),o=r.projection[e.projection];return null!=o?Nr(i,o):Nr(t,e.next)}}return null}function Dr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Mr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&hr(Dt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Mr(t,e,n.child,r,i,o,!1),_r(e,t,i,a,o);else if(32&u){const s=yr(n,r);let u;for(;u=s();)_r(e,t,i,u,o);_r(e,t,i,a,o)}else 16&u?Rr(t,e,r,n,i,o):_r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jr(t,e,n,r,i,o){Mr(n,r,t.firstChild,e,i,o,!1)}function Rr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_r(e,t,i,a[u],o);else Mr(t,e,a,s[3],i,o,!0)}function Lr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Fr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Vr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Ur="ng-template";function qr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Vr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Br(t){return 4===t.type&&t.value!==Ur}function zr(t,e,n){return e===(4!==t.type||n?t.value:Ur)}function Hr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zr(t,u,n)||""===u&&1===e.length){if(Gr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!qr(t.attrs,c,n)){if(Gr(r))return!1;s=!0}continue}const l=Kr(8&r?"class":u,i,Br(t),n);if(-1===l){if(Gr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Vr(e,c,0)||2&r&&c!==t){if(Gr(r))return!1;s=!0}}}}else{if(!s&&!Gr(r)&&!Gr(u))return!1;if(s&&Gr(u))continue;s=!1,r=u|1&r}}return Gr(r)||s}function Gr(t){return 0==(1&t)}function Kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Wr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Hr(t,e[r],n))return!0;return!1}function Qr(t,e){return t?":not("+e.trim()+")":e}function Yr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Gr(s)||(e+=Qr(o,i),i=""),r=s,o=o||!Gr(r);n++}return""!==i&&(e+=Qr(o,i)),e}const $r={};function Xr(t){Jr(Gt(),Ht(),fe()+t,Jt())}function Jr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&me(e,r,n)}else{const r=t.preOrderHooks;null!==r&&be(e,r,0,n)}de(n)}function Zr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];re(i),n.contentQueries(2,e[o],o)}}}function ti(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ei(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Yt(o,!0),o}function ni(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ri(t,e,n){se(e);try{const r=t.viewQuery;null!==r&&Ai(1,r,n);const i=t.template;null!==i&&si(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Zr(t,e),t.staticViewQueries&&Ai(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ti(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,he()}}function ii(t,e,n,r){const i=e[2];if(256==(256&i))return;se(e);const o=Jt();try{Ut(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&si(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&be(e,n,0,null),ve(e,0)}if(function(t){for(let e=br(t);null!==e;e=vr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&qt(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=vr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&ii(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Zr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&be(e,n,1),ve(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)de(~r);else{const i=r,o=n[++t],s=n[++t];ee(o,i),s(2,e[i])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ci(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ai(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&be(e,n,2),ve(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{he()}}function oi(t,e,n,r){const i=e[10],o=!Jt(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&ri(t,e,r),ii(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function si(t,e,n,r,i){const o=fe();try{de(-1),2&r&&e.length>ct&&Jr(t,e,ct,Jt()),n(r,i)}finally{de(o)}}function ai(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ui(t,e,n){zt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||je(n,e),hr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&wi(e,n,r);const u=Ke(e,t,a,n);hr(u,e),null!==s&&_i(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,Mt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bt.lFrame.currentDirectiveIndex;try{de(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||gi(r,i)}}finally{de(-1),ne(s)}}(t,e,n))}function ci(t,e,n=Mt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function li(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=hi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function hi(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:$r);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function fi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function di(t,e,n,r){let i=!1;if(zt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Wr(n,s.selectors,!1)&&(i||(i=[]),Ve(je(n,e),t,s.type),yt(s)?(yi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,bi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ni(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),vi(t,n,e,u,c),mi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Br(e)?null:Oi(n,i);o.push(c),s=fi(n,u,s),a=fi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new bt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function pi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function gi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function yi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function mi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function bi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function vi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new Ee(o,yt(i),null);t.blueprint[r]=s,n[r]=s,pi(t,e,0,r,ni(t,n,i.hostVars,$r),i)}function wi(t,e,n){const r=Mt(e,t),i=li(n),o=t[10],s=xi(t,ti(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function _i(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Oi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ei(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ci(t,e){const n=Rt(e,t);if(Ft(n)){const t=n[1];80&n[2]?ii(t,n,t.template,n[8]):n[5]>0&&Ii(n)}}function Ii(t){for(let n=br(t);null!==n;n=vr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ii(t,e,t.template,e[8])}else e[5]>0&&Ii(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Ft(r)&&r[5]>0&&Ii(r)}}function Ti(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ri(r,n,n[8])}function xi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Si(t){for(;t;){t[2]|=64;const e=mr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ki(t,e,n){const r=e[10];r.begin&&r.begin();try{ii(t,e,t.template,n)}catch(i){throw ji(e,i),i}finally{r.end&&r.end()}}function Pi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Lt(n),i=r[1];oi(i,r,i.template,n)}}(t[8])}function Ai(t,e,n){re(0),e(t,n)}const Ni=(()=>Promise.resolve(null))();function Di(t){return t[7]||(t[7]=[])}function Mi(t){return t.cleanup||(t.cleanup=[])}function ji(t,e){const n=t[9],r=n?n.get(lr,null):null;r&&r.handleError(e)}function Ri(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Li(t,e,n){const r=function(t,e){return Dt(e[t])}(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Fi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=m(i,t):2==o&&(r=m(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Vi=new Ze("INJECTOR",-1);class Ui{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${y(t)}!`);throw e.name="NullInjectorError",e}return e}}const qi=new Ze("Set Injector scope."),Bi={},zi={},Hi=[];let Gi=void 0;function Ki(){return void 0===Gi&&(Gi=new Ui),Gi}function Wi(t,e=null,n=null,r){return new Qi(t,n,e||Ki(),r)}class Qi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&tn(e,n=>this.processProvider(n,t,e)),tn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Vi,$i(void 0,this));const o=this.records.get(qi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:y(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=P.Default){this.assertNotDestroyed();const r=gn(this);try{if(!(n&P.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ze)&&E(t);e=n&&this.injectableDefInScope(n)?$i(Yi(t),Bi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&P.Self?Ki():this.parent).get(t,e=n&P.Optional&&e===cn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(y(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[hn]&&i.unshift(e[hn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=y(e);if(Array.isArray(e))i=e.map(y).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):y(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ln,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(y(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=w(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{tn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];tn(r,t=>this.processProvider(t,n,r||Hi))}}this.injectorDefTypes.add(o),this.records.set(o,$i(r.factory,Bi));const a=r.providers;if(null!=a&&!s){const e=t;tn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ji(t=w(t))?t:w(t&&t.provide);const i=function(t,e,n){return Xi(t)?$i(void 0,t.useValue):$i(function(t,e,n){let r=void 0;if(Ji(t)){const e=w(t);return mt(e)||Yi(e)}if(Xi(t))r=()=>w(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...bn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(w(t.useExisting));else{const e=w(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||Yi(e);r=()=>new e(...bn(t.deps))}var i;return r}(t),Bi)}(t);if(Ji(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=$i(void 0,Bi,!0),e.factory=()=>bn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Bi&&(e.value=zi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Yi(t){const e=E(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;const r=I(t);if(null!==r)return r.factory;if(t instanceof Ze)throw new Error(`Token ${y(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${y(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[S]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function $i(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Xi(t){return null!==t&&"object"==typeof t&&fn in t}function Ji(t){return"function"==typeof t}const Zi=function(t,e,n){return function(t,e=null,n=null,r){const i=Wi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let to=(()=>{class t{static create(t,e){return Array.isArray(t)?Zi(t,e,""):Zi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=cn,t.NULL=new Ui,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>mn(Vi)}),t.__NG_ELEMENT_ID__=-1,t})();function eo(t,e){ye(Lt(t)[1],Wt())}let no=null;function ro(){if(!no){const t=q.Symbol;if(t&&t.iterator)no=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(no=n)}}}return no}function io(t){return!!oo(t)&&(Array.isArray(t)||!(t instanceof Map)&&ro()in t)}function oo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function so(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ao(t,e,n,r,i,o,s,a){const u=Ht(),c=Gt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ei(e,t,4,s||null,Vt(c,a));di(e,n,l,Vt(c,u)),ye(e,l);const h=l.tViews=hi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Yt(h,!1);const f=u[11].createComment("");Ar(c,u,f,h),hr(f,u),xi(u,u[l]=Ei(f,u,f,h)),gt(h)&&ui(c,u,h),null!=s&&ci(u,h,a)}function uo(t){return function(t,e){return t[e]}(Bt.lFrame.contextLView,ct+t)}function co(t,e=P.Default){const n=Ht();return null===n?mn(t,e):Be(Wt(),n,w(t),e)}function lo(t,e,n){const r=Ht();return so(r,te(),e)&&function(t,e,n,r,i,o,s,a){const u=Mt(e,n);let c,l=e.inputs;var h;null!=l&&(c=l[r])?(Ri(t,n,c,r,i),pt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,At(o)?o.setProperty(u,r,i):Te(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(Gt(),function(){const t=Bt.lFrame;return jt(t.tView,t.selectedIndex)}(),r,t,e,r[11],n),lo}function ho(t,e,n,r,i){const o=i?"class":"style";Ri(t,n,e.inputs[o],o,r)}function fo(t,e,n,r){const i=Ht(),o=Gt(),s=ct+t,a=i[11],u=i[s]=Or(a,e,Bt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ei(e,t,2,i,Vt(a,o));return di(e,n,u,Vt(a,s)),null!==u.attrs&&Fi(u,u.attrs,!1),null!==u.mergedAttrs&&Fi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Yt(c,!0);const l=c.mergedAttrs;null!==l&&Ce(a,u,l);const h=c.classes;null!==h&&Fr(a,u,h);const f=c.styles;null!==f&&Lr(a,u,f),64!=(64&c.flags)&&Ar(o,i,u,c),0===Bt.lFrame.elementDepthCount&&hr(u,i),Bt.lFrame.elementDepthCount++,gt(c)&&(ui(o,i,c),ai(o,c,i)),null!==r&&ci(i,c)}function po(){let t=Wt();$t()?Xt():(t=t.parent,Yt(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(ye(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ho(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ho(n,e,Ht(),e.stylesWithoutHost,!1)}function go(t,e,n,r){fo(t,e,n,r),po()}function yo(t,e,n){const r=Ht(),i=Gt(),o=t+ct,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=ei(e,t,8,"ng-container",s);return null!==s&&Fi(a,s,!0),di(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Yt(s,!0);const a=r[o]=r[11].createComment("");Ar(i,r,a,s),hr(a,r),gt(s)&&(ui(i,r,s),ai(i,s,r)),null!=n&&ci(r,s)}function mo(){let t=Wt();const e=Gt();$t()?Xt():(t=t.parent,Yt(t,!1)),e.firstCreatePass&&(ye(e,t),dt(t)&&e.queries.elementEnd(t))}function bo(){return Ht()}function vo(t){return!!t&&"function"==typeof t.then}function wo(t){return!!t&&"function"==typeof t.subscribe}function _o(t,e,n=!1,r){const i=Ht(),o=Gt(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&Mi(t),l=Di(e);let h=!0;if(3&r.type){const f=Mt(r,e),d=a?a(f):B,p=d.target||f,g=l.length,y=a?t=>a(Dt(t[r.index])).target:r.index;if(At(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Eo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Eo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Eo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),_o}function Oo(t,e,n){try{return!1!==e(n)}catch(r){return ji(t,r),!1}}function Eo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Si(s);let a=Oo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Oo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Co(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function Io(t,e=""){const n=Ht(),r=Gt(),i=t+ct,o=r.firstCreatePass?ei(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ar(r,n,s,o),Yt(o,!1)}function To(t){return xo("",t,""),To}function xo(t,e,n){const r=Ht(),i=function(t,e,n,r){return so(t,te(),n)?e+vt(n)+r:$r}(r,t,e,n);return i!==$r&&Li(r,fe(),i),xo}function So(t,e,n,r,i){const o=Ht(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=so(t,e,n);return so(t,e+1,r)||i}(t,Bt.lFrame.bindingIndex,n,i);return function(t){const e=Bt.lFrame;e.bindingIndex=e.bindingIndex+2}(),s?e+vt(n)+r+vt(i)+o:$r}(o,t,e,n,r,i);return s!==$r&&Li(o,fe(),s),So}const ko=void 0;var Po=["en",[["a","p"],["AM","PM"],ko],[["AM","PM"],ko,ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ko,"{1} 'at' {0}",ko],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ao={};function No(t,e,n){"string"!=typeof e&&(n=e,e=t[Lo.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ao[e]=t,n&&(Ao[e][Lo.ExtraData]=n)}function Do(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ro(e);if(n)return n;const r=e.split("-")[0];if(n=Ro(r),n)return n;if("en"===r)return Po;throw new Error(`Missing locale data for the locale "${t}".`)}function Mo(t){return Do(t)[Lo.CurrencyCode]||null}function jo(t){return Do(t)[Lo.PluralCase]}function Ro(t){return t in Ao||(Ao[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Ao[t]}var Lo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Fo="en-US";let Vo=Fo;function Uo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Vo=t.toLowerCase().replace(/_/g,"-"))}class qo{}class Bo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${y(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let zo=(()=>{class t{}return t.NULL=new Bo,t})();function Ho(...t){}function Go(t,e){return new Wo(Mt(t,e))}const Ko=function(){return Go(Wt(),Ht())};let Wo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ko,t})();class Qo{}let Yo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>$o(),t})();const $o=function(){const t=Ht(),e=Rt(Wt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Xo=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Jo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Zo=new Jo("11.0.9");class ts{constructor(){}supports(t){return io(t)}create(t){return new ns(t)}}const es=(t,e)=>e;class ns{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||es}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ss(n,r,i)?e:n,s=ss(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!io(t))throw new Error(`Error trying to diff '${y(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ro()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new rs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new os),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new os),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class rs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class is{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class os{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new is,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ss(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class as{constructor(){}supports(t){return t instanceof Map||oo(t)}create(){return new us}}class us{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||oo(t)))throw new Error(`Error trying to diff '${y(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new cs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class cs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ls=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new an,new on]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>new t([new ts])}),t})(),hs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new an,new on]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>new t([new as])}),t})();function fs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Dt(o)),ft(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&fs(e[1],e,n,r)}const s=n.type;if(8&s)fs(t,e,n.child,r);else if(32&s){const t=yr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=mr(t);fs(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ds{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return fs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),nn(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=Di(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Si(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ki(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Zt(!0);try{ki(t,e,n)}finally{Zt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,jr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ps extends ds{constructor(t){super(t),this._view=t}detectChanges(){Pi(this._view)}checkNoChanges(){!function(t){Zt(!0);try{Pi(t)}finally{Zt(!1)}}(this._view)}get context(){return null}}const gs=[new as],ys=new ls([new ts]),ms=new hs(gs),bs=function(){return Os(Wt(),Ht())};let vs=(()=>{class t{}return t.__NG_ELEMENT_ID__=bs,t})();const ws=vs,_s=class extends ws{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ti(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ri(e,n,t),new ds(n)}};function Os(t,e){return 4&t.type?new _s(e,t,Go(t,e)):null}class Es{}const Cs=function(){return function(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Dt(r);else{const n=e[11];i=n.createComment("");const r=Mt(t,e);xr(n,Pr(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ei(r,e,i,t),xi(e,n)}return new xs(n,t,e)}(Wt(),Ht())};let Is=(()=>{class t{}return t.__NG_ELEMENT_ID__=Cs,t})();const Ts=Is,xs=class extends Ts{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Go(this._hostTNode,this._hostLView)}get injector(){return new Ye(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fe(this._hostTNode,this._hostLView);if(ke(t)){const e=Ae(t,this._hostLView),n=Pe(t);return new Ye(e[1].data[n+8],e)}return new Ye(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ss(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Es,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new xs(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],en(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Dr(i,o),a=n[11],u=Pr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,jr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),en(ks(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ss(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(nn(ks(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=nn(ks(this._lContainer),e)?new ds(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ss(t){return t[8]}function ks(t){return t[8]||(t[8]=[])}const Ps={};class As extends zo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new Ms(e,this.ngModule)}}function Ns(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ds=new Ze("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fr});class Ms extends qo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Yr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ns(this.componentDef.inputs)}get outputs(){return Ns(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ps,i);return o!==Ps||r===Ps?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Qo,Nt),s=i.get(Xo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===R.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Or(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:fr,clean:Ni,playerHandler:null,flags:0},f=hi(0,null,null,1,0,null,null,null,null,null),d=ti(null,f,h,l,null,null,o,a,s,i);let p,g;se(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ei(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Fi(a,u,!0),null!==t&&(Ce(i,t,u),null!==a.classes&&Fr(i,t,a.classes),null!==a.styles&&Lr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ti(n,li(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ve(je(a,n),s,e.type),yi(s,a),bi(a,n.length,1)),xi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Ce(a,c,["ng-version",Zo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Gr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ce(a,c,t),e&&e.length>0&&Fr(a,c,e.join(" "))}if(g=jt(f,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),vi(t,r,e,ni(t,e,1,null),n));const i=Ke(e,t,r.directiveStart,r);hr(i,e);const o=Mt(r,e);return o&&hr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),pi(n[1],a,0,a.directiveStart,a.directiveEnd,e),gi(e,s)),s}(t,this.componentDef,d,h,[eo]),ri(f,d,null)}finally{he()}return new js(this.componentType,p,Go(g,d),d,g)}}class js extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new ps(r),this.componentType=t}get injector(){return new Ye(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Rs=new Map;class Ls extends Es{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new As(this);const n=ut(t),r=t[Q]||null;r&&Uo(r),this._bootstrapComponents=pr(n.bootstrap),this._r3Injector=Wi(t,e,[{provide:Es,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],y(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=to.THROW_IF_NOT_FOUND,n=P.Default){return t===to||t===Es||t===Vi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Fs extends class{}{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${y(e)} vs ${y(e.name)}`)}(i,Rs.get(i),n),Rs.set(i,n));const o=pr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ls(this.moduleType,t)}}function Vs(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return so(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===$r?void 0:n}(t,s+1)}(Ht(),function(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const Us=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function qs(t,e){return Os(t,e)}function Bs(t=P.Default){const e=function(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Rt(t.index,e);return new ds(n,n)}return 47&t.type?new ds(e[16],e):null}(Wt(),Ht(),t)}(!0);if(null!=e||t&P.Optional)return e;_t("ChangeDetectorRef")}const zs=new Ze("Application Initializer");let Hs=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ho,this.reject=Ho,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();vo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn(zs,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Gs=new Ze("AppId"),Ks={provide:Gs,useFactory:function(){return`${Ws()}${Ws()}${Ws()}`},deps:[]};function Ws(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qs=new Ze("Platform Initializer"),Ys=new Ze("Platform ID"),$s=new Ze("appBootstrapListener");let Xs=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Js=new Ze("LocaleId"),Zs=new Ze("DefaultCurrencyCode");class ta{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ea=function(t){return new Fs(t)},na=ea,ra=function(t){return Promise.resolve(ea(t))},ia=function(t){const e=ea(t),n=pr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new Ms(n)),t},[]);return new ta(e,n)},oa=ia,sa=function(t){return Promise.resolve(ia(t))};let aa=(()=>{class t{constructor(){this.compileModuleSync=na,this.compileModuleAsync=ra,this.compileModuleAndAllComponentsSync=oa,this.compileModuleAndAllComponentsAsync=sa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ua=(()=>Promise.resolve(0))();function ca(t){"undefined"==typeof Zone?ua.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class la{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Us(!1),this.onMicrotaskEmpty=new Us(!1),this.onStable=new Us(!1),this.onError=new Us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,da(t),fa(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),da(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return pa(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ga(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return pa(t),e.invoke(r,i,o,s,a)}finally{ga(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,da(t),fa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ha,Ho,Ho);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ha={};function fa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function da(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function pa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ga(t){t._nesting--,fa(t)}class ya{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Us,this.onMicrotaskEmpty=new Us,this.onStable=new Us,this.onError=new Us}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ma=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),ca(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ca(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(la))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),ba=(()=>{class t{constructor(){this._applications=new Map,Oa.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Oa.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class va{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function wa(t){Oa=t}let _a,Oa=new va,Ea=!0,Ca=!1;function Ia(){return Ca=!0,Ea}function Ta(){if(Ca)throw new Error("Cannot enable prod mode after platform setup.");Ea=!1}const xa=new Ze("AllowMultipleToken");class Sa{constructor(t,e){this.name=t,this.token=e}}function ka(t,e,n=[]){const r="Platform: "+e,i=new Ze(r);return(e=[])=>{let o=Pa();if(!o||o.injector.get(xa,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:qi,useValue:"platform"});!function(t){if(_a&&!_a.destroyed&&!_a.injector.get(xa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_a=t.get(Aa);const e=t.get(Qs,null);e&&e.forEach(t=>t())}(to.create({providers:t,name:r}))}return function(t){const e=Pa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pa(){return _a&&!_a.destroyed?_a:null}let Aa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ya:("zone.js"===t?void 0:t)||new la({enableLongStackTrace:Ia(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:la,useValue:n}];return n.run(()=>{const e=to.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(lr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ma(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return vo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Hs);return t.runInitializers(),t.donePromise.then(()=>(Uo(i.injector.get(Js,Fo)||Fo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Na({},e);return function(t,e,n){const r=new Fs(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Da);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${y(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(to))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Na(t,e){return Array.isArray(e)?e.reduce(Na,t):Object.assign(Object.assign({},t),e)}let Da=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),ca(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{la.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof qo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Es),i=n.create(to.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ma,null),a=s&&i.injector.get(ba);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ma(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Ia()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ma(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($s,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(la),mn(Xs),mn(to),mn(lr),mn(zo),mn(Hs))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ma(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ja=function(t){return null},Ra=ka(null,"core",[{provide:Ys,useValue:"unknown"},{provide:Aa,deps:[to]},{provide:ba,deps:[]},{provide:Xs,deps:[]}]),La=[{provide:Da,useClass:Da,deps:[la,Xs,to,lr,zo,Hs]},{provide:Ds,deps:[la],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Hs,useClass:Hs,deps:[[new on,zs]]},{provide:aa,useClass:aa,deps:[]},Ks,{provide:ls,useFactory:function(){return ys},deps:[]},{provide:hs,useFactory:function(){return ms},deps:[]},{provide:Js,useFactory:function(t){return Uo(t=t||"undefined"!=typeof $localize&&$localize.locale||Fo),t},deps:[[new rn(Js),new on,new an]]},{provide:Zs,useValue:"USD"}];let Fa=(()=>{class t{constructor(t){}}return t.\u0275mod=nt({type:t}),t.\u0275inj=O({factory:function(e){return new(e||t)(mn(Da))},providers:La}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.a)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return O}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return E}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return T}),n.d(e,"i",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d}),n.d(e,"l",function(){return g}),n.d(e,"m",function(){return y}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return m});var r=n("mrSG"),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function y(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return c().indexOf("MSAppHost/")>=0}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,v.prototype.create),o}return Object(r.c)(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new C(t,e);return n.subscribe.bind(n)}var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}function T(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},b=new u.l("angularfire2.app.options"),v=new u.l("angularfire2.app.nameOrConfig"),w=new u.E("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.J)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:_,deps:[b,u.s,[new u.t,v]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.D.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:b,useValue:e},{provide:v,useValue:n}]}}}return t.\u0275mod=u.qb({type:t}),t.\u0275inj=u.pb({factory:function(e){return new(e||t)(u.zb(u.u))},providers:[I]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.f)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.g)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.g)(e,t)},createSubscribe:s.e,ErrorFactory:s.b,deepExtend:s.g}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.j)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.o)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCanUf0FX0FiFx53L9i75YCEYZYbN8IEOU",authDomain:"rule-of-thumb-88375.firebaseapp.com",projectId:"rule-of-thumb-88375",storageBucket:"rule-of-thumb-88375.appspot.com",messagingSenderId:"793809402475",appId:"1:793809402475:web:762e5ef27be21c69574f2e",measurementId:"G-K9ZYWW32JE"};let o=null;function s(){return o}const a=new r.l("DocumentToken");var u=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const c=r.ab;class l{}let h=(()=>{class t extends l{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(c(e||this.locale)(t)){case u.Zero:return"zero";case u.One:return"one";case u.Two:return"two";case u.Few:return"few";case u.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.zb(r.p))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})(),f=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.db)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.ib)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.sb(r.n),r.sb(r.o),r.sb(r.h),r.sb(r.w))},t.\u0275dir=r.nb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class d{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let p=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Ed){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new d(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new g(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new g(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.sb(r.F),r.sb(r.B),r.sb(r.n))},t.\u0275dir=r.nb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class g{constructor(t,e){this.record=t,this.view=e}}let y=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new m,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){b("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){b("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.sb(r.F),r.sb(r.B))},t.\u0275dir=r.nb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class m{constructor(){this.$implicit=null,this.ngIf=null}}function b(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ib)(e)}'.`)}let v=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.sb(r.h),r.sb(r.o),r.sb(r.w))},t.\u0275dir=r.nb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),w=(()=>{class t{}return t.\u0275mod=r.qb({type:t}),t.\u0275inj=r.pb({factory:function(e){return new(e||t)},providers:[{provide:l,useClass:h}]}),t})();function _(t){return"server"===t}class O extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new O,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=C||(C=document.querySelector("base"),C)?C.getAttribute("href"):null;return null==e?null:(n=e,E||(E=document.createElement("a")),E.setAttribute("href",n),"/"===E.pathname.charAt(0)?E.pathname:"/"+E.pathname);var n}resetBaseElement(){C=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let E,C=null;const I=new r.l("TRANSITION_ID"),T=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[I,a,r.m],multi:!0}];class x{static init(){Object(r.L)(new x)}addToWindow(t){r.cb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.cb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.cb.getAllAngularRootElements=()=>t.getAllRootElements(),r.cb.frameworkStabilizers||(r.cb.frameworkStabilizers=[]),r.cb.frameworkStabilizers.push(t=>{const e=r.cb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const S=new r.l("EventManagerPlugins");let k=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(S),r.zb(r.s))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})();class P{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let A=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})(),N=(()=>{class t extends A{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.zb(a))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})();const D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},M=/%COMP%/g;function j(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?j(t,i,n):(i=i.replace(M,t),n.push(i))}return n}function R(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let L=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.G.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new V(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.G.ShadowDom:return new U(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=j(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.zb(k),r.zb(N),r.zb(r.a))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})();class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(D[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=D[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=D[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.y.DashCase|r.y.Important)?t.style.setProperty(e,n,i&r.y.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.y.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,R(n)):this.eventManager.addEventListener(t,e,R(n))}}class V extends F{constructor(t,e,n,r){super(t),this.component=n;const i=j(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(M,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(M,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class U extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=j(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let q=(()=>{class t extends P{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(a))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})();const B=["alt","control","meta","shift"],z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},G={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let K=(()=>{class t extends P{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(B.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&H.hasOwnProperty(e)&&(e=H[e]))}return z[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),B.forEach(r=>{r!=n&&(0,G[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.zb(a))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.ob)({factory:function(){return Object(r.zb)(Q)},token:t,providedIn:"root"}),t})(),Q=(()=>{class t extends W{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.A.NONE:return e;case r.A.HTML:return Object(r.R)(e,"HTML")?Object(r.jb)(e):Object(r.P)(this._doc,String(e));case r.A.STYLE:return Object(r.R)(e,"Style")?Object(r.jb)(e):e;case r.A.SCRIPT:if(Object(r.R)(e,"Script"))return Object(r.jb)(e);throw new Error("unsafe value used in a script context");case r.A.URL:return Object(r.bb)(e),Object(r.R)(e,"URL")?Object(r.jb)(e):Object(r.Q)(String(e));case r.A.RESOURCE_URL:if(Object(r.R)(e,"ResourceURL"))return Object(r.jb)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(r.S)(t)}bypassSecurityTrustStyle(t){return Object(r.V)(t)}bypassSecurityTrustScript(t){return Object(r.U)(t)}bypassSecurityTrustUrl(t){return Object(r.W)(t)}bypassSecurityTrustResourceUrl(t){return Object(r.T)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.zb(a))},t.\u0275prov=Object(r.ob)({factory:function(){return t=Object(r.zb)(r.k),new Q(t.get(a));var t},token:t,providedIn:"root"}),t})();const Y=[{provide:r.u,useValue:"browser"},{provide:r.v,useValue:function(){O.makeCurrent(),x.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.hb)(document),document},deps:[]}],$=Object(r.H)(r.K,"browser",Y),X=[[],{provide:r.N,useValue:"root"},{provide:r.i,useFactory:function(){return new r.i},deps:[]},{provide:S,useClass:q,multi:!0,deps:[a,r.s,r.u]},{provide:S,useClass:K,multi:!0,deps:[a]},[],{provide:L,useClass:L,deps:[k,N,r.a]},{provide:r.x,useExisting:L},{provide:A,useExisting:N},{provide:N,useClass:N,deps:[a]},{provide:r.C,useClass:r.C,deps:[r.s]},{provide:k,useClass:k,deps:[S,r.s]},[]];let J=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:I,useExisting:r.a},T]}}}return t.\u0275mod=r.qb({type:t}),t.\u0275inj=r.pb({factory:function(e){return new(e||t)(r.zb(t,12))},providers:X,imports:[w,r.d]}),t})();"undefined"!=typeof window&&window;var Z=n("spgP"),tt=n("D0XW"),et=n("HDdC"),nt=n("Cfvw"),rt=n("LRne"),it=n("bHdf");function ot(...t){return Object(it.a)(1)(Object(rt.a)(...t))}var st=n("z+Ro");function at(...t){const e=t[t.length-1];return Object(st.a)(e)?(t.pop(),n=>ot(t,n,e)):e=>ot(t,e)}var ut=n("7o/Q");function ct(){return t=>t.lift(new lt)}class lt{call(t,e){return e.subscribe(new ht(t))}}class ht extends ut.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var ft=n("lJxs");function dt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new pt(t,e,n))}}class pt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new gt(t,this.accumulator,this.seed,this.hasSeed))}}class gt extends ut.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class yt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new mt(t,this.compare,this.keySelector))}}class mt extends ut.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function bt(t,e){return function(n){return n.lift(new vt(t,e))}}class vt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new wt(t,this.predicate,this.thisArg))}}class wt extends ut.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var _t=n("pxpQ"),Ot=n("Jgta"),Et=n("zIRd"),Ct=n("qOnz"),It=n("q/0M"),Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function xt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var St,kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pt=Pt||{},At=kt||self;function Nt(){}function Dt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Mt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var jt="closure_uid_"+(1e9*Math.random()>>>0),Rt=0;function Lt(t,e,n){return t.call.apply(t.bind,arguments)}function Ft(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Vt(t,e,n){return(Vt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lt:Ft).apply(null,arguments)}function Ut(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function qt(){return Date.now()}function Bt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function zt(){this.j=this.j,this.i=this.i}zt.prototype.j=!1,zt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,jt)&&t[jt]||(t[jt]=++Rt)}(this)},zt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ht=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Gt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Kt(t){return Array.prototype.concat.apply([],arguments)}function Wt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Qt(t){return/^[\s\xa0]*$/.test(t)}var Yt,$t=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Xt(t,e){return-1!=t.indexOf(e)}function Jt(t,e){return t<e?-1:t>e?1:0}t:{var Zt=At.navigator;if(Zt){var te=Zt.userAgent;if(te){Yt=te;break t}}Yt=""}function ee(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ne(t){var e={};for(var n in t)e[n]=t[n];return e}var re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<re.length;o++)n=re[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function oe(t){return oe[" "](t),t}oe[" "]=Nt;var se,ae,ue=Xt(Yt,"Opera"),ce=Xt(Yt,"Trident")||Xt(Yt,"MSIE"),le=Xt(Yt,"Edge"),he=le||ce,fe=Xt(Yt,"Gecko")&&!(Xt(Yt.toLowerCase(),"webkit")&&!Xt(Yt,"Edge"))&&!(Xt(Yt,"Trident")||Xt(Yt,"MSIE"))&&!Xt(Yt,"Edge"),de=Xt(Yt.toLowerCase(),"webkit")&&!Xt(Yt,"Edge");function pe(){var t=At.document;return t?t.documentMode:void 0}t:{var ge="",ye=(ae=Yt,fe?/rv:([^\);]+)(\)|;)/.exec(ae):le?/Edge\/([\d\.]+)/.exec(ae):ce?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ae):de?/WebKit\/(\S+)/.exec(ae):ue?/(?:Version)[ \/]?(\S+)/.exec(ae):void 0);if(ye&&(ge=ye?ye[1]:""),ce){var me=pe();if(null!=me&&me>parseFloat(ge)){se=String(me);break t}}se=ge}var be={};function ve(t){return function(t,e){var n=be;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=$t(String(se)).split("."),r=$t(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Jt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Jt(0==s[2].length,0==a[2].length)||Jt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var we=At.document&&ce&&(pe()||parseInt(se,10))||void 0,_e=!ce||9<=Number(we),Oe=ce&&!ve("9"),Ee=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{At.addEventListener("test",Nt,e),At.removeEventListener("test",Nt,e)}catch(n){}return t}();function Ce(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ie(t,e){if(Ce.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(fe){t:{try{oe(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Te[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ce.prototype.b=function(){this.defaultPrevented=!0},Bt(Ie,Ce);var Te={2:"touch",3:"pen",4:"mouse"};Ie.prototype.b=function(){Ie.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var xe="closure_listenable_"+(1e6*Math.random()|0),Se=0;function ke(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Se,this.Y=this.Z=!1}function Pe(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ae(t){this.src=t,this.a={},this.b=0}function Ne(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ht(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Pe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function De(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ae.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=De(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ke(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Me="closure_lm_"+(1e6*Math.random()|0),je={};function Re(t,e,n,r,i){if(r&&r.once)return Fe(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Re(t,e[o],n,r,i);return null}return n=Ke(n),t&&t[xe]?t.va(e,n,Mt(r)?!!r.capture:!!r,i):Le(t,e,n,!1,r,i)}function Le(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Mt(i)?!!i.capture:!!i;if(s&&!_e)return null;var a=He(t);if(a||(t[Me]=a=new Ae(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ze,e=_e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ee||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Fe(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Fe(t,e[o],n,r,i);return null}return n=Ke(n),t&&t[xe]?t.wa(e,n,Mt(r)?!!r.capture:!!r,i):Le(t,e,n,!0,r,i)}function Ve(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ve(t,e[o],n,r,i);else r=Mt(r)?!!r.capture:!!r,n=Ke(n),t&&t[xe]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=De(o=t.a[e],n,r,i))&&(Pe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=He(t))&&(e=t.a[e.toString()],t=-1,e&&(t=De(e,n,r,i)),(n=-1<t?e[t]:null)&&Ue(n))}function Ue(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[xe])Ne(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=He(e))?(Ne(n,t),0==n.b&&(n.src=null,e[Me]=null)):Pe(t)}}}function qe(t){return t in je?je[t]:je[t]="on"+t}function Be(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ue(t),n.call(r,e)}function ze(t,e){if(t.Y)return!0;if(!_e){if(!e)t:{e=["window","event"];for(var n=At,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Be(t,e=new Ie(e,this))}return Be(t,new Ie(e,this))}function He(t){return(t=t[Me])instanceof Ae?t:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ke(t){return"function"==typeof t?t:(t[Ge]||(t[Ge]=function(e){return t.handleEvent(e)}),t[Ge])}function We(){zt.call(this),this.c=new Ae(this),this.J=this,this.C=null}function Qe(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ce(e,t);else if(e instanceof Ce)e.target=e.target||t;else{var i=e;ie(e=new Ce(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ye(s,r,!0,e)&&i}if(i=Ye(s=e.a=t,r,!0,e)&&i,i=Ye(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ye(s=e.a=n[o],r,!1,e)&&i}function Ye(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ne(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Bt(We,zt),We.prototype[xe]=!0,(St=We.prototype).addEventListener=function(t,e,n,r){Re(this,t,e,n,r)},St.removeEventListener=function(t,e,n,r){Ve(this,t,e,n,r)},St.G=function(){if(We.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Pe(n[r]);delete e.a[t],e.b--}}this.C=null},St.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},St.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var $e=At.JSON.stringify;function Xe(){this.b=this.a=null}var Je,Ze=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new en},function(t){t.reset()});function tn(){var t=sn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function en(){this.next=this.b=this.a=null}function nn(t){At.setTimeout(function(){throw t},0)}function rn(t,e){Je||function(){var t=At.Promise.resolve(void 0);Je=function(){t.then(an)}}(),on||(Je(),on=!0),sn.add(t,e)}Xe.prototype.add=function(t,e){var n=Ze.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},en.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},en.prototype.reset=function(){this.next=this.b=this.a=null};var on=!1,sn=new Xe;function an(){for(var t;t=tn();){try{t.a.call(t.b)}catch(n){nn(n)}var e=Ze;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}on=!1}function un(t,e){We.call(this),this.b=t||1,this.a=e||At,this.f=Vt(this.Za,this),this.g=qt()}function cn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ln(t,e,n){if("function"==typeof t)n&&(t=Vt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vt(t.handleEvent,t)}return 2147483647<Number(e)?-1:At.setTimeout(t,e||0)}function hn(t){t.a=ln(function(){t.a=null,t.c&&(t.c=!1,hn(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Bt(un,We),(St=un.prototype).aa=!1,St.M=null,St.Za=function(){if(this.aa){var t=qt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Qe(this,"tick"),this.aa&&(cn(this),this.start()))}},St.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=qt())},St.G=function(){un.X.G.call(this),cn(this),delete this.a};var fn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:hn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(At.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(zt);function dn(t){zt.call(this),this.b=t,this.a={}}Bt(dn,zt);var pn=[];function gn(t,e,n,r){Array.isArray(n)||(n&&(pn[0]=n.toString()),n=pn);for(var i=0;i<n.length;i++){var o=Re(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function yn(t){ee(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ue(t)},t),t.a={}}function mn(){this.a=!0}function bn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return $e(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}dn.prototype.G=function(){dn.X.G.call(this),yn(this)},dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mn.prototype.info=function(){};var vn={},wn=null;function _n(){return wn=wn||new We}function On(t){Ce.call(this,vn.Fa,t)}function En(t){var e=_n();Qe(e,new On(e,t))}function Cn(t,e){Ce.call(this,vn.STAT_EVENT,t),this.stat=e}function In(t){var e=_n();Qe(e,new Cn(e,t))}function Tn(t){Ce.call(this,vn.Ga,t)}function xn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){t()},e)}vn.Fa="serverreachability",Bt(On,Ce),vn.STAT_EVENT="statevent",Bt(Cn,Ce),vn.Ga="timingevent",Bt(Tn,Ce);var Sn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},kn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Pn(){}function An(){}Pn.prototype.a=null;var Nn,Dn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Mn(){Ce.call(this,"d")}function jn(){Ce.call(this,"c")}function Rn(){}function Ln(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new dn(this),this.P=Fn,this.R=new un(t=he?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Bt(Mn,Ce),Bt(jn,Ce),Bt(Rn,Pn),Nn=new Rn;var Fn=45e3,Vn={},Un={};function qn(t,e,n){t.H=1,t.i=cr(rr(e)),t.j=n,t.I=!0,Bn(t,null)}function Bn(t,e){t.u=qt(),Gn(t),t.l=rr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Or(n.b,"t",r),t.D=0,t.a=yi(t.g,t.g.C?e:null),0<t.O&&(t.F=new fn(Vt(t.Ca,t,t.a),t.O)),gn(t.J,t.a,"readystatechange",t.Xa),e=t.B?ne(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),En(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function zn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Hn(t,n);if(i==Un){4==e&&(t.h=4,In(14),r=!1),bn(t.c,t.f,null,"[Incomplete Response]");break}if(i==Vn){t.h=4,In(15),bn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}bn(t.c,t.f,i,null),$n(t,i)}4==e&&0==n.length&&(t.h=1,In(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ui(e),e.F=!0,In(11))):(bn(t.c,t.f,n,"[Invalid Chunked Response]"),Yn(t),Qn(t))}function Hn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Un:(n=Number(e.substring(n,r)),isNaN(n)?Vn:(r+=1)+n>e.length?Un:(e=e.substr(r,n),t.D=r+n,e))}function Gn(t){t.T=qt()+t.P,Kn(t,t.P)}function Kn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=xn(Vt(t.Va,t),e)}function Wn(t){t.o&&(At.clearTimeout(t.o),t.o=null)}function Qn(t){0==t.g.v||t.A||hi(t.g,t)}function Yn(t){Wn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,cn(t.R),yn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function $n(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||kr(n.b,t)))if(n.I=t.N,!t.C&&kr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Zd){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;li(n),Zr(n)}ai(n),In(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=xn(Vt(n.Sa,n),6e3));if(1>=Sr(n.b)&&n.ea){try{n.ea()}catch(Zd){}n.ea=void 0}}else di(n,11)}else if((t.C||n.a==t)&&li(n),!Qt(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Xt(l,"spdy")||Xt(l,"quic")||Xt(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Pr(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ur(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=qt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=gi(u,u.C?u.ga:null,u.fa),d.C){Ar(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Wn(p),Gn(p)),u.a=d}else si(u);0<n.g.length&&ni(n)}else"stop"!=i[0]&&"close"!=i[0]||di(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?di(n,7):Jr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);En(4)}catch(Zd){}}function Xn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Dt(t)||"string"==typeof t)Gt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Dt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Dt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Jn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Jn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Zn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];tr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)tr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function tr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(St=Ln.prototype).setTimeout=function(t){this.P=t},St.Xa=function(t){t=t.target;var e=this.F;e&&3==Qr(t)?e.f():this.Ca(t)},St.Ca=function(t){try{if(t==this.a)t:{var e=Qr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!he&&!this.a.$())){this.A||4!=e||7==n||En(8==n||0>=r?3:2),Wn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qt(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,In(12),Yn(this),Qn(this);break t}bn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,$n(this,u)}this.I?(zn(this,e,o),he&&this.b&&3==e&&(gn(this.J,this.R,"tick",this.Wa),this.R.start())):(bn(this.c,this.f,o,null),$n(this,o)),4==e&&Yn(this),this.b&&!this.A&&(4==e?hi(this.g,this):(this.b=!1,Gn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,In(12)):(this.h=0,In(13)),Yn(this),Qn(this)}}}catch(c){}},St.Wa=function(){if(this.a){var t=Qr(this.a),e=this.a.$();this.D<e.length&&(Wn(this),zn(this,t,e),this.b&&4!=t&&Gn(this))}},St.cancel=function(){this.A=!0,Yn(this)},St.Va=function(){this.o=null;var t=qt();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(En(3),In(17)),Yn(this),this.h=2,Qn(this)):Kn(this,this.T-t)},(St=Jn.prototype).K=function(){Zn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},St.L=function(){return Zn(this),this.a.concat()},St.get=function(t,e){return tr(this.b,t)?this.b[t]:e},St.set=function(t,e){tr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},St.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var er=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof nr){this.a=void 0!==e?e:t.a,ir(this,t.f),this.j=t.j,or(this,t.c),sr(this,t.h),this.g=t.g,e=t.b;var n=new br;n.c=e.c,e.a&&(n.a=new Jn(e.a),n.b=e.b),ar(this,n),this.i=t.i}else t&&(n=String(t).match(er))?(this.a=!!e,ir(this,n[1]||"",!0),this.j=lr(n[2]||""),or(this,n[3]||"",!0),sr(this,n[4]),this.g=lr(n[5]||"",!0),ar(this,n[6]||"",!0),this.i=lr(n[7]||"")):(this.a=!!e,this.b=new br(null,this.a))}function rr(t){return new nr(t)}function ir(t,e,n){t.f=n?lr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function or(t,e,n){t.c=n?lr(e,!0):e}function sr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ar(t,e,n){e instanceof br?(t.b=e,function(t,e){e&&!t.f&&(vr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(wr(this,e),Or(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=hr(e,yr)),t.b=new br(e,t.a))}function ur(t,e,n){t.b.set(e,n)}function cr(t){return ur(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^qt()).toString(36)),t}function lr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}nr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(hr(e,dr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(hr(e,dr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(hr(n,"/"==n.charAt(0)?gr:pr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",hr(n,mr)),t.join("")};var dr=/[#\/\?@]/g,pr=/[#\?:]/g,gr=/[#\?]/g,yr=/[#\?@]/g,mr=/#/g;function br(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vr(t){t.a||(t.a=new Jn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function wr(t,e){vr(t),e=Er(t,e),tr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,tr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Zn(t)))}function _r(t,e){return vr(t),e=Er(t,e),tr(t.a.b,e)}function Or(t,e,n){wr(t,e),0<n.length&&(t.c=null,t.a.set(Er(t,e),Wt(n)),t.b+=n.length)}function Er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(St=br.prototype).add=function(t,e){vr(this),this.c=null,t=Er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},St.forEach=function(t,e){vr(this),this.a.forEach(function(n,r){Gt(n,function(n){t.call(e,n,r,this)},this)},this)},St.L=function(){vr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},St.K=function(t){vr(this);var e=[];if("string"==typeof t)_r(this,t)&&(e=Kt(e,this.a.get(Er(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Kt(e,t[n])}return e},St.set=function(t,e){return vr(this),this.c=null,_r(this,t=Er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},St.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},St.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Cr=function(){return function(t,e){this.b=t,this.a=e}}();function Ir(t){this.g=t||Tr,t=At.PerformanceNavigationTiming?0<(t=At.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(At.ia&&At.ia.ya&&At.ia.ya()&&At.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Tr=10;function xr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Sr(t){return t.b?1:t.a?t.a.size:0}function kr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Pr(t,e){t.a?t.a.add(e):t.b=e}function Ar(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Nr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=xt(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Wt(t.c)}function Dr(){}function Mr(){this.a=new Dr}function jr(t,e,n){var r=n||"";try{Xn(t,function(t,n){var i=t;Mt(t)&&(i=$e(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Rp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Rp}}function Rr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ir.prototype.cancel=function(){var t,e;if(this.c=Nr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=xt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Dr.prototype.stringify=function(t){return At.JSON.stringify(t,void 0)},Dr.prototype.parse=function(t){return At.JSON.parse(t,void 0)};var Lr=At.JSON.parse;function Fr(t){We.call(this),this.headers=new Jn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Vr,this.D=this.F=!1}Bt(Fr,We);var Vr="",Ur=/^https?$/i,qr=["POST","PUT"];function Br(t){return"content-type"==t.toLowerCase()}function zr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hr(t),Kr(t)}function Hr(t){t.u||(t.u=!0,Qe(t,"complete"),Qe(t,"error"))}function Gr(t){if(t.b&&void 0!==Pt&&(!t.s[1]||4!=Qr(t)||2!=t.W()))if(t.l&&4==Qr(t))ln(t.za,0,t);else if(Qe(t,"readystatechange"),4==Qr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(er)[1]||null;if(!o&&At.self&&At.self.location){var s=At.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ur.test(o?o.toLowerCase():"")}e=i}if(e)Qe(t,"complete"),Qe(t,"success");else{t.h=6;try{var a=2<Qr(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Hr(t)}}finally{Kr(t)}}}function Kr(t,e){if(t.a){Wr(t);var n=t.a,r=t.s[0]?Nt:null;t.a=null,t.s=null,e||Qe(t,"ready");try{n.onreadystatechange=r}catch(Rp){}}}function Wr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(At.clearTimeout(t.m),t.m=null)}function Qr(t){return t.a?t.a.readyState:0}function Yr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ee(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ur(t,e,n))}function $r(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Xr(t){this.pa=0,this.g=[],this.c=new mn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=$r("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=$r("baseRetryDelayMs",5e3,t),this.Ra=$r("retryDelaySeedMs",1e4,t),this.Ma=$r("forwardChannelMaxRetries",2,t),this.ma=$r("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ir(t&&t.concurrentRequestLimit),this.ka=new Mr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Jr(t){if(ti(t),3==t.v){var e=t.R++,n=rr(t.B);ur(n,"SID",t.J),ur(n,"RID",e),ur(n,"TYPE","terminate"),ii(t,n),(e=new Ln(t,t.c,e,void 0)).H=2,e.i=cr(rr(n)),n=!1,At.navigator&&At.navigator.sendBeacon&&(n=At.navigator.sendBeacon(e.i.toString(),"")),!n&&At.Image&&((new Image).src=e.i,n=!0),n||(e.a=yi(e.g,null),e.a.ba(e.i)),e.u=qt(),Gn(e)}pi(t)}function Zr(t){t.a&&(ui(t),t.a.cancel(),t.a=null)}function ti(t){Zr(t),t.j&&(At.clearTimeout(t.j),t.j=null),li(t),t.b.cancel(),t.h&&("number"==typeof t.h&&At.clearTimeout(t.h),t.h=null)}function ei(t,e){t.g.push(new Cr(t.Oa++,e)),3==t.v&&ni(t)}function ni(t){xr(t.b)||t.h||(t.h=!0,rn(t.Ba,t),t.u=0)}function ri(t,e){var n;n=e?e.f:t.R++;var r=rr(t.B);ur(r,"SID",t.J),ur(r,"RID",n),ur(r,"AID",t.P),ii(t,r),t.i&&t.l&&Yr(r,t.i,t.l),n=new Ln(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=oi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Pr(t.b,n),qn(n,r,e)}function ii(t,e){t.f&&Xn({},function(t,n){ur(e,n,t)})}function oi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Vt(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{jr(l,s,"req"+c+"_")}catch(Wi){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function si(t){t.a||t.j||(t.T=1,rn(t.Aa,t),t.o=0)}function ai(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=xn(Vt(t.Aa,t),fi(t,t.o)),t.o++,0))}function ui(t){null!=t.s&&(At.clearTimeout(t.s),t.s=null)}function ci(t){t.a=new Ln(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=rr(t.la);ur(e,"RID","rpc"),ur(e,"SID",t.J),ur(e,"CI",t.H?"0":"1"),ur(e,"AID",t.P),ii(t,e),ur(e,"TYPE","xmlhttp"),t.i&&t.l&&Yr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=cr(rr(e)),n.j=null,n.I=!0,Bn(n,t)}function li(t){null!=t.m&&(At.clearTimeout(t.m),t.m=null)}function hi(t,e){var n=null;if(t.a==e){li(t),ui(t),t.a=null;var r=2}else{if(!kr(t.b,e))return;n=e.s,Ar(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=qt()-e.u;var i=t.u;Qe(r=_n(),new Tn(r,n,e,i)),ni(t)}else si(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Sr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=xn(Vt(t.Ba,t,e),fi(t,t.u)),t.u++,0)))}(t,e)||2==r&&ai(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:di(t,5);break;case 4:di(t,10);break;case 3:di(t,6);break;default:di(t,2)}}function fi(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function di(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Vt(t.Ya,t);n||(n=new nr("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||ir(n,"https"),cr(n)),function(t,e){var n=new mn;if(At.Image){var r=new Image;r.onload=Ut(Rr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ut(Rr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ut(Rr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ut(Rr,n,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else In(2);t.v=0,t.f&&t.f.ra(e),pi(t),ti(t)}function pi(t){t.v=0,t.I=-1,t.f&&(0==Nr(t.b).length&&0==t.g.length||(t.b.c.length=0,Wt(t.g),t.g.length=0),t.f.qa())}function gi(t,e,n){var r=function(t){return t instanceof nr?rr(t):new nr(t,void 0)}(n);if(""!=r.c)e&&or(r,e+"."+r.c),sr(r,r.h);else{var i=At.location;r=function(t,e,n,r){var i=new nr(null,void 0);return t&&ir(i,t),e&&or(i,e),n&&sr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ee(t.V,function(t,e){ur(r,e,t)}),n=t.na,(e=t.A)&&n&&ur(r,e,n),ur(r,"VER",t.ha),ii(t,r),r}function yi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fr(t.Na)).F=t.C,e}function mi(){}function bi(){if(ce&&!(10<=Number(we)))throw Error("Environmental error: no available transport.")}function vi(t,e){We.call(this),this.a=new Xr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Qt(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Oi(this)}function wi(t){Mn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _i(){jn.call(this),this.status=1}function Oi(t){this.a=t}(St=Fr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Nn),this.a.onreadystatechange=Vt(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void zr(this,o)}t=n||"";var i=new Jn(this.headers);r&&Xn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Br,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=At.FormData&&t instanceof At.FormData,!(0<=Ht(qr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Wr(this),0<this.o&&((this.D=function(t){return ce&&ve(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Vt(this.xa,this)):this.m=ln(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){zr(this,o)}},St.xa=function(){void 0!==Pt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Qe(this,"timeout"),this.abort(8))},St.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Qe(this,"complete"),Qe(this,"abort"),Kr(this))},St.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kr(this,!0)),Fr.X.G.call(this)},St.za=function(){this.j||(this.A||this.l||this.g?Gr(this):this.Ua())},St.Ua=function(){Gr(this)},St.W=function(){try{return 2<Qr(this)?this.a.status:-1}catch(ae){return-1}},St.$=function(){try{return this.a?this.a.responseText:""}catch(ae){return""}},St.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Lr(e)}},St.ua=function(){return this.h},St.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(St=Xr.prototype).ha=8,St.v=1,St.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ln(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ie(r=ne(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=oi(this,n,e),ur(i=rr(this.B),"RID",t),ur(i,"CVER",22),this.A&&ur(i,"X-HTTP-Session-Id",this.A),ii(this,i),this.i&&r&&Yr(i,this.i,r),Pr(this.b,n),this.Ia&&ur(i,"TYPE","init"),this.da?(ur(i,"$req",e),ur(i,"SID","null"),n.U=!0,qn(n,i,null)):qn(n,i,e),this.v=2}}else 3==this.v&&(t?ri(this,t):0==this.g.length||xr(this.b)||ri(this))},St.Aa=function(){if(this.j=null,ci(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=xn(Vt(this.Ta,this),t)}},St.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,In(10),Zr(this),ci(this))},St.Sa=function(){null!=this.m&&(this.m=null,Zr(this),ai(this),In(19))},St.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),In(2)):(this.c.info("Failed to ping google.com"),In(1))},(St=mi.prototype).ta=function(){},St.sa=function(){},St.ra=function(){},St.qa=function(){},St.Ja=function(){},bi.prototype.a=function(t,e){return new vi(t,e)},Bt(vi,We),vi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;In(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=gi(t,null,t.fa),ni(t)},vi.prototype.close=function(){Jr(this.a)},vi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,ei(this.a,e)}else this.l?((e={}).__data__=$e(t),ei(this.a,e)):ei(this.a,t)},vi.prototype.G=function(){this.a.f=null,delete this.f,Jr(this.a),delete this.a,vi.X.G.call(this)},Bt(wi,Mn),Bt(_i,jn),Bt(Oi,mi),Oi.prototype.ta=function(){Qe(this.a,"a")},Oi.prototype.sa=function(t){Qe(this.a,new wi(t))},Oi.prototype.ra=function(t){Qe(this.a,new _i(t))},Oi.prototype.qa=function(){Qe(this.a,"b")},bi.prototype.createWebChannel=bi.prototype.a,vi.prototype.send=vi.prototype.h,vi.prototype.open=vi.prototype.g,vi.prototype.close=vi.prototype.close,Sn.NO_ERROR=0,Sn.TIMEOUT=8,Sn.HTTP_ERROR=6,kn.COMPLETE="complete",An.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",We.prototype.listen=We.prototype.va,Fr.prototype.listenOnce=Fr.prototype.wa,Fr.prototype.getLastError=Fr.prototype.Qa,Fr.prototype.getLastErrorCode=Fr.prototype.ua,Fr.prototype.getStatus=Fr.prototype.W,Fr.prototype.getResponseJson=Fr.prototype.Pa,Fr.prototype.getResponseText=Fr.prototype.$,Fr.prototype.send=Fr.prototype.ba;var Ei=Sn,Ci=kn,Ii=vn,Ti=An,xi=Fr,Si=n("mrSG"),ki=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();ki.o=-1;var Pi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ai=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Si.c)(e,t),e}(Error),Ni=new It.b("@firebase/firestore");function Di(){return Ni.logLevel}function Mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=It.a.DEBUG){var r=e.map(Li);Ni.debug.apply(Ni,Object(Si.f)(["Firestore (8.5.0): "+t],r))}}function ji(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=It.a.ERROR){var r=e.map(Li);Ni.error.apply(Ni,Object(Si.f)(["Firestore (8.5.0): "+t],r))}}function Ri(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=It.a.WARN){var r=e.map(Li);Ni.warn.apply(Ni,Object(Si.f)(["Firestore (8.5.0): "+t],r))}}function Li(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Rp){return t}}function Fi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw ji(e),new Error(e)}function Vi(t,e){t||Fi()}function Ui(t,e){return t}function qi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function zi(t,e){return t<e?-1:t>e?1:0}function Hi(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Gi(t){return t+"\0"}var Ki=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ai(Pi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ai(Pi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ai(Pi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ai(Pi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?zi(this.nanoseconds,t.nanoseconds):zi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Wi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ki(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Qi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $i(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Fi(),void 0===n?n=t.length-e:n>t.length-e&&Fi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xi),Zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Zi.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ai(Pi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ai(Pi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ai(Pi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xi),eo=function(){function t(t){this.fields=t,t.sort(to.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Hi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),no=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return zi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();no.EMPTY_BYTE_STRING=new no("");var ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(Vi(!!t),"string"==typeof t){var e=0,n=ro.exec(t);if(Vi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:oo(t.seconds),nanos:oo(t.nanos)}}function oo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function so(t){return"string"==typeof t?no.fromBase64String(t):no.fromUint8Array(t)}function ao(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uo(t){var e=t.mapValue.fields.__previous_value__;return ao(e)?uo(e):e}function co(t){var e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new Ki(e.seconds,e.nanos)}function lo(t){return null==t}function ho(t){return 0===t&&1/t==-1/0}function fo(t){return"number"==typeof t&&Number.isInteger(t)&&!ho(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var po=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ji.fromString(e))},t.fromName=function(e){return new t(Ji.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ji.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ji.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ji(e.slice()))},t}();function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ao(t)?4:10:Fi()}function yo(t,e){var n=go(t);if(n!==go(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return co(t).isEqual(co(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=io(t.timestampValue),r=io(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return so(t.bytesValue).isEqual(so(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return oo(t.geoPointValue.latitude)===oo(e.geoPointValue.latitude)&&oo(t.geoPointValue.longitude)===oo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return oo(t.integerValue)===oo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=oo(t.doubleValue),r=oo(e.doubleValue);return n===r?ho(n)===ho(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Hi(t.arrayValue.values||[],e.arrayValue.values||[],yo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Qi(n)!==Qi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yo(n[i],r[i])))return!1;return!0}(t,e);default:return Fi()}}function mo(t,e){return void 0!==(t.values||[]).find(function(t){return yo(t,e)})}function bo(t,e){var n=go(t),r=go(e);if(n!==r)return zi(n,r);switch(n){case 0:return 0;case 1:return zi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=oo(t.integerValue||t.doubleValue),r=oo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return vo(t.timestampValue,e.timestampValue);case 4:return vo(co(t),co(e));case 5:return zi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=so(t),r=so(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=zi(n[i],r[i]);if(0!==o)return o}return zi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=zi(oo(t.latitude),oo(e.latitude));return 0!==n?n:zi(oo(t.longitude),oo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bo(n[i],r[i]);if(o)return o}return zi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=zi(r[s],o[s]);if(0!==a)return a;var u=bo(n[r[s]],i[o[s]]);if(0!==u)return u}return zi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Fi()}}function vo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return zi(t,e);var n=io(t),r=io(e),i=zi(n.seconds,r.seconds);return 0!==i?i:zi(n.nanos,r.nanos)}function wo(t){return _o(t)}function _o(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=io(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?so(t.bytesValue).toBase64():"referenceValue"in t?po.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=_o(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+_o(t.fields[o])}return e+"}"}(t.mapValue):Fi();var e}function Oo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Eo(t){return!!t&&"integerValue"in t}function Co(t){return!!t&&"arrayValue"in t}function Io(t){return!!t&&"nullValue"in t}function To(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xo(t){return!!t&&"mapValue"in t}var So=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(to.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return yo(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===go(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=xo(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(to.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!xo(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function ko(t){var e=[];return Yi(t.fields||{},function(t,n){var r=new to([t]);if(xo(n)){var i=ko(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new eo(e)}var Po=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Wi.min(),So.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,So.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,So.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=So.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=So.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ao=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function No(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ao(t,e,n,r,i,o,s)}function Do(t){var e=Ui(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+wo(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),lo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ko(e.startAt)),e.endAt&&(n+="|ub:",n+=Ko(e.endAt)),e.h=n}return e.h}function Mo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Qo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!yo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$o(t.startAt,e.startAt)&&$o(t.endAt,e.endAt)}function jo(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ro=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Si.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Lo(t,n,r):"array-contains"===n?new qo(t,r):"in"===n?new Bo(t,r):"not-in"===n?new zo(t,r):"array-contains-any"===n?new Ho(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Fo(t,n):new Vo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(bo(e,this.value)):null!==e&&go(this.value)===go(e)&&this.m(bo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Fi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=po.fromName(r.referenceValue),i}return Object(Si.c)(e,t),e.prototype.matches=function(t){var e=po.comparator(t.key,this.key);return this.m(e)},e}(Ro),Fo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Uo(0,n),r}return Object(Si.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ro),Vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Uo(0,n),r}return Object(Si.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ro);function Uo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return po.fromName(t.referenceValue)})}var qo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Si.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Co(e)&&mo(e.arrayValue,this.value)},e}(Ro),Bo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Si.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&mo(this.value.arrayValue,e)},e}(Ro),zo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Si.c)(e,t),e.prototype.matches=function(t){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!mo(this.value.arrayValue,e)},e}(Ro),Ho=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Si.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Co(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return mo(e.value.arrayValue,t)})},e}(Ro),Go=function(t,e){this.position=t,this.before=e};function Ko(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return wo(t)}).join(",")}var Wo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?po.comparator(po.fromName(s.referenceValue),n.key):bo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function $o(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yo(t.position[n],e.position[n]))return!1;return!0}var Xo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Jo(t,e,n,r,i,o,s,a){return new Xo(t,e,n,r,i,o,s,a)}function Zo(t){return new Xo(t)}function ts(t){return!lo(t.limit)&&"F"===t.limitType}function es(t){return!lo(t.limit)&&"L"===t.limitType}function ns(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function is(t){return null!==t.collectionGroup}function os(t){var e=Ui(t);if(null===e.p){e.p=[];var n=rs(e),r=ns(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Wo(n)),e.p.push(new Wo(to.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Wo(to.keyField(),u))}}}return e.p}function ss(t){var e=Ui(t);if(!e.T)if("F"===e.limitType)e.T=No(e.path,e.collectionGroup,os(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=os(e);r<i.length;r++){var o=i[r];n.push(new Wo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Go(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Go(e.startAt.position,!e.startAt.before):null;e.T=No(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function as(t,e,n){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function us(t,e){return Mo(ss(t),ss(e))&&t.limitType===e.limitType}function cs(t){return Do(ss(t))+"|lt:"+t.limitType}function ls(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+wo(e.value);var e}).join(", ")+"]"),lo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ko(t.startAt)),t.endAt&&(e+=", endAt: "+Ko(t.endAt)),"Target("+e+")"}(ss(t))+"; limitType="+t.limitType+")"}function hs(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):po.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yo(t.startAt,os(t),e)||t.endAt&&Yo(t.endAt,os(t),e))}(t,e)}function fs(t){return function(e,n){for(var r=!1,i=0,o=os(t);i<o.length;i++){var s=o[i],a=ds(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ds(t,e,n){var r=t.field.isKeyField()?po.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?bo(r,i):Fi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fi()}}function ps(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ho(e)?"-0":e}}function gs(t){return{integerValue:""+t}}function ys(t,e){return fo(e)?gs(e):ps(t,e)}var ms=function(){this._=void 0};function bs(t,e,n){return t instanceof _s?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Os?Es(t,e):t instanceof Cs?Is(t,e):function(t,e){var n=ws(t,e),r=xs(n)+xs(t.A);return Eo(n)&&Eo(t.A)?gs(r):ps(t.R,r)}(t,e)}function vs(t,e,n){return t instanceof Os?Es(t,e):t instanceof Cs?Is(t,e):n}function ws(t,e){return t instanceof Ts?Eo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var _s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e}(ms),Os=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Si.c)(e,t),e}(ms);function Es(t,e){for(var n=Ss(e),r=function(t){n.some(function(e){return yo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Si.c)(e,t),e}(ms);function Is(t,e){for(var n=Ss(e),r=function(t){n=n.filter(function(e){return!yo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ts=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Si.c)(e,t),e}(ms);function xs(t){return oo(t.integerValue||t.doubleValue)}function Ss(t){return Co(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ks=function(t,e){this.field=t,this.transform=e},Ps=function(t,e){this.version=t,this.transformResults=e},As=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ns(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ds=function(){};function Ms(t,e,n){t instanceof Vs?function(t,e,n){var r=t.value.clone(),i=Bs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Us?function(t,e,n){if(Ns(t.precondition,e)){var r=Bs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(qs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function js(t,e,n){t instanceof Vs?function(t,e,n){if(Ns(t.precondition,e)){var r=t.value.clone(),i=zs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Fs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Us?function(t,e,n){if(Ns(t.precondition,e)){var r=zs(t.fieldTransforms,n,e),i=e.data;i.setAll(qs(t)),i.setAll(r),e.convertToFoundDocument(Fs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Ns(t.precondition,e)&&e.convertToNoDocument(Wi.min())}(t,e)}function Rs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=ws(o.transform,s||null);null!=a&&(null==n&&(n=So.empty()),n.set(o.field,a))}return n||null}function Ls(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Hi(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Os&&e instanceof Os||t instanceof Cs&&e instanceof Cs?Hi(t.elements,e.elements,yo):t instanceof Ts&&e instanceof Ts?yo(t.A,e.A):t instanceof _s&&e instanceof _s}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Fs(t){return t.isFoundDocument()?t.version:Wi.min()}var Vs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Si.c)(e,t),e}(Ds),Us=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Si.c)(e,t),e}(Ds);function qs(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Bs(t,e,n){var r=new Map;Vi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vs(s,a,n[i]))}return r}function zs(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,bs(a,u,e))}return r}var Hs,Gs,Ks=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Si.c)(e,t),e}(Ds),Ws=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Si.c)(e,t),e}(Ds),Qs=function(t){this.count=t};function Ys(t){switch(t){case Pi.OK:return Fi();case Pi.CANCELLED:case Pi.UNKNOWN:case Pi.DEADLINE_EXCEEDED:case Pi.RESOURCE_EXHAUSTED:case Pi.INTERNAL:case Pi.UNAVAILABLE:case Pi.UNAUTHENTICATED:return!1;case Pi.INVALID_ARGUMENT:case Pi.NOT_FOUND:case Pi.ALREADY_EXISTS:case Pi.PERMISSION_DENIED:case Pi.FAILED_PRECONDITION:case Pi.ABORTED:case Pi.OUT_OF_RANGE:case Pi.UNIMPLEMENTED:case Pi.DATA_LOSS:return!0;default:return Fi()}}function $s(t){if(void 0===t)return ji("GRPC error has no .code"),Pi.UNKNOWN;switch(t){case Hs.OK:return Pi.OK;case Hs.CANCELLED:return Pi.CANCELLED;case Hs.UNKNOWN:return Pi.UNKNOWN;case Hs.DEADLINE_EXCEEDED:return Pi.DEADLINE_EXCEEDED;case Hs.RESOURCE_EXHAUSTED:return Pi.RESOURCE_EXHAUSTED;case Hs.INTERNAL:return Pi.INTERNAL;case Hs.UNAVAILABLE:return Pi.UNAVAILABLE;case Hs.UNAUTHENTICATED:return Pi.UNAUTHENTICATED;case Hs.INVALID_ARGUMENT:return Pi.INVALID_ARGUMENT;case Hs.NOT_FOUND:return Pi.NOT_FOUND;case Hs.ALREADY_EXISTS:return Pi.ALREADY_EXISTS;case Hs.PERMISSION_DENIED:return Pi.PERMISSION_DENIED;case Hs.FAILED_PRECONDITION:return Pi.FAILED_PRECONDITION;case Hs.ABORTED:return Pi.ABORTED;case Hs.OUT_OF_RANGE:return Pi.OUT_OF_RANGE;case Hs.UNIMPLEMENTED:return Pi.UNIMPLEMENTED;case Hs.DATA_LOSS:return Pi.DATA_LOSS;default:return Fi()}}(Gs=Hs||(Hs={}))[Gs.OK=0]="OK",Gs[Gs.CANCELLED=1]="CANCELLED",Gs[Gs.UNKNOWN=2]="UNKNOWN",Gs[Gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gs[Gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gs[Gs.NOT_FOUND=5]="NOT_FOUND",Gs[Gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gs[Gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gs[Gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gs[Gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gs[Gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gs[Gs.ABORTED=10]="ABORTED",Gs[Gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gs[Gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gs[Gs.INTERNAL=13]="INTERNAL",Gs[Gs.UNAVAILABLE=14]="UNAVAILABLE",Gs[Gs.DATA_LOSS=15]="DATA_LOSS";var Xs=function(){function t(t,e){this.comparator=t,this.root=e||Zs.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zs.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zs.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Js(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Js(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Js(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Js(this.root,t,this.comparator,!0)},t}(),Js=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Zs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Fi();if(this.right.isRed())throw Fi();var t=this.left.check();if(t!==this.right.check())throw Fi();return t+(this.isRed()?0:1)},t}();Zs.EMPTY=null,Zs.RED=!0,Zs.BLACK=!1,Zs.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Fi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Zs(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ta=function(){function t(t){this.comparator=t,this.data=new Xs(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ea(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ea(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ea=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),na=new Xs(po.comparator);function ra(){return na}var ia=new Xs(po.comparator);function oa(){return ia}var sa=new Xs(po.comparator);function aa(){return sa}var ua=new ta(po.comparator);function ca(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ua,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var la=new ta(zi);function ha(){return la}var fa=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,da.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Wi.min(),r,ha(),ra(),ca())},t}(),da=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(no.EMPTY_BYTE_STRING,n,ca(),ca(),ca())},t}(),pa=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ga=function(t,e){this.targetId=t,this.V=e},ya=function(t,e,n,r){void 0===n&&(n=no.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ma=function(){function t(){this.S=0,this.D=wa(),this.C=no.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=ca(),e=ca(),n=ca();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Fi()}}),new da(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=wa()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ba=function(){function t(t){this.W=t,this.G=new Map,this.H=ra(),this.J=va(),this.Y=new ta(zi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Fi()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(jo(i))if(0===n){var o=new po(i.path);this.tt(e,o,Po.newNoDocument(o,Wi.min()))}else Vi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&jo(o.target)){var s=new po(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Po.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=ca();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new fa(t,n,this.Y,this.H,r);return this.H=ra(),this.J=va(),this.Y=new ta(zi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ma,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ta(zi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Mi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ma),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function va(){return new Xs(po.comparator)}function wa(){return new Xs(po.comparator)}var _a={asc:"ASCENDING",desc:"DESCENDING"},Oa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ea=function(t,e){this.databaseId=t,this.I=e};function Ca(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ia(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ta(t,e){return Ca(t,e.toTimestamp())}function xa(t){return Vi(!!t),Wi.fromTimestamp(function(t){var e=io(t);return new Ki(e.seconds,e.nanos)}(t))}function Sa(t,e){return function(t){return new Ji(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ka(t){var e=Ji.fromString(t);return Vi(Za(e)),e}function Pa(t,e){return Sa(t.databaseId,e.path)}function Aa(t,e){var n=ka(e);if(n.get(1)!==t.databaseId.projectId)throw new Ai(Pi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ai(Pi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new po(ja(n))}function Na(t,e){return Sa(t.databaseId,e)}function Da(t){var e=ka(t);return 4===e.length?Ji.emptyPath():ja(e)}function Ma(t){return new Ji(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ja(t){return Vi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ra(t,e,n){return{name:Pa(t,e),fields:n.toProto().mapValue.fields}}function La(t,e,n){var r=Aa(t,e.name),i=xa(e.updateTime),o=new So({mapValue:{fields:e.fields}}),s=Po.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Fa(t,e){var n;if(e instanceof Vs)n={update:Ra(t,e.key,e.value)};else if(e instanceof Ks)n={delete:Pa(t,e.key)};else if(e instanceof Us)n={update:Ra(t,e.key,e.data),updateMask:Ja(e.fieldMask)};else{if(!(e instanceof Ws))return Fi();n={verify:Pa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof _s)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Os)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ts)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Fi()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ta(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Fi()}(t,e.precondition)),n}function Va(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?As.updateTime(xa(t.updateTime)):void 0!==t.exists?As.exists(t.exists):As.none()}(e.currentDocument):As.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Vi("REQUEST_TIME"===e.setToServerValue),n=new _s):"appendMissingElements"in e?n=new Os(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Cs(e.removeAllFromArray.values||[]):"increment"in e?n=new Ts(t,e.increment):Fi();var r=to.fromServerFormat(e.fieldPath);return new ks(r,n)}(t,e)}):[];if(e.update){var i=Aa(t,e.update.name),o=new So({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new eo((t.fieldPaths||[]).map(function(t){return to.fromServerFormat(t)}))}(e.updateMask);return new Us(i,o,s,n,r)}return new Vs(i,o,n,r)}if(e.delete){var a=Aa(t,e.delete);return new Ks(a,n)}if(e.verify){var u=Aa(t,e.verify);return new Ws(u,n)}return Fi()}function Ua(t,e){return{documents:[Na(t,e.path)]}}function qa(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Na(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Na(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(To(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NAN"}};if(Io(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(To(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NAN"}};if(Io(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(t.field),op:Wa(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Qa(t.field),direction:Ka(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||lo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ha(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ha(e.endAt)),n}function Ba(t){var e=Da(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Vi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=za(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Wo(Ya(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return lo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ga(n.startAt));var l=null;return n.endAt&&(l=Ga(n.endAt)),Jo(e,i,a,s,u,"F",c,l)}function za(t){return t?void 0!==t.unaryFilter?[Xa(t)]:void 0!==t.fieldFilter?[$a(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return za(t)}).reduce(function(t,e){return t.concat(e)}):Fi():[]}function Ha(t){return{before:t.before,values:t.position}}function Ga(t){return new Go(t.values||[],!!t.before)}function Ka(t){return _a[t]}function Wa(t){return Oa[t]}function Qa(t){return{fieldPath:t.canonicalString()}}function Ya(t){return to.fromServerFormat(t.fieldPath)}function $a(t){return Ro.create(Ya(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Fi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xa(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ya(t.unaryFilter.field);return Ro.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ya(t.unaryFilter.field);return Ro.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ya(t.unaryFilter.field);return Ro.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ya(t.unaryFilter.field);return Ro.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Fi()}}function Ja(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Za(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function tu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nu(e)),e=eu(t.get(n),e);return nu(e)}function eu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function nu(t){return t+"\x01\x01"}function ru(t){var e=t.length;if(Vi(e>=2),2===e)return Vi("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ji.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Fi(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Fi()}o=s+2}return new Ji(r)}var iu=function(t,e){this.seconds=t,this.nanoseconds=e},ou=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ou.store="owner",ou.key="owner";var su=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};su.store="mutationQueues",su.keyPath="userId";var au=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};au.store="mutations",au.keyPath="batchId",au.userMutationsIndex="userMutationsIndex",au.userMutationsKeyPath=["userId","batchId"];var uu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,tu(e)]},t.key=function(t,e,n){return[t,tu(e),n]},t}();uu.store="documentMutations",uu.PLACEHOLDER=new uu;var cu=function(t,e){this.path=t,this.readTime=e},lu=function(t,e){this.path=t,this.version=e},hu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};hu.store="remoteDocuments",hu.readTimeIndex="readTimeIndex",hu.readTimeIndexPath="readTime",hu.collectionReadTimeIndex="collectionReadTimeIndex",hu.collectionReadTimeIndexPath=["parentPath","readTime"];var fu=function(t){this.byteSize=t};fu.store="remoteDocumentGlobal",fu.key="remoteDocumentGlobalKey";var du=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};du.store="targets",du.keyPath="targetId",du.queryTargetsIndexName="queryTargetsIndex",du.queryTargetsKeyPath=["canonicalId","targetId"];var pu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};pu.store="targetDocuments",pu.keyPath=["targetId","path"],pu.documentTargetsIndex="documentTargetsIndex",pu.documentTargetsKeyPath=["path","targetId"];var gu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};gu.key="targetGlobalKey",gu.store="targetGlobal";var yu=function(t,e){this.collectionId=t,this.parent=e};yu.store="collectionParents",yu.keyPath=["collectionId","parent"];var mu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};mu.store="clientMetadata",mu.keyPath="clientId";var bu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};bu.store="bundles",bu.keyPath="bundleId";var vu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};vu.store="namedQueries",vu.keyPath="name";var wu=Object(Si.f)(Object(Si.f)([],Object(Si.f)(Object(Si.f)([],Object(Si.f)(Object(Si.f)([],Object(Si.f)(Object(Si.f)([],[su.store,au.store,uu.store,hu.store,du.store,ou.store,gu.store,pu.store]),[mu.store])),[fu.store])),[yu.store])),[bu.store,vu.store]),_u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ou=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Eu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Cu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Fi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Iu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Eu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Su(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Du(e.target.error);n.ft.reject(new Su(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Su(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Mi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Pu(e)},t}(),Tu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Ct.i)())&&ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mi("SimpleDb","Removing database:",t),Au(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Ct.i)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n=this;return Object(Si.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Mi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Su(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ai(Pi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Su(t,n))},i.onupgradeneeded=function(t){Mi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Mi("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Si.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Si.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Iu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Cu.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Mi("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),xu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Au(this.Pt.delete())},t}(),Su=function(t){function e(e,n){var r=this;return(r=t.call(this,Pi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Si.c)(e,t),e}(Ai);function ku(t){return"IndexedDbTransactionError"===t.name}var Pu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Au(n)},t.prototype.add=function(t){return Mi("SimpleDb","ADD",this.store.name,t,t),Au(this.store.add(t))},t.prototype.get=function(t){var e=this;return Au(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Mi("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Mi("SimpleDb","DELETE",this.store.name,t),Au(this.store.delete(t))},t.prototype.count=function(){return Mi("SimpleDb","COUNT",this.store.name),Au(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Mi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Cu(function(n,r){e.onerror=function(t){var e=Du(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Cu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new xu(i),s=e(i.primaryKey,i.value,o);if(s instanceof Cu){var a=s.catch(function(t){return o.done(),Cu.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Cu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Au(t){return new Cu(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Du(t.target.error);n(e)}})}var Nu=!1;function Du(t){var e=Tu._t(Object(Ct.i)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ai("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Nu||(Nu=!0,setTimeout(function(){throw r},0)),r}}return t}var Mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Si.c)(e,t),e}(Ou);function ju(t,e){var n=Ui(t);return Tu.It(n.Mt,e)}var Ru=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ms(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&js(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&js(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Wi.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ca())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hi(this.mutations,t.mutations,function(t,e){return Ls(t,e)})&&Hi(this.baseMutations,t.baseMutations,function(t,e){return Ls(t,e)})},t}(),Lu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Vi(e.mutations.length===r.length);for(var i=aa(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Wi.min()),void 0===o&&(o=Wi.min()),void 0===s&&(s=no.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Vu=function(t){this.Lt=t};function Uu(t,e){if(e.document)return La(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=po.fromSegments(e.noDocument.path),r=Gu(e.noDocument.readTime),i=Po.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=po.fromSegments(e.unknownDocument.path);return r=Gu(e.unknownDocument.version),Po.newUnknownDocument(o,r)}return Fi()}function qu(t,e,n){var r=Bu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Pa(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ca(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new hu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Hu(e.version);return s=e.hasCommittedMutations,new hu(null,new cu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Hu(e.version);return new hu(new lu(c,l),null,null,!0,r,i)}return Fi()}function Bu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zu(t){var e=new Ki(t[0],t[1]);return Wi.fromTimestamp(e)}function Hu(t){var e=t.toTimestamp();return new iu(e.seconds,e.nanoseconds)}function Gu(t){var e=new Ki(t.seconds,t.nanoseconds);return Wi.fromTimestamp(e)}function Ku(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Va(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Va(t.Lt,e)}),o=Ki.fromMillis(e.localWriteTimeMs);return new Ru(e.batchId,o,n,i)}function Wu(t){var e,n,r=Gu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gu(t.lastLimboFreeSnapshotVersion):Wi.min();return void 0!==t.query.documents?(Vi(1===(n=t.query).documents.length),e=ss(Zo(Da(n.documents[0])))):e=function(t){return ss(Ba(t))}(t.query),new Fu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,no.fromBase64String(t.resumeToken))}function Qu(t,e){var n,r=Hu(e.snapshotVersion),i=Hu(e.lastLimboFreeSnapshotVersion);n=jo(e.target)?Ua(t.Lt,e.target):qa(t.Lt,e.target);var o=e.resumeToken.toBase64();return new du(e.targetId,Do(e.target),r,o,e.sequenceNumber,i,n)}function Yu(t){var e=Ba({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?as(e,e.limit,"L"):e}var $u=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Xu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Gu(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Xu(t).put({bundleId:(n=e).id,createTime:Hu(xa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ju(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Yu(e.bundledQuery),readTime:Gu(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Ju(t).put(function(t){return{name:t.name,readTime:Hu(xa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Xu(t){return ju(t,bu.store)}function Ju(t){return ju(t,vu.store)}var Zu=function(){function t(){this.Bt=new tc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Cu.resolve()},t.prototype.getCollectionParents=function(t,e){return Cu.resolve(this.Bt.getEntries(e))},t}(),tc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ta(Ji.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ta(Ji.comparator)).toArray()},t}(),ec=function(){function t(){this.qt=new tc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:tu(i)};return nc(t).put(o)}return Cu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Gi(e),""],!1,!0);return nc(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ru(o.parent))}return n})},t}();function nc(t){return ju(t,yu.store)}var rc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ic=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function oc(t,e,n){var r=t.store(au.store),i=t.store(uu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Vi(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=uu.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Cu.waitFor(o).next(function(){return c})}function sc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fi();e=t.noDocument}return JSON.stringify(e).length}ic.DEFAULT_COLLECTION_PERCENTILE=10,ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ic.DEFAULT=new ic(41943040,ic.DEFAULT_COLLECTION_PERCENTILE,ic.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ic.DISABLED=new ic(-1,0,0);var ac=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Vi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cc(t).Ot({index:au.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=lc(t),s=cc(t);return s.add({}).next(function(a){Vi("number"==typeof a);for(var u=new Ru(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Fa(t.Lt,e)}),i=n.mutations.map(function(e){return Fa(t.Lt,e)});return new au(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new ta(function(t,e){return zi(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=uu.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,uu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Cu.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return cc(t).get(e).next(function(t){return t?(Vi(t.userId===n.userId),Ku(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Cu.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return cc(t).Ot({index:au.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Vi(e.batchId>=r),o=Ku(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return cc(t).Ot({index:au.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cc(t).Nt(au.userMutationsIndex,n).next(function(t){return t.map(function(t){return Ku(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=uu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return lc(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=ru(r[1]);if(a===n.userId&&e.path.isEqual(c))return cc(t).get(u).next(function(t){if(!t)throw Fi();Vi(t.userId===n.userId),o.push(Ku(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ta(zi),i=[];return e.forEach(function(e){var o=uu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=lc(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=ru(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Cu.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=uu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ta(zi);return lc(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=ru(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(cc(t).get(e).next(function(t){if(null===t)throw Fi();Vi(t.userId===n.userId),r.push(Ku(n.R,t))}))}),Cu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return oc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Cu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Cu.resolve();var r=IDBKeyRange.lowerBound(uu.prefixForUser(e.userId)),i=[];return lc(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=ru(t[1]);i.push(o)}else r.done()}).next(function(){Vi(0===i.length)})})},t.prototype.containsKey=function(t,e){return uc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return hc(t).get(this.userId).next(function(t){return t||new su(e.userId,-1,"")})},t}();function uc(t,e,n){var r=uu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return lc(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function cc(t){return ju(t,au.store)}function lc(t){return ju(t,uu.store)}function hc(t){return ju(t,su.store)}var fc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new fc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Wi.fromTimestamp(new Ki(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return pc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Vi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return pc(t).Ot(function(s,a){var u=Wu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Cu.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return pc(t).Ot(function(t,n){var r=Wu(n);e(r)})},t.prototype.Xt=function(t){return gc(t).get(gu.key).next(function(t){return Vi(null!==t),t})},t.prototype.Zt=function(t,e){return gc(t).put(gu.key,e)},t.prototype.te=function(t,e){return pc(t).put(Qu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Do(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return pc(t).Ot({range:r,index:du.queryTargetsIndexName},function(t,n,r){var o=Wu(n);Mo(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=yc(t);return e.forEach(function(e){var s=tu(e.path);i.push(o.put(new pu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Cu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=yc(t);return Cu.forEach(e,function(e){var o=tu(e.path);return Cu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=yc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yc(t),i=ca();return r.Ot({range:n,kt:!0},function(t,e,n){var r=ru(t[1]),o=new po(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=tu(e.path),r=IDBKeyRange.bound([n],[Gi(n)],!1,!0),i=0;return yc(t).Ot({index:pu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return pc(t).get(e).next(function(t){return t?Wu(t):null})},t}();function pc(t){return ju(t,du.store)}function gc(t){return ju(t,gu.store)}function yc(t){return ju(t,pu.store)}function mc(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){if(t.code!==Pi.FAILED_PRECONDITION||t.message!==_u)throw t;return Mi("LocalStore","Unexpectedly lost primary lease"),[2]})})}function bc(t,e){var n=t[1],r=e[1],i=zi(t[0],e[0]);return 0===i?zi(n,r):i}var vc=function(){function t(t){this.ne=t,this.buffer=new ta(bc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();bc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Mi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Si.b)(e,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ku(e=n.sent())?(Mi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),_c=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Cu.resolve(ki.o);var r=new vc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mi("LruGarbageCollector","Garbage collection skipped; disabled"),Cu.resolve(rc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Mi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Mi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Di()<=It.a.DEBUG&&Mi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Cu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Oc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new _c(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ec(t,n)},t.prototype.removeReference=function(t,e,n){return Ec(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ec(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return hc(t).$t(function(r){return uc(t,r,e).next(function(t){return t&&(n=!0),Cu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),yc(t).delete([0,tu(s.path)])})});i.push(u)}}).next(function(){return Cu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ec(t,e)},t.prototype.we=function(t,e){var n,r=yc(t),i=ki.o;return r.Ot({index:pu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ki.o&&e(new po(ru(n)),i),i=s,n=o):i=ki.o}).next(function(){i!==ki.o&&e(new po(ru(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ec(t,e){return yc(t).put(function(t,e){return new pu(0,tu(t.path),e)}(e,t.currentSequenceNumber))}var Cc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Yi(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return $i(this.inner)},t}(),Ic=function(){function t(){this.changes=new Cc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Wi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Po.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Cu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Tc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return kc(t).put(Pc(e),n)},t.prototype.removeEntry=function(t,e){var n=kc(t),r=Pc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return kc(t).get(Pc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return kc(t).get(Pc(e)).next(function(t){return{document:n.ye(e,t),size:sc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ra();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ra(),i=new Xs(po.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,sc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Cu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return kc(t).Ot({range:r},function(t,e,r){for(var s=po.fromSegments(t);o&&po.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ra(),o=e.path.length+1,s={};if(n.isEqual(Wi.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Bu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=hu.collectionReadTimeIndex}return kc(t).Ot(s,function(t,n,s){if(t.length===o){var a=Uu(r.R,n);e.path.isPrefixOf(a.key.path)?hs(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new xc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Sc(t).get(fu.key).next(function(t){return Vi(!!t),t})},t.prototype.me=function(t,e){return Sc(t).put(fu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Uu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Wi.min()))return n}return Po.newInvalidDocument(t)},t}(),xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Cc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Si.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ta(function(t,e){return zi(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=qu(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=sc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=qu(e.Ie.R,Po.newNoDocument(o,Wi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Cu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ic);function Sc(t){return ju(t,fu.store)}function kc(t){return ju(t,hu.store)}function Pc(t){return t.path.toArray()}var Ac=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Vi(n<r&&n>=0&&r<=11);var o=new Iu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ou.store)}(t),function(t){t.createObjectStore(su.store,{keyPath:su.keyPath}),t.createObjectStore(au.store,{keyPath:au.keyPath,autoIncrement:!0}).createIndex(au.userMutationsIndex,au.userMutationsKeyPath,{unique:!0}),t.createObjectStore(uu.store)}(t),Nc(t),function(t){t.createObjectStore(hu.store)}(t));var s=Cu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(pu.store),t.deleteObjectStore(du.store),t.deleteObjectStore(gu.store)}(t),Nc(t)),s=s.next(function(){return function(t){var e=t.store(gu.store),n=new gu(0,0,Wi.min().toTimestamp(),0);return e.put(gu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(au.store).Nt().next(function(n){t.deleteObjectStore(au.store),t.createObjectStore(au.store,{keyPath:au.keyPath,autoIncrement:!0}).createIndex(au.userMutationsIndex,au.userMutationsKeyPath,{unique:!0});var r=e.store(au.store),i=n.map(function(t){return r.put(t)});return Cu.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(fu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(hu.store);e.createIndex(hu.readTimeIndex,hu.readTimeIndexPath,{unique:!1}),e.createIndex(hu.collectionReadTimeIndex,hu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath})}(t),function(t){t.createObjectStore(vu.store,{keyPath:vu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(hu.store).Ot(function(t,n){e+=sc(n)}).next(function(){var n=new fu(e);return t.store(fu.store).put(fu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(su.store),r=t.store(au.store);return n.Nt().next(function(n){return Cu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(au.userMutationsIndex,i).next(function(r){return Cu.forEach(r,function(r){Vi(r.userId===n.userId);var i=Ku(e.R,r);return oc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(pu.store),n=t.store(hu.store);return t.store(gu.store).get(gu.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Ji(n),s=function(t){return[0,tu(t)]}(o);r.push(e.get(s).next(function(n){return n?Cu.resolve():function(n){return e.put(new pu(0,tu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Cu.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(yu.store,{keyPath:yu.keyPath});var n=e.store(yu.store),r=new tc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:tu(i)})}};return e.store(hu.store).Ot({kt:!0},function(t,e){var n=new Ji(t);return i(n.popLast())}).next(function(){return e.store(uu.store).Ot({kt:!0},function(t,e){var n=ru(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(du.store);return n.Ot(function(t,r){var i=Wu(r),o=Qu(e.R,i);return n.put(o)})},t}();function Nc(t){t.createObjectStore(pu.store,{keyPath:pu.keyPath}).createIndex(pu.documentTargetsIndex,pu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(du.store,{keyPath:du.keyPath}).createIndex(du.queryTargetsIndexName,du.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gu.store)}var Dc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ai(Pi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Oc(this,i),this.Le=n+"main",this.R=new Vu(u),this.Be=new Tu(this.Le,11,new Ac(this.R)),this.qe=new dc(this.referenceDelegate,this.R),this.Ut=new ec,this.Ue=function(t,e){return new Tc(t,e)}(this.R,this.Ut),this.Qe=new $u,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ai(Pi.FAILED_PRECONDITION,Dc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new ki(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Si.b)(e,void 0,void 0,function(){return Object(Si.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Si.b)(e,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Si.b)(e,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Rc(e).put(new mu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(ku(e))return Mi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return jc(t).get(ou.key).next(function(t){return Cu.resolve(e.tn(t))})},t.prototype.en=function(t){return Rc(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Si.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ju(t,mu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Cu.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Cu.resolve(!0):jc(t).get(ou.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ai(Pi.FAILED_PRECONDITION,Dc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Rc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Mi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Si.b)(this,void 0,void 0,function(){var t=this;return Object(Si.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ou.store,mu.store],function(e){var n=new Mu(e,ki.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Rc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ac.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Mi("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",wu,function(o){return r=new Mu(o,i.Ne?i.Ne.next():ki.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw ji("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ai(Pi.FAILED_PRECONDITION,_u);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return jc(t).get(ou.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ai(Pi.FAILED_PRECONDITION,Dc)})},t.prototype.Ze=function(t){var e=new ou(this.clientId,this.allowTabSynchronization,Date.now());return jc(t).put(ou.key,e)},t.yt=function(){return Tu.yt()},t.prototype.Xe=function(t){var e=this,n=jc(t);return n.get(ou.key).next(function(t){return e.tn(t)?(Mi("IndexedDbPersistence","Releasing primary lease."),n.delete(ou.key)):Cu.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ji("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Mi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ji("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ji("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jc(t){return ju(t,ou.store)}function Rc(t){return ju(t,mu.store)}function Lc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fc=function(t,e){this.progress=t,this.wn=e},Vc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):is(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new po(e)).next(function(t){var e=oa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=oa();return this.Ut.getCollectionParents(t,i).next(function(s){return Cu.forEach(s,function(s){var a=function(t,e){return new Xo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Po.newInvalidDocument(c),r=r.insert(c,l)),js(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){hs(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=ca(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Us&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Uc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ca(),i=ca(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Wi.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(ts(e)||es(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Di()<=It.a.DEBUG&&Mi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ls(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new ta(fs(t));return e.forEach(function(e,r){hs(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Di()<=It.a.DEBUG&&Mi("QueryEngine","Using full collection scan to execute query:",ls(e)),this.Sn.getDocumentsMatchingQuery(t,e,Wi.min())},t}(),Bc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Xs(zi),this.kn=new Cc(function(t){return Do(t)},Mo),this.On=Wi.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vc(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function zc(t,e,n,r){return new Bc(t,e,n,r)}function Hc(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Si.d)(this,function(s){switch(s.label){case 0:return n=Ui(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Vc(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=ca(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Gc(t,e){var n=Ui(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Cu.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Vi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Kc(t){var e=Ui(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Wc(t,e){var n=Ui(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Vi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ra();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Qc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Wi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Cu.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Qc(t,e,n,r,i){var o=ca();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ra();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Wi.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Mi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Yc(t,e){var n=Ui(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function $c(t,e){var n=Ui(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Cu.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Fu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Xc(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:r=Ui(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ku(s=a.sent()))throw s;return Mi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Jc(t,e,n){var r=Ui(t),i=Wi.min(),o=ca();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ui(t),i=r.kn.get(n);return void 0!==i?Cu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ss(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Wi.min(),n?o:ca())}).next(function(t){return{documents:t,Bn:o}})})}function Zc(t,e){var n=Ui(t),r=Ui(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function tl(t){var e=Ui(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ui(t),i=ra(),o=Bu(n),s=kc(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:hu.readTimeIndex,range:a},function(t,e){var n=Uu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:zu(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function el(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){return[2,(e=Ui(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=kc(t),n=Wi.min();return e.Ot({index:hu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=zu(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function nl(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Si.d)(this,function(p){switch(p.label){case 0:for(i=Ui(t),o=ca(),s=ra(),a=aa(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,$c(i,function(t){return ss(Zo(Ji.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Qc(t,f,s,Wi.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function rl(t,e,n){return void 0===n&&(n=ca()),Object(Si.b)(this,void 0,void 0,function(){var r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return[4,$c(t,ss(Yu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ui(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=xa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(no.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var il=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Cu.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:xa(n.createTime)}),Cu.resolve()},t.prototype.getNamedQuery=function(t,e){return Cu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Yu(t.bundledQuery),readTime:xa(t.readTime)}}(e)),Cu.resolve()},t}(),ol=function(){function t(){this.Wn=new ta(sl.Gn),this.zn=new ta(sl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new sl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new sl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new po(new Ji([])),r=new sl(n,t),i=new sl(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new po(new Ji([])),n=new sl(e,t),r=new sl(e,t+1),i=ca();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new sl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),sl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return po.comparator(t.key,e.key)||zi(t.ns,e.ns)},t.Hn=function(t,e){return zi(t.ns,e.ns)||po.comparator(t.key,e.key)},t}(),al=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ta(sl.Gn)}return t.prototype.checkEmpty=function(t){return Cu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Ru(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new sl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Cu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Cu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Cu.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Cu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Cu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new sl(e,0),i=new sl(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Cu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ta(zi);return e.forEach(function(t){var e=new sl(t,0),i=new sl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Cu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;po.isDocumentKey(i)||(i=i.child(""));var o=new sl(new po(i),0),s=new ta(zi);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Cu.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Vi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Cu.forEach(e.mutations,function(i){var o=new sl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new sl(e,0),r=this.rs.firstAfterOrEqual(n);return Cu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Cu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ul=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Xs(po.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Cu.resolve(n?n.document.clone():Po.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ra();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Po.newInvalidDocument(t))}),Cu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ra(),i=new po(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||hs(e,u)&&(r=r.insert(u.key,u.clone()))}return Cu.resolve(r)},t.prototype.fs=function(t,e){return Cu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new cl(this)},t.prototype.getSize=function(t){return Cu.resolve(this.size)},t}(),cl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Si.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Cu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ic),ll=function(){function t(t){this.persistence=t,this.ds=new Cc(function(t){return Do(t)},Mo),this.lastRemoteSnapshotVersion=Wi.min(),this.highestTargetId=0,this.ws=0,this._s=new ol,this.targetCount=0,this.ys=fc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Cu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Cu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Cu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Cu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Cu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new fc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Cu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Cu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Cu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Cu.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Cu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Cu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Cu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Cu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Cu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Cu.resolve(n)},t.prototype.containsKey=function(t,e){return Cu.resolve(this._s.containsKey(e))},t}(),hl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new ki(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ll(this),this.Ut=new Zu,this.Ue=function(t,e){return new ul(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Vu(e),this.Qe=new il(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new al(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Mi("MemoryPersistence","Starting transaction:",t);var i=new fl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Cu.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),fl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Si.c)(e,t),e}(Ou),dl=function(){function t(t){this.persistence=t,this.As=new ol,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Fi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Cu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Cu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Cu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cu.forEach(this.vs,function(r){var i=po.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Cu.or([function(){return Cu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),pl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function gl(t,e){return"firestore_clients_"+t+"_"+e}function yl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ml(t,e){return"firestore_targets_"+t+"_"+e}pl.UNAUTHENTICATED=new pl(null),pl.GOOGLE_CREDENTIALS=new pl("google-credentials-uid"),pl.FIRST_PARTY=new pl("first-party-uid");var bl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ai(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ji("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ai(i.error.code,i.error.message)),o?new t(e,i.state,r):(ji("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ha(),s=0;i&&s<r.activeTargetIds.length;++s)i=fo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ji("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),_l=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ji("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ol=function(){function t(){this.activeTargetIds=ha()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),El=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Xs(zi),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=gl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ol),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Si.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(gl(this.persistenceKey,r)))&&(o=wl.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ml(this.persistenceKey,t));if(n){var r=vl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ml(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Si.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Si.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=ki.o;if(null!=t)try{var n=JSON.parse(t);Vi("number"==typeof n),e=n}catch(t){ji("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ki.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new bl(this.currentUser,t,e,n),i=yl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=yl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=ml(this.persistenceKey,t),i=new vl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return wl.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return bl.Vs(new pl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return vl.Vs(r,e)},t.prototype.js=function(t){return _l.Vs(t)},t.prototype.ii=function(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Mi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ha();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Cl=function(){function t(){this.li=new Ol,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ol,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Il=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Mi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Mi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),xl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),kl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Si.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new xi;s.listenOnce(Ci.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ei.NO_ERROR:var e=s.getResponseJson();Mi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ei.TIMEOUT:Mi("Connection",'RPC "'+t+'" timed out'),o(new Ai(Pi.DEADLINE_EXCEEDED,"Request time out"));break;case Ei.HTTP_ERROR:var n=s.getStatus();if(Mi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Pi).indexOf(e)>=0?e:Pi.UNKNOWN}(r.status);o(new Ai(a,r.message))}else o(new Ai(Pi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ai(Pi.UNAVAILABLE,"Connection failed."));break;default:Fi()}}finally{Mi("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new bi,i=_n(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Ct.n)()||Object(Ct.p)()||Object(Ct.l)()||Object(Ct.m)()||Object(Ct.q)()||Object(Ct.k)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Mi("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Sl({Ei:function(t){c?Mi("Connection","Not sending because WebChannel is closed:",t):(u||(Mi("Connection","Opening WebChannel transport."),a.open(),u=!0),Mi("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ti.EventType.OPEN,function(){c||Mi("Connection","WebChannel transport opened.")}),h(a,Ti.EventType.CLOSE,function(){c||(c=!0,Mi("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ti.EventType.ERROR,function(t){c||(c=!0,Ri("Connection","WebChannel transport errored:",t),l.Vi(new Ai(Pi.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ti.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Vi(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Mi("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Hs[t];if(void 0!==e)return $s(e)}(i),s=r.message;void 0===o&&(o=Pi.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ai(o,s)),a.close()}else Mi("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ii.STAT_EVENT,function(t){10===t.stat?Mi("Connection","Detected buffering proxy"):11===t.stat&&Mi("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Mi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Mi("RestConnection","Received: ",t),t},function(e){throw Ri("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+xl[t]},t}());function Pl(){return"undefined"!=typeof window?window:null}function Al(){return"undefined"!=typeof document?document:null}function Nl(t){return new Ea(t,!0)}var Dl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Mi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ml=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Dl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Pi.RESOURCE_EXHAUSTED?(ji(e.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Pi.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Ai(Pi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Si.b)(t,void 0,void 0,function(){return Object(Si.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Mi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Mi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Si.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Fi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Vi(void 0===e||"string"==typeof e),no.fromBase64String(e||"")):(Vi(void 0===e||e instanceof Uint8Array),no.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Pi.UNKNOWN:$s(t.code);return new Ai(e,t.message||"")}(a);n=new ya(r,i,o,s||null)}else if("documentChange"in e){i=Aa(t,(r=e.documentChange).document.name),o=xa(r.document.updateTime);var a=new So({mapValue:{fields:r.document.fields}}),u=(s=Po.newFoundDocument(i,o,a),r.targetIds||[]);n=new pa(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Aa(t,(r=e.documentDelete).document),o=r.readTime?xa(r.readTime):Wi.min(),a=Po.newNoDocument(i,o),n=new pa([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Aa(t,(r=e.documentRemove).document),n=new pa([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Fi();var c=e.filter;i=new Qs(r=c.count||0),n=new ga(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Wi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Wi.min():e.readTime?xa(e.readTime):Wi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ma(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=jo(r)?{documents:Ua(t,r)}:{query:qa(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ia(t,e.resumeToken):e.snapshotVersion.compareTo(Wi.min())>0&&(n.readTime=Ca(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ma(this.R),e.removeTarget=t,this.cr(e)},e}(Ml),Rl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Si.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Vi(void 0!==e),t.map(function(t){return function(t,e){var n=xa(t.updateTime?t.updateTime:e);return n.isEqual(Wi.min())&&(n=xa(e)),new Ps(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=xa(t.commitTime);return this.listener.Tr(n,e)}return Vi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ma(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Fa(e.R,t)})};this.cr(n)},e}(Ml),Ll=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Si.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ai(Pi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Pi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ai(Pi.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Pi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ai(Pi.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Fl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ji(e),this.Vr=!1):Mi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Vl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Si.b)(o,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return Ql(this)?(Mi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return(e=Ui(t)).$r.add(4),[4,ql(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Ul(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Fl(n,r)};function Ul(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:if(!Ql(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ql(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Bl(t,e){var n=Ui(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Wl(n)?Kl(n):ch(n).er()&&Hl(n,e))}function zl(t,e){var n=Ui(t),r=ch(n);n.Or.delete(e),r.er()&&Gl(n,e),0===n.Or.size&&(r.er()?r.ir():Ql(n)&&n.Br.set("Unknown"))}function Hl(t,e){t.qr.U(e.targetId),ch(t).mr(e)}function Gl(t,e){t.qr.U(e),ch(t).yr(e)}function Kl(t){t.qr=new ba({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),ch(t).start(),t.Br.Sr()}function Wl(t){return Ql(t)&&!ch(t).tr()&&t.Or.size>0}function Ql(t){return 0===Ui(t).$r.size}function Yl(t){t.qr=void 0}function $l(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){return t.Or.forEach(function(e,n){Hl(t,e)}),[2]})})}function Xl(t,e){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(n){return Yl(t),Wl(t)?(t.Br.Nr(e),Kl(t)):t.Br.set("Unknown"),[2]})})}function Jl(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o;return Object(Si.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ya&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Si.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Mi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Zl(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pa?t.qr.X(e):e instanceof ga?t.qr.rt(e):t.qr.et(e),n.isEqual(Wi.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Kc(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(no.EMPTY_BYTE_STRING,n.snapshotVersion)),Gl(t,e);var r=new Fu(n.target,e,1,n.sequenceNumber);Hl(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Mi("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Zl(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Zl(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r=this;return Object(Si.d)(this,function(i){switch(i.label){case 0:if(!ku(e))throw e;return t.$r.add(1),[4,ql(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Kc(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Si.b)(r,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return Mi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Ul(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function th(t,e){return e().catch(function(n){return Zl(t,n,e)})}function eh(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Si.d)(this,function(s){switch(s.label){case 0:e=Ui(t),n=lh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ql(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Yc(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=lh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Zl(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return nh(e)&&rh(e),[2]}})})}function nh(t){return Ql(t)&&!lh(t).tr()&&t.kr.length>0}function rh(t){lh(t).start()}function ih(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){return lh(t).Ar(),[2]})})}function oh(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n,r;return Object(Si.d)(this,function(i){for(e=lh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function sh(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Lu.from(r,e,n),[4,th(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,eh(t)];case 2:return o.sent(),[2]}})})}function ah(t,e){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(n){switch(n.label){case 0:return e&&lh(t).pr?[4,function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:return Ys(r=e.code)&&r!==Pi.ABORTED?(n=t.kr.shift(),lh(t).sr(),[4,th(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,eh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nh(t)&&rh(t),[2]}})})}function uh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n;return Object(Si.d)(this,function(r){switch(r.label){case 0:return n=Ui(t),e?(n.$r.delete(2),[4,Ul(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,ql(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ch(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ui(t);return r.br(),new jl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:$l.bind(null,t),Ri:Xl.bind(null,t),_r:Jl.bind(null,t)}),t.Mr.push(function(n){return Object(Si.b)(e,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Wl(t)?Kl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Yl(t),e.label=3;case 3:return[2]}})})})),t.Ur}function lh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Ui(t);return r.br(),new Rl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ih.bind(null,t),Ri:ah.bind(null,t),Ir:oh.bind(null,t),Tr:sh.bind(null,t)}),t.Mr.push(function(n){return Object(Si.b)(e,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,eh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Mi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var hh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Eu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ai(Pi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fh(t,e){if(ji("AsyncQueue",e+": "+t),ku(t))return new Ai(Pi.UNAVAILABLE,e+": "+t);throw t}var dh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||po.comparator(e.key,n.key)}:function(t,e){return po.comparator(t.key,e.key)},this.keyedMap=oa(),this.sortedSet=new Xs(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ph=function(){function t(){this.Kr=new Xs(po.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Fi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),gh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,dh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&us(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yh=function(){this.Wr=void 0,this.listeners=[]},mh=function(){this.queries=new Cc(function(t){return cs(t)},us),this.onlineState="Unknown",this.Gr=new Set};function bh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Si.d)(this,function(c){switch(c.label){case 0:if(n=Ui(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new yh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=fh(a,"Initialization of query '"+ls(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Oh(n),[2]}})})}function vh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Si.d)(this,function(a){return n=Ui(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function wh(t,e){for(var n=Ui(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Oh(n)}function _h(t,e,n){var r=Ui(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Oh(t){t.Gr.forEach(function(t){t.next()})}var Eh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=gh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ch=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ih=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Aa(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?La(this.R,t.document,!1):Po.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return xa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ih(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||ca()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return[4,nl(this.localStore,new Ih(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,rl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Fc(Object.assign({},this.progress),t))]}})})}}();var Th=function(t){this.key=t},xh=function(t){this.key=t},Sh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ca(),this.mutatedKeys=ca(),this.lo=fs(t),this.fo=new dh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ph,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ts(this.query)&&i.size===this.query.limit?i.last():null,c=es(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=hs(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ts(this.query)||es(this.query))for(;s.size>this.query.limit;){var l=ts(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new gh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ph,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ca(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new xh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Th(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ca();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return gh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),kh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ph=function(t){this.key=t,this.bo=!1},Ah=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Cc(function(t){return cs(t)},us),this.Vo=new Map,this.So=new Set,this.Do=new Xs(po.comparator),this.Co=new Map,this.No=new ol,this.xo={},this.Fo=new Map,this.ko=fc.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Nh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:return n=uf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,$c(n.localStore,ss(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Dh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Bl(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Dh(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Si.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Jc(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Kh(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Jc(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Sh(e,i.Bn),s=o._o(i.documents),a=da.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Kh(t,n,u.To),c=new kh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Mh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return n=Ui(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!us(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Xc(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),zl(n.remoteStore,r.targetId),Hh(n,r.targetId)}).catch(mc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Hh(n,r.targetId),[4,Xc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function jh(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:r=cf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ui(t),i=Ki.now(),o=e.reduce(function(t,e){return t.add(e.key)},ca());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Rs(c,n.get(c.key));null!=l&&s.push(new Us(c.key,l,ko(l.toProto().mapValue),As.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Xs(zi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Yh(r,i.changes)];case 3:return a.sent(),[4,eh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=fh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Rh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:n=Ui(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Vi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Vi(r.bo):t.removedDocuments.size>0&&(Vi(r.bo),r.bo=!1))}),[4,Yh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Lh(t,e,n){var r=Ui(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ui(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Oh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fh(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Si.d)(this,function(c){switch(c.label){case 0:return(r=Ui(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xs(po.comparator)).insert(o,Po.newNoDocument(o,Wi.min())),a=ca().add(o),u=new fa(Wi.min(),new Map,new ta(zi),s,a),[4,Rh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Qh(r),[3,4];case 2:return[4,Xc(r.localStore,e,!1).then(function(){return Hh(r,e,n)}).catch(mc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Vh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:n=Ui(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gc(n.localStore,e)];case 2:return i=o.sent(),zh(n,r,null),Bh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Yh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Uh(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:r=Ui(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ui(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Vi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),zh(r,e,n),Bh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Yh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function qh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:Ql((n=Ui(t)).remoteStore)||Mi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ui(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=fh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Bh(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function zh(t,e,n){var r=Ui(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Hh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Gh(t,e)})}function Gh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Qh(t))}function Kh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Th?(t.No.addReference(o.key,e),Wh(t,o)):o instanceof xh?(Mi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Gh(t,o.key)):Fi()}}function Wh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Mi("SyncEngine","New document in limbo: "+n),t.So.add(r),Qh(t))}function Qh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new po(Ji.fromString(e)),r=t.ko.next();t.Co.set(r,new Ph(n)),t.Do=t.Do.insert(n,r),Bl(t.remoteStore,new Fu(ss(Zo(n.path)),r,2,ki.o))}}function Yh(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:return r=Ui(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uc.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Si.d)(this,function(l){switch(l.label){case 0:n=Ui(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Cu.forEach(e,function(e){return Cu.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Cu.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ku(r=l.sent()))throw r;return Mi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function $h(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:return(n=Ui(t)).currentUser.isEqual(e)?[3,3]:(Mi("SyncEngine","User change. New user:",e.toKey()),[4,Hc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Ai(Pi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Yh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Xh(t,e){var n=Ui(t),r=n.Co.get(e);if(r&&r.bo)return ca().add(r.key);var i=ca(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Jh(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return[4,Jc((n=Ui(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Kh(n,e.targetId,i.To),i)]}})})}function Zh(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){return[2,tl((e=Ui(t)).localStore).then(function(t){return Yh(e,t)})]})})}function tf(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o;return Object(Si.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ui(t),r=Ui(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Cu.resolve(null)})})}((i=Ui(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,eh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zh(i,e,r||null),Bh(i,e),function(t,e){Ui(Ui(t)._n).Gt(e)}(i.localStore,e)):Fi(),s.label=4;case 4:return[4,Yh(i,o)];case 5:return s.sent(),[3,7];case 6:Mi("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function ef(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Si.d)(this,function(c){switch(c.label){case 0:return uf(n=Ui(t)),cf(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,nf(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,uh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Bl(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Hh(n,e),Xc(n.localStore,e,!0)}),zl(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,nf(n,a)];case 5:return c.sent(),function(t){var e=Ui(t);e.Co.forEach(function(t,n){zl(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Xs(po.comparator)}(n),n.Oo=!1,[4,uh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function nf(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Si.d)(this,function(g){switch(g.label){case 0:n=Ui(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,$c(n.localStore,ss(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Jh(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Zc(n.localStore,a)];case 8:return p=g.sent(),[4,$c(n.localStore,p)];case 9:return u=g.sent(),[4,Dh(n,rf(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function rf(t){return Jo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function of(t){var e=Ui(t);return Ui(Ui(e.localStore).persistence).fn()}function sf(t,e,n,r){return Object(Si.b)(this,void 0,void 0,function(){var i,o,s;return Object(Si.d)(this,function(a){switch(a.label){case 0:return(i=Ui(t)).Oo?(Mi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,tl(i.localStore)];case 3:return o=a.sent(),s=fa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Yh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Xc(i.localStore,e,!0)];case 6:return a.sent(),Hh(i,e,r),[3,8];case 7:Fi(),a.label=8;case 8:return[2]}})})}function af(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Si.d)(this,function(f){switch(f.label){case 0:if(!(r=uf(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Mi("SyncEngine","Adding an already active target "+s),[3,5]):[4,Zc(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,$c(r.localStore,a)];case 3:return u=f.sent(),[4,Dh(r,rf(a),u.targetId,!1)];case 4:f.sent(),Bl(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Si.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Xc(r.localStore,t,!1).then(function(){zl(r.remoteStore,t),Hh(r,t)}).catch(mc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function uf(t){var e=Ui(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fh.bind(null,e),e.vo._r=wh.bind(null,e.eventManager),e.vo.Mo=_h.bind(null,e.eventManager),e}function cf(t){var e=Ui(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uh.bind(null,e),e}var lf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return this.R=Nl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return zc(this.persistence,new qc,t.initialUser,this.R)},t.prototype.qo=function(t){return new hl(dl.bs,this.R)},t.prototype.Bo=function(t){return new Cl},t.prototype.terminate=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Si.c)(e,t),e.prototype.initialize=function(e){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,el(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,cf(this.Ko.syncEngine)];case 4:return n.sent(),[4,eh(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return zc(this.persistence,new qc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new wc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Lc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ic.withCacheSize(this.cacheSizeBytes):ic.DEFAULT;return new Mc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Pl(),Al(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Cl},e}(lf),ff=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Si.c)(e,t),e.prototype.initialize=function(e){return Object(Si.b)(this,void 0,void 0,function(){var n,r=this;return Object(Si.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof El?(this.sharedClientState.syncEngine={ui:tf.bind(null,n),ai:sf.bind(null,n),hi:af.bind(null,n),fn:of.bind(null,n),ci:Zh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Si.b)(r,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return[4,ef(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Pl();if(!El.yt(e))throw new Ai(Pi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Lc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new El(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(hf),df=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n=this;return Object(Si.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Lh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=$h.bind(null,this.syncEngine),[4,uh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new mh},t.prototype.createDatastore=function(t){var e=Nl(t.databaseInfo.databaseId),n=new kl(t.databaseInfo);return function(t,e,n){return new Ll(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Lh(s.syncEngine,t,0)},o=Tl.yt()?new Tl:new Il,new Vl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ah(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return e=Ui(t),Mi("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,ql(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),pf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),gf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Eu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ch(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n=this;return Object(Si.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ai(Pi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Si.d)(this,function(u){switch(u.label){case 0:return n=Ui(t),r=Ma(n.R)+"/documents",i={documents:e.map(function(t){return Pa(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Vi(!!e.found);var n=Aa(t,e.found.name),r=xa(e.found.updateTime),i=new So({mapValue:{fields:e.found.fields}});return Po.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Vi(!!e.missing),Vi(!!e.readTime);var n=Aa(t,e.missing),r=xa(e.readTime);return Po.newNoDocument(n,r)}(t,e):Fi()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Vi(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ks(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e=this;return Object(Si.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=po.fromPath(n);e.mutations.push(new Ws(r,e.precondition(r)))}),[4,function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return n=Ui(t),r=Ma(n.R)+"/documents",i={writes:e.map(function(t){return Fa(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Fi();e=Wi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ai(Pi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?As.updateTime(e):As.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wi.min()))throw new Ai(Pi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return As.updateTime(e)}return As.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),yf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Dl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Si.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Si.d)(this,function(r){return t=new gf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!lo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ys(e)}return!1},t}(),mf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=pl.UNAUTHENTICATED,this.clientId=Bi.u(),this.credentialListener=function(){},this.receivedInitialUser=new Eu,this.credentials.setChangeListener(function(t){Mi("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ai(Pi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Eu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Si.b)(t,void 0,void 0,function(){var t,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function bf(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Si.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Mi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Si.b)(i,void 0,void 0,function(){return Object(Si.d)(this,function(t){switch(t.label){case 0:return[4,Hc(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function vf(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,wf(t)];case 1:return n=i.sent(),Mi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Si.b)(this,void 0,void 0,function(){var n,r;return Object(Si.d)(this,function(i){switch(i.label){case 0:return(n=Ui(t)).asyncQueue.verifyOperationInProgress(),Mi("RemoteStore","RemoteStore received new credentials"),r=Ql(n),n.$r.add(3),[4,ql(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Ul(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function wf(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Mi("FirestoreClient","Using default OfflineComponentProvider"),[4,bf(t,new lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function _f(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Mi("FirestoreClient","Using default OnlineComponentProvider"),[4,vf(t,new df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Of(t){return wf(t).then(function(t){return t.persistence})}function Ef(t){return wf(t).then(function(t){return t.localStore})}function Cf(t){return _f(t).then(function(t){return t.remoteStore})}function If(t){return _f(t).then(function(t){return t.syncEngine})}function Tf(t){return Object(Si.b)(this,void 0,void 0,function(){var e,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:return[4,_f(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Nh.bind(null,e.syncEngine),n.onUnlisten=Mh.bind(null,e.syncEngine),n)]}})})}function xf(t,e,n){var r=this;void 0===n&&(n={});var i=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(r,void 0,void 0,function(){var r;return Object(Si.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new pf({next:function(o){e.enqueueAndForget(function(){return vh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ai(Pi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ai(Pi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Eh(Zo(n.path),o,{includeMetadataChanges:!0,so:!0});return bh(t,s)},[4,Tf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Sf(t,e,n){var r=this;void 0===n&&(n={});var i=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(r,void 0,void 0,function(){var r;return Object(Si.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new pf({next:function(n){e.enqueueAndForget(function(){return vh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Ai(Pi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Eh(n,o,{includeMetadataChanges:!0,so:!0});return bh(t,s)},[4,Tf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var kf=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Pf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Af=new Map,Nf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Df=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(pl.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jf=function(){function t(t){var e=this;this.oc=null,this.currentUser=pl.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Mi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Vi("string"==typeof n.accessToken),new Nf(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Vi(null===t||"string"==typeof t),new pl(t)},t}(),Rf=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=pl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Lf=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rf(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(pl.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ff(t,e,n){if(!n)throw new Ai(Pi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Uf(t,e,n,r){if(!0===e&&!0===r)throw new Ai(Pi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function qf(t){if(!po.isDocumentKey(t))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Bf(t){if(po.isDocumentKey(t))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function zf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Fi()}function Hf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ai(Pi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zf(t);throw new Ai(Pi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gf(t,e){if(e<=0)throw new Ai(Pi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Kf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ai(Pi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ai(Pi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Uf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Wf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kf({}),this._settingsFrozen=!1,t instanceof Pf?(this._databaseId=t,this._credentials=new Df):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ai(Pi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(t.options.projectId)}(t),this._credentials=new jf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ai(Pi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ai(Pi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Df;switch(t.type){case"gapi":var e=t.client;return Vi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ai(Pi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Af.get(this))&&(Mi("ComponentProvider","Removing Datastore"),Af.delete(this),t.terminate()),Promise.resolve();var t},t}(),Qf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new $f(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Yf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),$f=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Zo(r))||this)._path=r,i.type="collection",i}return Object(Si.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Qf(this.firestore,null,new po(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Yf);function Xf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Ct.h)(t),Ff("collection","path",e),t instanceof Wf)return Bf(n=Ji.fromString.apply(Ji,Object(Si.f)([e],r))),new $f(t,null,n);if(!(t instanceof Qf||t instanceof $f))throw new Ai(Pi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bf(n=Ji.fromString.apply(Ji,Object(Si.f)([t.path],r)).child(Ji.fromString(e))),new $f(t.firestore,null,n)}function Jf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Ct.h)(t),1===arguments.length&&(e=Bi.u()),Ff("doc","path",e),t instanceof Wf)return qf(n=Ji.fromString.apply(Ji,Object(Si.f)([e],r))),new Qf(t,null,new po(n));if(!(t instanceof Qf||t instanceof $f))throw new Ai(Pi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qf(n=t._path.child(Ji.fromString.apply(Ji,Object(Si.f)([e],r)))),new Qf(t.firestore,t instanceof $f?t.converter:null,new po(n))}function Zf(t,e){return t=Object(Ct.h)(t),e=Object(Ct.h)(e),(t instanceof Qf||t instanceof $f)&&(e instanceof Qf||e instanceof $f)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function td(t,e){return t=Object(Ct.h)(t),e=Object(Ct.h)(e),t instanceof Yf&&e instanceof Yf&&t.firestore===e.firestore&&us(t._query,e._query)&&t.converter===e.converter}var ed=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Dl(this,"async_queue_retry"),this.Ec=function(){var e=Al();e&&Mi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Al();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Al();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Si.b)(this,void 0,void 0,function(){var t,e=this;return Object(Si.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!ku(t=n.sent()))throw t;return Mi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,ji("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=hh.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Fi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Si.b)(this,void 0,void 0,function(){var t;return Object(Si.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function nd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Eu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var rd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ed,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Si.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||od(this),this._firestoreClient.terminate()},e}(Wf);function id(t){return t._firestoreClient||od(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function od(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new kf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mf(t._credentials,t._queue,r)}function sd(t,e,n){var r=this,i=new Eu;return t.asyncQueue.enqueue(function(){return Object(Si.b)(r,void 0,void 0,function(){var r;return Object(Si.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,bf(t,n)];case 1:return o.sent(),[4,vf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Pi.FAILED_PRECONDITION||t.code===Pi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ad(t){if(t._initialized||t._terminated)throw new Ai(Pi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ud=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new to(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),cd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(no.fromBase64String(e))}catch(e){throw new Ai(Pi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(no.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ld=function(t){this._methodName=t},hd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ai(Pi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ai(Pi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return zi(this._lat,t._lat)||zi(this._long,t._long)},t}(),fd=/^__.*__$/,dd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Us(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vs(t,this.data,e,this.fieldTransforms)},t}(),pd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Us(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function gd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fi()}}var yd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Rd(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(gd(this.Dc)&&fd.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),md=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Nl(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new yd({Dc:t,methodName:e,Lc:n,path:to.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function bd(t){var e=t._freezeSettings(),n=Nl(t._databaseId);return new md(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Nd("Data must be an object, but it was:",s,r);var a,u,c=Pd(r,s);if(o.merge)a=new eo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Dd(e,f[h],n);if(!s.contains(d))throw new Ai(Pi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ld(l,d)||l.push(d)}a=new eo(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new dd(new So(c),a,u)}var wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ld);function _d(t,e,n){return new yd({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype._toFieldTransform=function(t){return new ks(t.path,new _s)},e.prototype.isEqual=function(t){return t instanceof e},e}(ld),Ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Si.c)(e,t),e.prototype._toFieldTransform=function(t){var e=_d(this,t,!0),n=this.qc.map(function(t){return kd(t,e)}),r=new Os(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ld),Cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Si.c)(e,t),e.prototype._toFieldTransform=function(t){var e=_d(this,t,!0),n=this.qc.map(function(t){return kd(t,e)}),r=new Cs(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ld),Id=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Si.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ts(t.R,ys(t.R,this.Uc));return new ks(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ld);function Td(t,e,n,r){var i=t.Bc(1,e,n);Nd("Data must be an object, but it was:",i,r);var o=[],s=So.empty();Yi(r,function(t,r){var a=jd(e,t,n);r=Object(Ct.h)(r);var u=i.kc(a);if(r instanceof wd)o.push(a);else{var c=kd(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new eo(o);return new pd(s,a,i.fieldTransforms)}function xd(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Dd(e,r,n)],u=[i];if(o.length%2!=0)throw new Ai(Pi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Dd(e,o[c])),u.push(o[c+1]);for(var l=[],h=So.empty(),f=a.length-1;f>=0;--f)if(!Ld(l,a[f])){var d=a[f],p=u[f];p=Object(Ct.h)(p);var g=s.kc(d);if(p instanceof wd)l.push(d);else{var y=kd(p,g);null!=y&&(l.push(d),h.set(d,y))}}var m=new eo(l);return new pd(h,m,s.fieldTransforms)}function Sd(t,e,n,r){return void 0===r&&(r=!1),kd(n,t.Bc(r?4:3,e))}function kd(t,e){if(Ad(t=Object(Ct.h)(t)))return Nd("Unsupported field value:",e,t),Pd(t,e);if(t instanceof ld)return function(t,e){if(!gd(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=kd(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Ct.h)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ys(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ki.fromDate(t);return{timestampValue:Ca(e.R,n)}}if(t instanceof Ki)return n=new Ki(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ca(e.R,n)};if(t instanceof hd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cd)return{bytesValue:Ia(e.R,t._byteString)};if(t instanceof Qf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Sa(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+zf(t))}(t,e)}function Pd(t,e){var n={};return $i(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(t,function(t,r){var i=kd(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ad(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ki||t instanceof hd||t instanceof cd||t instanceof Qf||t instanceof ld)}function Nd(t,e,n){if(!Ad(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=zf(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Dd(t,e,n){if((e=Object(Ct.h)(e))instanceof ud)return e._internalPath;if("string"==typeof e)return jd(t,e);throw Rd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Md=new RegExp("[~\\*/\\[\\]]");function jd(t,e,n){if(e.search(Md)>=0)throw Rd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ud.bind.apply(ud,Object(Si.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Rd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Rd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ai(Pi.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ld(t,e){return t.some(function(t){return t.isEqual(e)})}var Fd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Qf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Ud("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Fd);function Ud(t,e){return"string"==typeof e?jd(t,e):e instanceof ud?e._internalPath:e._delegate._internalPath}var qd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Bd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Si.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Ud("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Fd),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Bd),Hd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new qd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new zd(n._firestore,n._userDataWriter,r.key,r,new qd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ai(Pi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new zd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new zd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Gd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fi()}}function Kd(t,e){return t instanceof Bd&&e instanceof Bd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hd&&e instanceof Hd&&t._firestore===e._firestore&&td(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Wd(t){if(es(t)&&0===t.explicitOrderBy.length)throw new Ai(Pi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qd=function(){};function Yd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var $d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Si.c)(e,t),e.prototype._apply=function(t){var e=bd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){rp(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(np(r,t,l[c]));a={arrayValue:{values:u}}}else a=np(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||rp(s,o),a=Sd(n,"where",s,"in"===o||"not-in"===o);var h=Ro.create(i,o,a);return function(t,e){if(e.g()){var n=rs(t);if(null!==n&&!n.isEqual(e.field))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ns(t);null!==r&&ip(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ai(Pi.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Yf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Qd),Xd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Si.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Wo(e,n);return function(t,e){if(null===ns(t)){var n=rs(t);null!==n&&ip(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Yf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Xo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Qd),Jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Si.c)(e,t),e.prototype._apply=function(t){return new Yf(t.firestore,t.converter,as(t._query,this.Gc,this.zc))},e}(Qd),Zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Si.c)(e,t),e.prototype._apply=function(t){var e=ep(t,this.type,this.Hc,this.Jc);return new Yf(t.firestore,t.converter,function(t,e){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Qd),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Si.c)(e,t),e.prototype._apply=function(t){var e=ep(t,this.type,this.Hc,this.Jc);return new Yf(t.firestore,t.converter,function(t,e){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Qd);function ep(t,e,n,r){if(n[0]=Object(Ct.h)(n[0]),n[0]instanceof Fd)return function(t,e,n,r,i){if(!r)throw new Ai(Pi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=os(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Oo(e,r.key));else{var c=r.data.field(u.field);if(ao(c))throw new Ai(Pi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Go(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=bd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ai(Pi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!is(t)&&-1!==c.indexOf("/"))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ji.fromString(c));if(!po.isDocumentKey(l))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new po(l);a.push(Oo(e,h))}else{var f=Sd(n,r,c);a.push(f)}}return new Go(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function np(t,e,n){if("string"==typeof(n=Object(Ct.h)(n))){if(""===n)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!is(e)&&-1!==n.indexOf("/"))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ji.fromString(n));if(!po.isDocumentKey(r))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Oo(t,new po(r))}if(n instanceof Qf)return Oo(t,n._key);throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+zf(n)+".")}function rp(t,e){if(!Array.isArray(t)||0===t.length)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ip(t,e,n){if(!n.isEqual(e))throw new Ai(Pi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var op=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),go(t)){case 0:return null;case 1:return t.booleanValue;case 2:return oo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(so(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Fi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Yi(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new hd(oo(t.latitude),oo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=uo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(co(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=io(t);return new Ki(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ji.fromString(t);Vi(Za(n));var r=new Pf(n.get(1),n.get(3)),i=new po(n.popFirst(5));return r.isEqual(e)||ji("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function sp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ap=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Si.c)(e,t),e.prototype.convertBytes=function(t){return new cd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qf(this.firestore,null,e)},e}(op),up=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=cp(t,this._firestore),i=sp(r.converter,e,n),o=vd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,As.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=cp(t,this._firestore);return o="string"==typeof(e=Object(Ct.h)(e))||e instanceof ud?xd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Td(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,As.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=cp(t,this._firestore);return this._mutations=this._mutations.concat(new Ks(e._key,As.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ai(Pi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function cp(t,e){if((t=Object(Ct.h)(t)).firestore!==e)throw new Ai(Pi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Si.c)(e,t),e.prototype.convertBytes=function(t){return new cd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qf(this.firestore,null,e)},e}(op);function hp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Hf(t,Qf);var o=Hf(t.firestore,rd),s=bd(o);return dp(o,[("string"==typeof(e=Object(Ct.h)(e))||e instanceof ud?xd(s,"updateDoc",t._key,e,n,r):Td(s,"updateDoc",t._key,e)).toMutation(t._key,As.exists(!0))])}function fp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Ct.h)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||nd(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(nd(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Qf)c=Hf(t.firestore,rd),l=Zo(t._key.path),u={next:function(e){i[a]&&i[a](pp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Hf(t,Yf);c=Hf(d.firestore,rd),l=d._query;var p=new lp(c);u={next:function(t){i[a]&&i[a](new Hd(c,p,d,t))},error:i[a+1],complete:i[a+2]},Wd(t._query)}return function(t,e,n,r){var i=this,o=new pf(r),s=new Eh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(i,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return e=bh,[4,Tf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(i,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return e=vh,[4,Tf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(id(c),l,h,u)}function dp(t,e){return function(t,e){var n=this,r=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var n;return Object(Si.d)(this,function(i){switch(i.label){case 0:return n=jh,[4,If(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(id(t),e)}function pp(t,e,n){var r=n.docs.get(e._key),i=new lp(t);return new Bd(t,i,e._key,r,new qd(n.hasPendingWrites,n.fromCache),e.converter)}var gp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Si.c)(e,t),e.prototype.get=function(e){var n=this,r=cp(e,this._firestore),i=new lp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Bd(n._firestore,i,r._key,t._document,new qd(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=bd(t)}return t.prototype.get=function(t){var e=this,n=cp(t,this._firestore),r=new ap(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Fi();var i=t[0];if(i.isFoundDocument())return new Fd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fd(e._firestore,r,n._key,null,n.converter);throw Fi()})},t.prototype.set=function(t,e,n){var r=cp(t,this._firestore),i=sp(r.converter,e,n),o=vd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=cp(t,this._firestore);return o="string"==typeof(e=Object(Ct.h)(e))||e instanceof ud?xd(this._dataReader,"Transaction.update",s._key,e,n,r):Td(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=cp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function yp(){if("undefined"==typeof Uint8Array)throw new Ai(Pi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mp(){if("undefined"==typeof atob)throw new Ai(Pi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var bp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return mp(),new t(cd.fromBase64String(e))},t.fromUint8Array=function(e){return yp(),new t(cd.fromUint8Array(e))},t.prototype.toBase64=function(){return mp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return yp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),vp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ad(t=Hf(t,rd));var n=id(t),r=t._freezeSettings(),i=new df;return sd(n,i,new hf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ad(t=Hf(t,rd));var e=id(t),n=t._freezeSettings(),r=new df;return sd(e,r,new ff(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ai(Pi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Eu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Si.b)(e,void 0,void 0,function(){var e;return Object(Si.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Si.b)(this,void 0,void 0,function(){return Object(Si.d)(this,function(e){switch(e.label){case 0:return Tu.yt()?[4,Tu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Lc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),wp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Pf||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Hf(t,Wf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Ri("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Ct.d)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ai(Pi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Mf(new Nf(o,new pl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Si.b)(e,void 0,void 0,function(){var e,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:return[4,Of(t)];case 1:return e=r.sent(),[4,Cf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ui(t);return e.$r.delete(0),Ul(e)}(n))]}})})})}(id(Hf(this._delegate,rd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Si.b)(e,void 0,void 0,function(){var e,n;return Object(Si.d)(this,function(r){switch(r.label){case 0:return[4,Of(t)];case 1:return e=r.sent(),[4,Cf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Si.b)(this,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return(e=Ui(t)).$r.add(0),[4,ql(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(id(Hf(this._delegate,rd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Uf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(e,void 0,void 0,function(){var e;return Object(Si.d)(this,function(r){switch(r.label){case 0:return e=qh,[4,If(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(id(Hf(this._delegate,rd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new pf(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ui(t).Gr.add(e),e.next()},[4,Tf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var e;return Object(Si.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ui(t).Gr.delete(e)},[4,Tf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(id(t=Hf(t,rd)),nd(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Ai(Pi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Mp(this,Xf(this._delegate,t))}catch(t){throw Tp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Ip(this,Jf(this._delegate,t))}catch(t){throw Tp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Ap(this,function(t,e){if(t=Hf(t,Wf),Ff("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Yf(t,null,function(t){return new Xo(Ji.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Tp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var n;return Object(Si.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return _f(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new yf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(id(t),function(n){return e(new gp(t,n))})}(this._delegate,function(n){return t(new Op(e,n))})},t.prototype.batch=function(){var t=this;return id(this._delegate),new Ep(new up(this._delegate,function(e){return dp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Ai(Pi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ai(Pi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),_p=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Si.c)(e,t),e.prototype.convertBytes=function(t){return new bp(new cd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Ip.Zc(e,this.firestore,null)},e}(op),Op=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.prototype.get=function(t){var e=this,n=jp(t);return this._delegate.get(n).then(function(t){return new kp(e._firestore,new Bd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=jp(t);return n?(Vf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Si.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=jp(t);return this._delegate.delete(e),this},t}(),Ep=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=jp(t);return n?(Vf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Si.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=jp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Cp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new zd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Pp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new _p(e),n),i.set(n,o)),o},t}();Cp.eu=new WeakMap;var Ip=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Ai(Pi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Qf(n._delegate,r,new po(e)))},t.Zc=function(e,n,r){return new t(n,new Qf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Mp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Mp(this.firestore,Xf(this._delegate,t))}catch(t){throw Tp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Ct.h)(t))instanceof Qf&&Zf(this._delegate,t)},t.prototype.set=function(t,e){e=Vf("DocumentReference.set",e);try{return function(t,e,n){t=Hf(t,Qf);var r=Hf(t.firestore,rd),i=sp(t.converter,e,n);return dp(r,[vd(bd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,As.none())])}(this._delegate,t,e)}catch(t){throw Tp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?hp(this._delegate,t):hp.apply(void 0,Object(Si.f)([this._delegate,t,e],n))}catch(t){throw Tp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return dp(Hf((t=this._delegate).firestore,rd),[new Ks(t._key,As.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xp(e),i=Sp(e,function(e){return new kp(t.firestore,new Bd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return fp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,Qf);var e=Hf(t.firestore,rd),n=id(e),r=new lp(e);return function(t,e){var n=this,r=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var n;return Object(Si.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i;return Object(Si.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ui(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ai(Pi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Bd(e,r,t._key,n,new qd(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,Qf);var e=Hf(t.firestore,rd);return xf(id(e),t._key,{source:"server"}).then(function(n){return pp(e,t,n)})}(this._delegate):function(t){t=Hf(t,Qf);var e=Hf(t.firestore,rd);return xf(id(e),t._key).then(function(n){return pp(e,t,n)})}(this._delegate)).then(function(t){return new kp(e.firestore,new Bd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Cp.tu(this.firestore,e):null))},t}();function Tp(t,e,n){return t.message=t.message.replace(e,n),t}function xp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!nd(r))return r}return{}}function Sp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=nd(t[0])?t[0]:nd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ip(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Kd(this._delegate,t._delegate)},t}(),Pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Si.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(kp),Ap=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _p(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Yd(this._delegate,function(t,e,n){var r=e,i=Ud("where",t);return new $d(i,r,n)}(e,n,r)))}catch(e){throw Tp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Yd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Ud("orderBy",t);return new Xd(r,n)}(e,n)))}catch(e){throw Tp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Yd(this._delegate,function(t){return Gf("limit",t),new Jd("limit",t,"F")}(e)))}catch(e){throw Tp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Yd(this._delegate,function(t){return Gf("limitToLast",t),new Jd("limitToLast",t,"L")}(e)))}catch(e){throw Tp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Tp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Tp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tp("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Tp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Yd(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tp("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Tp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return td(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Hf(t,Yf);var e=Hf(t.firestore,rd),n=id(e),r=new lp(e);return function(t,e){var n=this,r=new Eu;return t.asyncQueue.enqueueAndForget(function(){return Object(Si.b)(n,void 0,void 0,function(){var n;return Object(Si.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Si.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Si.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Jc(t,e,!0)];case 1:return a=u.sent(),r=new Sh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=fh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ef(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Hd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Hf(t,Yf);var e=Hf(t.firestore,rd),n=id(e),r=new lp(e);return Sf(n,t._query,{source:"server"}).then(function(n){return new Hd(e,r,t,n)})}(this._delegate):function(t){t=Hf(t,Yf);var e=Hf(t.firestore,rd),n=id(e),r=new lp(e);return Wd(t._query),Sf(n,t._query).then(function(n){return new Hd(e,r,t,n)})}(this._delegate)).then(function(t){return new Dp(e.firestore,new Hd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xp(e),i=Sp(e,function(e){return new Dp(t.firestore,new Hd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return fp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Cp.tu(this.firestore,e):null))},t}(),Np=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Pp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Dp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Ap(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Pp(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Np(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Pp(n._firestore,r))})},t.prototype.isEqual=function(t){return Kd(this._delegate,t._delegate)},t}(),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Si.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Ip(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ip(this.firestore,void 0===t?Jf(this._delegate):Jf(this._delegate,t))}catch(t){throw Tp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Hf(t.firestore,rd),r=Jf(t),i=sp(t.converter,e);return dp(n,[vd(bd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,As.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Ip(e.firestore,t)})},e.prototype.isEqual=function(t){return Zf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Cp.tu(this.firestore,t):null))},e}(Ap);function jp(t){return Hf(t,Qf)}var Rp,Lp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ud.bind.apply(ud,Object(Si.f)([void 0],t)))}return t.documentId=function(){return new t(to.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Ct.h)(t))instanceof ud&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Fp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Od("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new wd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ed("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Id("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Vp=n("/6Yf"),Up={Firestore:wp,GeoPoint:hd,Timestamp:Ki,Blob:bp,Transaction:Op,WriteBatch:Ep,DocumentReference:Ip,DocumentSnapshot:kp,Query:Ap,QueryDocumentSnapshot:Pp,QuerySnapshot:Dp,CollectionReference:Mp,FieldPath:Lp,FieldValue:Fp,setLogLevel:function(t){Ni.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Vp.a("firestore",function(t){return function(t,e){return new wp(t,new rd(t,e),new vp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Up)))})(Rp=Et.a),Rp.registerVersion("@firebase/firestore","2.3.0");var qp=n("XNiG"),Bp=n("VRyK"),zp=n("zx2A");function Hp(t,e){return"function"==typeof e?n=>n.pipe(Hp((n,r)=>Object(nt.a)(t(n,r)).pipe(Object(ft.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Gp(t))}class Gp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Kp(t,this.project))}}class Kp extends zp.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new zp.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(zp.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Wp=n("qgXg"),Qp=n("quSY"),Yp=n("9ppp"),$p=n("Ylt2");class Xp extends qp.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Jp(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Yp.a;if(this.isStopped||this.hasError?o=Qp.a.EMPTY:(this.observers.push(t),o=new $p.a(this,t)),r&&t.add(t=new _t.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Wp.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Jp{constructor(t,e){this.time=t,this.value=e}}function Zp(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Xp(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const tg=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),eg=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ng=n("EY2u");function rg(t){return e=>0===t?Object(ng.a)():e.lift(new ig(t))}class ig{constructor(t){if(this.total=t,this.total<0)throw new eg}call(t,e){return e.subscribe(new og(t,this.total))}}class og extends ut.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function sg(t=null){return e=>e.lift(new ag(t))}class ag{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ug(t,this.defaultValue))}}class ug extends ut.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cg(t=fg){return e=>e.lift(new lg(t))}class lg{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new hg(t,this.errorFactory))}}class hg extends ut.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Rp){t=Rp}this.destination.error(t)}}}function fg(){return new tg}var dg=n("SpAZ");function pg(t,e){return e?Hp(()=>t,e):Hp(()=>t)}var gg=n("tf+s");const yg=new r.l("angularfire2.auth.use-emulator"),mg=new r.l("angularfire2.auth.settings"),bg=new r.l("angularfire2.auth.tenant-id"),vg=new r.l("angularfire2.auth.langugage-code"),wg=new r.l("angularfire2.auth.use-device-language"),_g=new r.l("angularfire.auth.persistence");let Og=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Z.d(i),f=Object(Z.h)(h),d=new qp.a,p=Object(rt.a)(void 0).pipe(Object(_t.b)(h.outsideAngular),Hp(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ft.a)(()=>Object(Z.g)(t,i,e)),Object(ft.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Z.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Zp({bufferSize:1,refCount:!1}));if(_(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(rt.a)(null);else{p.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bt((e,n)=>t(e,n,r)):dg.a,rg(1),n?sg(e):cg(()=>new tg))}()).subscribe();const t=p.pipe(Hp(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Zp({bufferSize:1,refCount:!1})),e=t=>new et.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Hp(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Hp(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(pg(n),Object(gg.a)(h.outsideAngular),Object(_t.b)(h.insideAngular)),this.user=t.pipe(pg(r),Object(gg.a)(h.outsideAngular),Object(_t.b)(h.insideAngular)),this.idToken=this.user.pipe(Hp(t=>t?Object(nt.a)(t.getIdToken()):Object(rt.a)(null))),this.idTokenResult=this.user.pipe(Hp(t=>t?Object(nt.a)(t.getIdTokenResult()):Object(rt.a)(null))),this.credential=Object(Bp.a)(t,d,this.authState.pipe(bt(t=>!t))).pipe(Object(ft.a)(t=>(null==t?void 0:t.user)?t:null),Object(gg.a)(h.outsideAngular),Object(_t.b)(h.insideAngular))}return Object(Z.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Z.c),r.zb(Z.b,8),r.zb(r.u),r.zb(r.s),r.zb(yg,8),r.zb(mg,8),r.zb(bg,8),r.zb(vg,8),r.zb(wg,8),r.zb(_g,8))},t.\u0275prov=Object(r.ob)({factory:function(){return new t(Object(r.zb)(Z.c),Object(r.zb)(Z.b,8),Object(r.zb)(r.u),Object(r.zb)(r.s),Object(r.zb)(yg,8),Object(r.zb)(mg,8),Object(r.zb)(bg,8),Object(r.zb)(vg,8),Object(r.zb)(wg,8),Object(r.zb)(_g,8))},token:t,providedIn:"any"}),t})();function Eg(t,e){return function(t,e=tt.a){return new et.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Cg(t,e){return Eg(t,e).pipe(Object(ft.a)(t=>({payload:t,type:"query"})))}function Ig(t,e){return Cg(t,e).pipe(at(void 0),ct(),Object(ft.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Tg(t,e,n){return Ig(t,n).pipe(dt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return xg(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return xg(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xg(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new yt(void 0,void 0)),Object(ft.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function xg(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Sg(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Z.e)(Og,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class kg{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ig(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(ft.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(at(void 0),ct(),bt(([t,e])=>e.length>0||!t),Object(ft.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(dt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Sg(t);return Tg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Cg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ft.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(nt.a)(this.query.get(t)).pipe(Object(_t.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Pg(this.ref.doc(t),this.afs)}}class Pg{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Rg(n,e);return new kg(r,i,this.afs)}snapshotChanges(){return Eg(this.ref,this.afs.schedulers.outsideAngular).pipe(at(void 0),ct(),Object(ft.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ft.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(nt.a)(this.ref.get(t)).pipe(Object(_t.b)(this.afs.schedulers.insideAngular))}}class Ag{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ig(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ft.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),bt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ig(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(dt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Sg(t);return Tg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Cg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ft.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(nt.a)(this.query.get(t)).pipe(Object(_t.b)(this.afs.schedulers.insideAngular))}}const Ng=new r.l("angularfire2.enableFirestorePersistence"),Dg=new r.l("angularfire2.firestore.persistenceSettings"),Mg=new r.l("angularfire2.firestore.settings"),jg=new r.l("angularfire2.firestore.use-emulator");function Rg(t,e=(t=>t)){return{query:e(t),ref:t}}let Lg=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Z.d(o),this.keepUnstableUntilFirst=Object(Z.h)(this.schedulers);const c=Object(Z.g)(t,o,e);!Ot.a.auth&&u&&Object(Z.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Z.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!_(i)){const e=()=>{try{return Object(nt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Rp){return"undefined"!=typeof console&&console.warn(Rp),Object(rt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(rt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Rg(n,e),o=this.schedulers.ngZone.run(()=>r);return new kg(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Ag(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Pg(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Z.c),r.zb(Z.b,8),r.zb(Ng,8),r.zb(Mg,8),r.zb(r.u),r.zb(r.s),r.zb(Dg,8),r.zb(jg,8),r.zb(yg,8))},t.\u0275prov=Object(r.ob)({factory:function(){return new t(Object(r.zb)(Z.c),Object(r.zb)(Z.b,8),Object(r.zb)(Ng,8),Object(r.zb)(Mg,8),Object(r.zb)(r.u),Object(r.zb)(r.s),Object(r.zb)(Dg,8),Object(r.zb)(jg,8),Object(r.zb)(yg,8))},token:t,providedIn:"any"}),t})(),Fg=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Ng,useValue:!0},{provide:Dg,useValue:e}]}}}return t.\u0275mod=r.qb({type:t}),t.\u0275inj=r.pb({factory:function(e){return new(e||t)},providers:[Lg]}),t})(),Vg=(()=>{class t{constructor(t){this.firestore=t}getPeople(){return this.firestore.collection("people").snapshotChanges()}updatePerson(t,e){console.log("update!"),this.firestore.collection("people").doc(t).set(e).then()}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Lg))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ug(t,e){if(1&t){const t=r.yb();r.xb(0,"div",10),r.Cb("click",function(){r.Kb(t);const n=e.index;return r.Fb(3).changeValue(n)}),r.xb(1,"span",6),r.Pb(2),r.wb(),r.wb()}if(2&t){const t=e.$implicit;r.lb(2),r.Qb(t)}}function qg(t,e){if(1&t&&(r.xb(0,"div",8),r.Nb(1,Ug,3,1,"div",9),r.wb()),2&t){const t=r.Fb(2);r.lb(1),r.Gb("ngForOf",t.options)}}function Bg(t,e){if(1&t){const t=r.yb();r.xb(0,"div",1),r.xb(1,"div",2),r.Cb("click",function(){return r.Kb(t),r.Fb().changeOptionsVisibility()}),r.Eb(),r.xb(2,"svg",3),r.tb(3,"path",4),r.tb(4,"path",5),r.wb(),r.Db(),r.xb(5,"span",6),r.Pb(6),r.wb(),r.wb(),r.Nb(7,qg,2,1,"div",7),r.wb()}if(2&t){const t=r.Fb();r.lb(6),r.Qb(t.selected),r.lb(1),r.Gb("ngIf",t.showOptions)}}let zg=(()=>{class t{constructor(t){this.eRef=t,this.onChange=new r.j,this.showOptions=!1}ngOnInit(){this.selected=this.options[0]}changeOptionsVisibility(){this.showOptions=!this.showOptions}changeValue(t){this.changeOptionsVisibility(),this.selected=this.options[t],this.onChange.emit(t)}onClick(){!this.eRef.nativeElement.contains(event.target)&&this.showOptions&&this.changeOptionsVisibility()}}return t.\u0275fac=function(e){return new(e||t)(r.sb(r.h))},t.\u0275cmp=r.mb({type:t,selectors:[["zem-custom-select"]],hostBindings:function(t,e){1&t&&r.Cb("click",function(t){return e.onClick(t)},!1,r.Jb)},inputs:{options:"options"},outputs:{onChange:"onChange"},decls:1,vars:1,consts:[["class","custom-select",4,"ngIf"],[1,"custom-select"],[1,"main-select",3,"click"],["fill","black","height","24","viewBox","0 0 24 24","width","24","xmlns","http://www.w3.org/2000/svg",1,"arrow"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],[1,"label"],["class","options",4,"ngIf"],[1,"options"],["class","option main-select",3,"click",4,"ngFor","ngForOf"],[1,"option","main-select",3,"click"]],template:function(t,e){1&t&&r.Nb(0,Bg,8,2,"div",0),2&t&&r.Gb("ngIf",!!e.options)},directives:[y,p],styles:[".custom-select[_ngcontent-%COMP%]{display:inline-block;position:relative}.custom-select[_ngcontent-%COMP%]   .main-select[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #333;cursor:pointer;height:36px;position:relative;text-align:center;width:173px}.custom-select[_ngcontent-%COMP%]   .main-select[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%)}.custom-select[_ngcontent-%COMP%]   .main-select[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{line-height:36px;vertical-align:middle}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{position:absolute;z-index:15}.custom-select[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{border:2px solid #333;border-top:0}"]}),t})(),Hg=(()=>{class t{constructor(){this.THUMB_UP_IMAGE_URL="assets/img/thumbs-up.svg",this.THUMB_DOWN_IMAGE_URL="assets/img/thumbs-down.svg"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Gg=(()=>{class t{constructor(t,e){this.constantsService=t,this.peopleService=e,this.votedStatusPerson=[!1,!1,!1,!1,!1]}isUpWinning(t){return t.positive>t.negative}calculateTime(t){const e=new Date;return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}vote(t,e,n){0===e?t.votes.positive++:t.votes.negative++,this.peopleService.updatePerson(t.id,t),this.updateVotedStatusPerson(n)}updateVotedStatusPerson(t){this.votedStatusPerson[t]=!this.votedStatusPerson[t]}getThumbUpImageUrl(){return this.constantsService.THUMB_UP_IMAGE_URL}getThumbDownImageUrl(){return this.constantsService.THUMB_DOWN_IMAGE_URL}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Hg),r.zb(Vg))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Kg=(()=>{class t{constructor(t){this.constantsService=t}calculatePercentages(t){const e=t.positive+t.negative;return[t.positive/e*100,t.negative/e*100]}getThumbUpImageUrl(){return this.constantsService.THUMB_UP_IMAGE_URL}getThumbDownImageUrl(){return this.constantsService.THUMB_DOWN_IMAGE_URL}}return t.\u0275fac=function(e){return new(e||t)(r.zb(Hg))},t.\u0275prov=r.ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Wg=function(t){return{"gauge-bar-grid":t}},Qg=function(t){return{width:t}};let Yg=(()=>{class t{constructor(t){this.service=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.sb(Kg))},t.\u0275cmp=r.mb({type:t,selectors:[["zem-gauge-bar"]],inputs:{type:"type",votes:"votes"},decls:11,vars:13,consts:[[1,"gauge-bar",3,"ngClass"],[1,"like-section",3,"ngStyle"],[1,"info-section"],["alt","up",1,"thumb-icon",3,"src"],[1,"percentage-data"],[1,"dislike-section",3,"ngStyle"],["alt","down",1,"thumb-icon",3,"src"]],template:function(t,e){1&t&&(r.xb(0,"div",0),r.xb(1,"div",1),r.xb(2,"div",2),r.tb(3,"img",3),r.xb(4,"span",4),r.Pb(5),r.wb(),r.wb(),r.wb(),r.xb(6,"div",5),r.xb(7,"div",2),r.xb(8,"span",4),r.Pb(9),r.wb(),r.tb(10,"img",6),r.wb(),r.wb(),r.wb()),2&t&&(r.Gb("ngClass",r.Hb(7,Wg,0===e.type)),r.lb(1),r.Gb("ngStyle",r.Hb(9,Qg,e.service.calculatePercentages(e.votes)[0]+"%")),r.lb(2),r.Gb("src",e.service.getThumbUpImageUrl(),r.Lb),r.lb(2),r.Rb("",e.service.calculatePercentages(e.votes)[0].toFixed(1),"%"),r.lb(1),r.Gb("ngStyle",r.Hb(11,Qg,e.service.calculatePercentages(e.votes)[1]+"%")),r.lb(3),r.Rb("",e.service.calculatePercentages(e.votes)[1].toFixed(1),"%"),r.lb(1),r.Gb("src",e.service.getThumbDownImageUrl(),r.Lb))},directives:[f,v],styles:[".gauge-bar[_ngcontent-%COMP%]{bottom:0;display:flex;height:54px;position:absolute;width:100%}.gauge-bar[_ngcontent-%COMP%]   .like-section[_ngcontent-%COMP%]{background-color:rgba(60,187,180,.8);display:flex}.gauge-bar[_ngcontent-%COMP%]   .dislike-section[_ngcontent-%COMP%]{background-color:rgba(251,189,74,.8);display:flex;justify-content:flex-end}.gauge-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{align-self:center;opacity:1}.gauge-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .percentage-data[_ngcontent-%COMP%]{color:#fff;font-size:27px}.gauge-bar[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .thumb-icon[_ngcontent-%COMP%]{height:22.5px;margin:0 15px;width:22.5px}.gauge-bar.gauge-bar-grid[_ngcontent-%COMP%]{height:36px}.gauge-bar.gauge-bar-grid[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .percentage-data[_ngcontent-%COMP%]{font-size:18px}.gauge-bar.gauge-bar-grid[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .thumb-icon[_ngcontent-%COMP%]{height:15px;width:15px}"]}),t})();const $g=function(t){return{"option-selected":t}};function Xg(t,e){if(1&t){const t=r.yb();r.vb(0),r.xb(1,"div",14),r.xb(2,"p",15),r.Pb(3),r.wb(),r.wb(),r.xb(4,"div",16),r.xb(5,"div",17),r.Cb("click",function(){return r.Kb(t),r.Fb().selectOption(0)}),r.tb(6,"img",3),r.wb(),r.xb(7,"div",18),r.Cb("click",function(){return r.Kb(t),r.Fb().selectOption(1)}),r.tb(8,"img",3),r.wb(),r.xb(9,"button",19),r.Cb("click",function(){r.Kb(t);const e=r.Fb();return e.service.vote(e.info,e.optionSelected,e.position)}),r.Pb(10," Vote Now "),r.wb(),r.wb(),r.ub()}if(2&t){const t=r.Fb();r.lb(3),r.Sb(" ",t.service.calculateTime(t.info.lastUpdated)," month ago in ",t.info.category," "),r.lb(2),r.Gb("ngClass",r.Hb(7,$g,t.isUpSelected)),r.lb(1),r.Gb("src",t.service.getThumbUpImageUrl(),r.Lb),r.lb(1),r.Gb("ngClass",r.Hb(9,$g,t.isDownSelected)),r.lb(1),r.Gb("src",t.service.getThumbDownImageUrl(),r.Lb),r.lb(1),r.Gb("disabled",void 0===t.optionSelected)}}function Jg(t,e){if(1&t){const t=r.yb();r.xb(0,"div",14),r.xb(1,"p",15),r.Pb(2," Thank for you vote! "),r.wb(),r.wb(),r.xb(3,"button",20),r.Cb("click",function(){r.Kb(t);const e=r.Fb();return e.service.updateVotedStatusPerson(e.position)}),r.Pb(4," Vote Again "),r.wb()}}const Zg=function(t){return{"custom-card-grid":t}};let ty=(()=>{class t{constructor(t,e){this.service=t,this.sanitize=e,this.isUpSelected=!1,this.isDownSelected=!1}ngOnInit(){}selectOption(t){this.isUpSelected=0===t,this.isDownSelected=1===t,this.optionSelected=t}}return t.\u0275fac=function(e){return new(e||t)(r.sb(Gg),r.sb(W))},t.\u0275cmp=r.mb({type:t,selectors:[["zem-card"]],inputs:{type:"type",info:"info",position:"position"},decls:18,vars:12,consts:[[1,"custom-card",3,"ngClass"],[1,"container-card"],[1,"thumb-box","current-status",3,"ngClass"],["alt","thumb",3,"src"],[1,"card-info"],["alt","photo",1,"photo",3,"src"],[1,"card-info-grid"],[1,"card-description"],[1,"card-description-title"],[1,"card-description-info"],[1,"voting-section"],[4,"ngIf","ngIfElse"],["voted",""],[3,"type","votes"],[1,"last-updated"],[1,"last-updated-info"],[1,"voting-main-section"],[1,"thumb-box","thumb-up",3,"ngClass","click"],[1,"thumb-box","thumb-down",3,"ngClass","click"],[1,"vote-button",3,"disabled","click"],[1,"vote-button",3,"click"]],template:function(t,e){if(1&t&&(r.xb(0,"div",0),r.xb(1,"div",1),r.xb(2,"div",2),r.tb(3,"img",3),r.wb(),r.xb(4,"div",4),r.tb(5,"img",5),r.xb(6,"div",6),r.xb(7,"div",7),r.xb(8,"span",8),r.Pb(9),r.wb(),r.tb(10,"br"),r.xb(11,"span",9),r.Pb(12),r.wb(),r.wb(),r.xb(13,"div",10),r.Nb(14,Xg,11,11,"ng-container",11),r.Nb(15,Jg,5,0,"ng-template",null,12,r.Ob),r.wb(),r.wb(),r.wb(),r.tb(17,"zem-gauge-bar",13),r.wb(),r.wb()),2&t){const t=r.Ib(16);r.Gb("ngClass",r.Hb(10,Zg,0===e.type)),r.lb(2),r.Gb("ngClass",e.service.isUpWinning(e.info.votes)?"thumb-up":"thumb-down"),r.lb(1),r.Gb("src",e.service.isUpWinning(e.info.votes)?e.service.getThumbUpImageUrl():e.service.getThumbDownImageUrl(),r.Lb),r.lb(2),r.Gb("src",e.sanitize.bypassSecurityTrustUrl(e.info.picture),r.Lb),r.lb(4),r.Qb(e.info.name),r.lb(3),r.Qb(e.info.description),r.lb(2),r.Gb("ngIf",!e.service.votedStatusPerson[e.position])("ngIfElse",t),r.lb(3),r.Gb("type",e.type)("votes",e.info.votes)}},directives:[f,y,Yg],styles:['.custom-card[_ngcontent-%COMP%]{background:#888;height:170px;width:100%}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]{position:relative}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box[_ngcontent-%COMP%]{cursor:pointer;display:inline-block;height:45px;margin-left:12px;position:relative;width:45px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.thumb-up[_ngcontent-%COMP%]{background-color:rgba(60,187,180,.8)}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.thumb-down[_ngcontent-%COMP%]{background-color:#fbbd4a}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.option-selected[_ngcontent-%COMP%]{border:2px solid #fff}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.option-selected[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:12px;top:11px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.current-status[_ngcontent-%COMP%]{cursor:auto;left:0;margin-left:0;position:absolute;top:0}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:15px;top:13px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .vote-button[_ngcontent-%COMP%]{background-color:#000;border:1px solid #fff;color:#fff;cursor:pointer;height:45px;margin-left:12px;vertical-align:top;width:135px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .vote-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{display:flex}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{height:170px;width:267px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]{display:flex;width:calc(100% - 267px)}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{color:#fff;max-height:170px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:50%;z-index:10}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]   .card-description-title[_ngcontent-%COMP%]{font-size:36px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]   .card-description-info[_ngcontent-%COMP%]{font-size:18px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .voting-section[_ngcontent-%COMP%]{margin:0 30px 0 auto;text-align:right}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .voting-section[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]   .last-updated-info[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-bottom:10px;margin-top:15px}.custom-card[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]:after{width:267px;content:"";position:absolute;background:linear-gradient(270deg,#888 0,hsla(0,0%,100%,0) 69%);height:100%}.custom-card.custom-card-grid[_ngcontent-%COMP%]{background:transparent;height:348px;width:348px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]{height:348px;width:348px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box[_ngcontent-%COMP%]{height:30px;width:30px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:8px;top:8px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.option-selected[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{left:6px;top:5px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .thumb-box.current-status[_ngcontent-%COMP%]{top:135px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .vote-button[_ngcontent-%COMP%]{height:38px;width:107px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{flex-direction:column}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{background-position:50%;background-size:cover;height:100%;object-fit:cover;position:absolute;width:100%}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]{bottom:45px;display:initial;left:45px;position:absolute;width:75%}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]{width:100%}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .card-description[_ngcontent-%COMP%]   .card-description-info[_ngcontent-%COMP%]{font-size:15px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .card-info-grid[_ngcontent-%COMP%]   .voting-section[_ngcontent-%COMP%]{margin:0 34px 0 0}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]:after{all:unset}@media (max-width:720px){.custom-card.custom-card-grid[_ngcontent-%COMP%]{height:300px;margin-right:10px;width:300px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]{height:300px;width:300px}.custom-card.custom-card-grid[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]   .voting-main-section[_ngcontent-%COMP%]{display:flex}}']}),t})(),ey=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.mb({type:t,selectors:[["zem-spinner"]],decls:5,vars:0,consts:[[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"d-flex"],[1,"sr-only","m-auto"]],template:function(t,e){1&t&&(r.xb(0,"div",0),r.tb(1,"div",1),r.wb(),r.xb(2,"div",2),r.xb(3,"p",3),r.Pb(4,"Loading..."),r.wb(),r.wb())},styles:[""]}),t})();function ny(t,e){if(1&t&&(r.xb(0,"div",14),r.tb(1,"zem-card",15),r.wb()),2&t){const t=e.$implicit,n=e.index,i=r.Fb(3);r.lb(1),r.Gb("type",i.cardType)("info",t)("position",n)}}function ry(t,e){if(1&t&&(r.vb(0),r.xb(1,"div",12),r.Nb(2,ny,2,3,"div",13),r.wb(),r.ub()),2&t){const t=r.Fb(2);r.lb(2),r.Gb("ngForOf",t.people)}}function iy(t,e){if(1&t&&(r.xb(0,"div",17),r.tb(1,"zem-card",15),r.wb()),2&t){const t=e.$implicit,n=e.index,i=r.Fb(3);r.lb(1),r.Gb("type",i.cardType)("info",t)("position",n)}}function oy(t,e){if(1&t&&r.Nb(0,iy,2,3,"div",16),2&t){const t=r.Fb(2);r.Gb("ngForOf",t.people)}}function sy(t,e){if(1&t&&r.tb(0,"zem-card",15),2&t){const t=e.$implicit,n=e.index;r.Gb("type",0)("info",t)("position",n)}}function ay(t,e){if(1&t){const t=r.yb();r.xb(0,"div",3),r.xb(1,"div",4),r.xb(2,"span",5),r.Pb(3,"Previous Rulings"),r.wb(),r.xb(4,"zem-custom-select",6),r.Cb("onChange",function(e){return r.Kb(t),r.Fb().changeType(e)}),r.wb(),r.wb(),r.xb(5,"div",7),r.Nb(6,ry,3,1,"ng-container",8),r.Nb(7,oy,1,1,"ng-template",null,9,r.Ob),r.wb(),r.xb(9,"div",10),r.Nb(10,sy,1,3,"zem-card",11),r.wb(),r.wb()}if(2&t){const t=r.Ib(8),e=r.Fb();r.lb(4),r.Gb("options",e.selectOptions),r.lb(2),r.Gb("ngIf",0===e.cardType)("ngIfElse",t),r.lb(4),r.Gb("ngForOf",e.people)}}function uy(t,e){1&t&&r.tb(0,"zem-spinner")}let cy=(()=>{class t{constructor(t){this.peopleService=t,this.cardType=0,this.isLoading=!1}ngOnInit(){this.selectOptions=["Grid","List"],this.isLoading=!0,this.peopleService.getPeople().subscribe(t=>{this.people=[],t.forEach(t=>{const e=t.payload.doc.data();e.id=t.payload.doc.id,e.lastUpdated=new Date(1e3*e.lastUpdated.seconds),this.people.push(e)}),console.log("fin"),this.isLoading=!1},t=>{this.isLoading=!1,console.error(t)})}changeType(t){this.cardType=t}}return t.\u0275fac=function(e){return new(e||t)(r.sb(Vg))},t.\u0275cmp=r.mb({type:t,selectors:[["zem-prev-rulings"]],decls:3,vars:2,consts:[["class","prev-rulings",4,"ngIf","ngIfElse"],["class","spinner"],["spinner",""],[1,"prev-rulings"],[1,"prev-rulings-header"],[1,"title"],[1,"d-none","d-md-inline",3,"options","onChange"],[1,"cards-field","d-none","d-md-block"],[4,"ngIf","ngIfElse"],["cardlistField",""],[1,"mobile-cards-field","d-inline-flex","d-md-none"],[3,"type","info","position",4,"ngFor","ngForOf"],[1,"row"],["class","col-12 col-md-6 col-lg-4 mt-4",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","mt-4"],[3,"type","info","position"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"]],template:function(t,e){if(1&t&&(r.Nb(0,ay,11,4,"div",0),r.Nb(1,uy,1,0,"ng-template",1,2,r.Ob)),2&t){const t=r.Ib(2);r.Gb("ngIf",!e.isLoading)("ngIfElse",t)}},directives:[y,zg,p,ty,ey],styles:[".prev-rulings[_ngcontent-%COMP%]   .prev-rulings-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.prev-rulings[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:45px;font-weight:300}.prev-rulings[_ngcontent-%COMP%]   .mobile-cards-field[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto}"]}),t})(),ly=(()=>{class t{constructor(){this.title="ui-test"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.mb({type:t,selectors:[["zem-root"]],decls:113,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["http-equiv","X-UA-Compatible","content","ie=edge"],["href",r.Tb("https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap"),"rel","stylesheet"],["role","navigation",1,"nav"],[1,"max-centered"],[1,"nav__logo"],["alt","Open Menu",1,"nav__hamburger","icon-button"],["width","25","height","20","xmlns","http://www.w3.org/2000/svg"],["d","M0 0h25v4H0V0zm0 8h25v4H0V8zm0 8h25v4H0v-4z","fill","#FFF","fill-rule","nonzero"],[1,"nav__links"],["href","#"],["action","javascript:void(0)"],["aria-label","search","type","text",1,"nav__search-input"],["alt","Search","type","submit",1,"nav__search","icon-button"],["src","assets/img/search.svg","alt","search"],[1,"hero"],["srcset","assets/img/pope-francis.png 750w, assets/img/pope-francis.@2x.png 1440w","sizes","(min-width: 750px) 1440px, 100vw","src","assets/img/pope-francis.png","alt","Pope Francis",1,"hero__background"],[1,"hero__featured-card"],[1,"featured-card__glass-background"],[1,"featured-card__content"],[1,"featured-card__hairline"],[1,"featured-card__title"],[1,"featured-card__desc"],[1,"featured-card__more-info"],["href","http://wikipedia.com"],["preserveAspectRatio","","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 27 18",1,"featured-card__more-info-icon"],["d","M27 .303c0 .1-.032.2-.09.28a.255.255 0 01-.2.125 2.46 2.46 0 00-1.453.602 5.676 5.676 0 00-1.166 1.952l-6.127 14.533c-.04.135-.152.203-.337.203a.374.374 0 01-.337-.203l-3.436-7.564-3.952 7.564a.374.374 0 01-.337.203.34.34 0 01-.349-.203L3.196 3.262a5.052 5.052 0 00-1.19-1.89A3.161 3.161 0 00.267.708.23.23 0 01.086.6.378.378 0 010 .355C0 .118.064 0 .192 0 .73 0 1.29.025 1.876.075c.544.053 1.056.078 1.536.078.49 0 1.067-.026 1.732-.078C5.839.025 6.456 0 6.994 0c.128 0 .192.118.192.355 0 .235-.04.352-.119.352a2.308 2.308 0 00-1.268.43c-.297.22-.47.581-.463.963.015.263.08.521.192.757l4.975 11.826 2.824-5.614-2.631-5.807A7.637 7.637 0 009.53 1.257a2.274 2.274 0 00-1.382-.55A.208.208 0 017.986.6a.4.4 0 01-.078-.245c0-.237.054-.355.168-.355.494-.002.987.023 1.477.075.46.054.92.08 1.382.078.48 0 .988-.026 1.525-.078C13.013.025 13.558 0 14.094 0c.128 0 .192.118.192.355 0 .235-.038.352-.119.352-1.073.078-1.61.399-1.61.963.047.414.174.814.373 1.175l1.74 3.72 1.732-3.403c.209-.37.333-.786.36-1.215 0-.775-.536-1.188-1.61-1.24-.097 0-.144-.117-.144-.352a.44.44 0 01.071-.24c.05-.077.098-.115.145-.115.385 0 .857.025 1.418.075.536.053.978.078 1.322.078a13.6 13.6 0 001.093-.065A16.806 16.806 0 0120.584 0c.095 0 .142.1.142.303 0 .27-.088.405-.263.405-.54.036-1.061.224-1.508.544a6.937 6.937 0 00-1.423 2.01l-2.308 4.492 3.125 6.702 4.614-11.294c.149-.36.23-.745.24-1.137 0-.828-.537-1.267-1.61-1.317-.097 0-.145-.118-.145-.353 0-.237.071-.355.216-.355.392 0 .857.025 1.394.075.496.053.914.078 1.25.078.409-.003.818-.03 1.224-.078.483-.05.915-.075 1.3-.075.111 0 .168.1.168.303z","fill","#FFF","fill-rule","nonzero"],[1,"featured-card__cta"],[1,"featured-card__buttons"],["aria-label","thumbs up",1,"icon-button"],["src","assets/img/thumbs-up.svg","alt","thumbs up"],["aria-label","thumbs down",1,"icon-button"],["src","assets/img/thumbs-down.svg","alt","thumbs down"],[1,"hero__closing-gauge"],[1,"closing-gauge__left"],[1,"closing-gauge__title"],[1,"closing-gauge__right"],[1,"closing-gauge__number"],[1,"closing-gauge__desc"],["role","doc-tip","aria-label","Speak Out",1,"banner","banner-top"],[1,"banner__left"],[1,"banner__hairline"],[1,"banner__title"],[1,"banner__right"],[1,"banner__text"],["aria-label","close",1,"icon-button"],["width","20","height","20","xmlns","http://www.w3.org/2000/svg"],["stroke","#000","stroke-width","2","fill","none","fill-rule","evenodd"],["d","M1 19L19 1M1 1l18 18"],["role","main"],["role","doc-tip","aria-label","Submit a name",1,"banner","banner-bottom"],["srcset","assets/img/bg-people.png 750w, assets/img/bg-people.@2x.png 1440w","sizes","(min-width: 750px) 1440px, 100vw","src","assets/img/bg-people.png","alt","","role","none",1,"banner__background"],[1,"banner__heading"],[1,"banner__cta"],["role","separator"],[1,"footer"],[1,"footer__links"],[1,"footer__social"],["width","24","height","24","xmlns","http://www.w3.org/2000/svg"],["d","M24 1.325v21.35c0 .732-.593 1.325-1.325 1.325H16.56v-9.294h3.12l.467-3.622H16.56V8.771c0-1.048.292-1.763 1.796-1.763h1.918v-3.24a25.663 25.663 0 00-2.795-.143c-2.766 0-4.659 1.688-4.659 4.788v2.671H9.691v3.622h3.128V24H1.325A1.325 1.325 0 010 22.676V1.325A1.325 1.325 0 011.325 0h21.35A1.325 1.325 0 0124 1.325z","fill","#262626","fill-rule","nonzero"],["width","26","height","23","xmlns","http://www.w3.org/2000/svg"],["d","M23.329 6.204c.01.23.01.458.01.687A15.182 15.182 0 01-.008 19.688c.421.05.845.075 1.27.073a10.7 10.7 0 006.627-2.289 5.335 5.335 0 01-4.984-3.704c.798.151 1.62.12 2.404-.094a5.346 5.346 0 01-4.276-5.233v-.073a5.396 5.396 0 002.413.666 5.357 5.357 0 01-1.654-7.127A15.15 15.15 0 0012.79 7.484a5.898 5.898 0 01-.135-1.217 5.336 5.336 0 019.228-3.652 10.612 10.612 0 003.392-1.29 5.368 5.368 0 01-2.351 2.955 10.811 10.811 0 003.07-.843 10.868 10.868 0 01-2.664 2.767z","fill","#262626","fill-rule","nonzero"]],template:function(t,e){1&t&&(r.xb(0,"html",0),r.xb(1,"head"),r.tb(2,"meta",1),r.tb(3,"meta",2),r.tb(4,"meta",3),r.xb(5,"title"),r.Pb(6,"Rule of Thumb"),r.wb(),r.tb(7,"link",4),r.wb(),r.xb(8,"body"),r.xb(9,"nav",5),r.xb(10,"div",6),r.xb(11,"h1",7),r.Pb(12,"Rule of thumb."),r.wb(),r.xb(13,"button",8),r.Eb(),r.xb(14,"svg",9),r.tb(15,"path",10),r.wb(),r.wb(),r.Db(),r.xb(16,"ul",11),r.xb(17,"li"),r.xb(18,"a",12),r.Pb(19,"Past Trials"),r.wb(),r.wb(),r.xb(20,"li"),r.xb(21,"a",12),r.Pb(22,"How It Works"),r.wb(),r.wb(),r.xb(23,"li"),r.xb(24,"a",12),r.Pb(25,"Login / Sign Up"),r.wb(),r.wb(),r.xb(26,"li"),r.xb(27,"form",13),r.tb(28,"input",14),r.xb(29,"button",15),r.tb(30,"img",16),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.xb(31,"header",17),r.tb(32,"img",18),r.xb(33,"div",6),r.xb(34,"div",19),r.tb(35,"div",20),r.xb(36,"div",21),r.xb(37,"p",22),r.Pb(38,"What's your opinion on"),r.wb(),r.xb(39,"h2",23),r.Pb(40,"Pope Francis?"),r.wb(),r.xb(41,"p",24),r.Pb(42," He\u2019s talking tough on clergy sexual abuse, or is he just another pervert protector? (thumbs down) or a true pedophile punishing pontiff? (thumbs up) "),r.wb(),r.xb(43,"p",25),r.xb(44,"a",26),r.Eb(),r.xb(45,"svg",27),r.tb(46,"path",28),r.wb(),r.Pb(47,"More information "),r.wb(),r.wb(),r.Db(),r.xb(48,"p",29),r.Pb(49," What\u2019s Your Veredict? "),r.wb(),r.xb(50,"div",30),r.xb(51,"button",31),r.tb(52,"img",32),r.wb(),r.xb(53,"button",33),r.tb(54,"img",34),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.xb(55,"div",35),r.xb(56,"div",36),r.xb(57,"span",37),r.Pb(58,"closing in"),r.wb(),r.wb(),r.xb(59,"div",38),r.xb(60,"span",39),r.Pb(61,"22"),r.wb(),r.xb(62,"span",40),r.Pb(63,"days"),r.wb(),r.wb(),r.wb(),r.wb(),r.xb(64,"div",6),r.xb(65,"aside",41),r.xb(66,"div",42),r.xb(67,"span",43),r.Pb(68,"Speak out. Be heard."),r.wb(),r.xb(69,"span",44),r.Pb(70,"Be counted"),r.wb(),r.wb(),r.xb(71,"div",45),r.xb(72,"p",46),r.Pb(73," Rule of Thumb is a crowd sourced court of public opinion where anyone and everyone can speak out and speak freely. It\u2019s easy: You share your opinion, we analyze and put the data in a public report. "),r.wb(),r.wb(),r.xb(74,"button",47),r.Eb(),r.xb(75,"svg",48),r.xb(76,"g",49),r.tb(77,"path",50),r.wb(),r.wb(),r.wb(),r.wb(),r.Db(),r.xb(78,"main",51),r.tb(79,"zem-prev-rulings"),r.wb(),r.xb(80,"aside",52),r.tb(81,"img",53),r.xb(82,"div",42),r.xb(83,"h2",54),r.Pb(84,"Is there anyone else you would want us to add?"),r.wb(),r.wb(),r.xb(85,"div",45),r.xb(86,"button",55),r.Pb(87," Submit a name "),r.wb(),r.wb(),r.wb(),r.tb(88,"hr",56),r.xb(89,"footer",57),r.xb(90,"div",58),r.xb(91,"ul"),r.xb(92,"li"),r.xb(93,"a",12),r.Pb(94,"Terms and Conditions"),r.wb(),r.wb(),r.xb(95,"li"),r.xb(96,"a",12),r.Pb(97,"Privacy Policy"),r.wb(),r.wb(),r.xb(98,"li"),r.xb(99,"a",12),r.Pb(100,"Contact Us"),r.wb(),r.wb(),r.wb(),r.wb(),r.xb(101,"div",59),r.xb(102,"span"),r.Pb(103,"Follow us"),r.wb(),r.xb(104,"ul"),r.xb(105,"li"),r.xb(106,"a",12),r.Eb(),r.xb(107,"svg",60),r.tb(108,"path",61),r.wb(),r.wb(),r.wb(),r.Db(),r.xb(109,"li"),r.xb(110,"a",12),r.Eb(),r.xb(111,"svg",62),r.tb(112,"path",63),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.wb(),r.wb())},directives:[cy],styles:[':root{--color-green-positive:60,187,180;--color-yellow-negative:249,173,29;--color-dark-background:rgba(0,0,0,0.4);--color-darker-background:rgba(0,0,0,0.6);--color-darker-gray:#333;--color-dark-gray:#464646;--color-light-gray:#ebebeb;--color-light-background:hsla(0,0%,100%,0.4);--color-lighter-background:hsla(0,0%,100%,0.8);--color-white:#fff}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{width:100%;margin:0;background-color:var(--color-white);font-family:Lato,sans-serif;font-size:12px;font-weight:400}body[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:var(--color-white)}button[_ngcontent-%COMP%]{font-family:Lato,sans-serif}ul[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}hr[role=separator][_ngcontent-%COMP%]{border:0;border-bottom:2px dotted var(--color-dark-gray);margin:1.5rem 1rem}.nav[_ngcontent-%COMP%]{position:fixed;z-index:2;top:0;display:flex;width:calc(100vw - 2rem);min-height:10rem;justify-content:space-between;padding:0 1rem;background:linear-gradient(180deg,rgba(0,0,0,.8) 0,transparent 80%)}.icon-button[_ngcontent-%COMP%]{padding:0;border:0;background-color:initial}.icon-button[aria-label="thumbs up"][_ngcontent-%COMP%]{background-color:rgba(var(--color-green-positive),.8)}.icon-button[aria-label="thumbs up"][_ngcontent-%COMP%]:hover{background-color:rgba(var(--color-green-positive),1)}.icon-button[aria-label="thumbs down"][_ngcontent-%COMP%]{background-color:rgba(var(--color-yellow-negative),.8)}.icon-button[aria-label="thumbs down"][_ngcontent-%COMP%]:hover{background-color:rgba(var(--color-yellow-negative),1)}.icon-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%}.nav__logo[_ngcontent-%COMP%]{margin:2.5rem 0 0;color:var(--color-white);font-size:2rem;font-weight:400;line-height:2.5rem}.nav__hamburger[_ngcontent-%COMP%]{position:relative;top:2rem;right:1rem;width:25px;height:20px}.nav__links[_ngcontent-%COMP%]{position:fixed;top:0;right:0;left:0;display:flex;width:100vw;height:calc(100vh - 4rem);flex-direction:column;padding:4rem 0 2rem;background-color:var(--color-darker-background);transform:translateX(100vw)}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;margin:3rem 0;font-size:2rem;text-align:center}.nav__links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-white);text-decoration:none}.nav__hamburger[_ngcontent-%COMP%]:focus + .nav__links[_ngcontent-%COMP%], .nav__links[_ngcontent-%COMP%]:focus-within{transform:translateX(0)}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{order:-1}.nav__search[_ngcontent-%COMP%]{width:24px;height:24px;margin-left:.5rem}.nav__search-input[_ngcontent-%COMP%]{width:25vw;border:0;border-bottom:2px solid var(--color-white);background-color:initial;border-radius:0;color:var(--color-white);font-family:Lato,sans-serif;font-size:1.5rem;transition:width .2s ease-in}.nav__search-input[_ngcontent-%COMP%]:focus{width:60vw;outline:0 none}.hero[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:80vw;min-height:35rem;max-height:38rem;margin-bottom:2rem}.hero__background[_ngcontent-%COMP%]{position:absolute;left:-35vw;width:160vw;height:100%;object-fit:cover}.hero__featured-card[_ngcontent-%COMP%]{position:relative;top:5.5rem;left:1rem;overflow:hidden;width:55vw;max-height:25rem}.hero__closing-gauge[_ngcontent-%COMP%]{position:absolute;bottom:0;display:flex;width:100%;height:3rem;background-color:var(--color-light-background)}.featured-card__glass-background[_ngcontent-%COMP%]{position:absolute;top:-20%;left:-20%;width:140%;height:140%;background:50% no-repeat linear-gradient(var(--color-dark-background),var(--color-dark-background)),-25vw 0/160vw no-repeat url(pope-francis.7a1a9d7f08f02ebd157f.png);filter:blur(1rem)}.featured-card__content[_ngcontent-%COMP%]{position:relative;padding:1rem;color:var(--color-white)}.featured-card__hairline[_ngcontent-%COMP%]{margin:0;font-weight:300;white-space:nowrap}.featured-card__title[_ngcontent-%COMP%]{margin:0;font-size:3rem;font-weight:400;line-height:1}.featured-card__desc[_ngcontent-%COMP%]{display:-webkit-box;overflow:hidden;max-height:10.5rem;margin:1rem 0;-webkit-box-orient:vertical;font-size:1.25rem;font-weight:300;-webkit-line-clamp:6;text-overflow:ellipsis}.featured-card__cta[_ngcontent-%COMP%]{font-weight:700}.featured-card__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 -1rem -1rem}.featured-card__buttons[_ngcontent-%COMP%] > .icon-button[_ngcontent-%COMP%]{width:50%;height:2.75rem}.featured-card__buttons[_ngcontent-%COMP%] > .icon-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:1.25rem}.closing-gauge__left[_ngcontent-%COMP%]{position:relative;display:flex;width:30%;align-items:center;justify-content:flex-end;padding:0 .25rem 0 0;background-color:var(--color-dark-background);color:var(--color-white);font-weight:300;text-transform:uppercase}.closing-gauge__left[_ngcontent-%COMP%]:after{position:absolute;right:-.5rem;display:block;width:0;height:0;border-top:.25rem solid transparent;border-bottom:.25rem solid transparent;border-left:.5rem solid var(--color-dark-background);content:" "}.closing-gauge__right[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:0 0 0 .75rem}.closing-gauge__number[_ngcontent-%COMP%]{font-weight:400}.closing-gauge__desc[_ngcontent-%COMP%], .closing-gauge__number[_ngcontent-%COMP%]{color:var(--color-dark-gray);font-size:1.5rem}.closing-gauge__desc[_ngcontent-%COMP%]{font-weight:300}.banner[_ngcontent-%COMP%]{position:relative;display:flex;overflow:hidden;align-items:center;justify-content:space-between;padding:1rem;margin:1rem;background-color:var(--color-light-gray)}.banner__background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;object-fit:cover;opacity:.2;pointer-events:none}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%]{flex-basis:40%;padding-right:1rem}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%] > .banner__hairline[_ngcontent-%COMP%]{color:var(--color-dark-gray);font-size:1.25rem;font-weight:300;letter-spacing:-.07rem}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%] > .banner__title[_ngcontent-%COMP%]{display:block;color:var(--color-dark-gray);font-size:2rem;font-weight:700;letter-spacing:-.05rem}.banner-top[_ngcontent-%COMP%]   .banner__right[_ngcontent-%COMP%]{flex-basis:60%}.banner-top[_ngcontent-%COMP%]   .banner__text[_ngcontent-%COMP%]{margin:0;color:var(--color-dark-gray);font-size:1.25rem;font-weight:300;letter-spacing:-.05rem}.banner-bottom[_ngcontent-%COMP%]{flex-direction:column;padding:1rem 3rem;margin-top:2rem}.banner-bottom[_ngcontent-%COMP%]   .banner__heading[_ngcontent-%COMP%]{position:relative;margin:0 0 1rem;color:var(--color-dark-gray);font-size:2rem;font-weight:400;text-align:center}.banner-bottom[_ngcontent-%COMP%]   .banner__right[_ngcontent-%COMP%]{width:100%}.banner-bottom[_ngcontent-%COMP%]   .banner__cta[_ngcontent-%COMP%]{position:relative;display:block;width:100%;padding:1rem 0;border:2px solid var(--color-darker-background);background:transparent;color:var(--color-darker-gray);font-size:1.5rem}main[role=main][_ngcontent-%COMP%]{padding:0 1rem;margin-top:2rem}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--color-dark-gray);font-weight:300}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 2rem;font-size:2rem}.footer[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;margin:0 1rem 3rem}.footer__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;font-size:1.25rem}.footer__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-dark-gray);text-decoration:none}.footer__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--color-darker-gray);text-decoration:underline}.footer__social[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:var(--color-darker-gray);font-size:1.25rem;text-align:right}.footer__social[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:flex;margin-top:1rem}.footer__social[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-right:1rem}.featured-card__more-info[_ngcontent-%COMP%]{display:none}.featured-card__more-info-icon[_ngcontent-%COMP%]{width:1.5rem;height:1rem;margin-right:.5rem}.banner-top[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{display:none}.max-centered[_ngcontent-%COMP%]{display:contents}@media (min-width:500px){.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%]{flex-basis:30%}.banner-top[_ngcontent-%COMP%]   .banner__right[_ngcontent-%COMP%]{flex-basis:70%}}@media (min-width:768px){body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{font-size:14px}.hero[_ngcontent-%COMP%]{max-height:38rem}.hero__background[_ngcontent-%COMP%]{top:-6.5rem;left:0;width:110vw;height:auto}.featured-card__glass-background[_ngcontent-%COMP%]{background:50% no-repeat linear-gradient(var(--color-dark-background),var(--color-dark-background)),7vw -6.5rem/115vw auto no-repeat url(pope-francis.7a1a9d7f08f02ebd157f.png)}.featured-card__content[_ngcontent-%COMP%]{padding:2rem 1.5rem}.featured-card__more-info[_ngcontent-%COMP%]{display:inline-block;margin:0;font-weight:300}.featured-card__buttons[_ngcontent-%COMP%]{margin:0 -1.5rem -2rem}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%]{flex-basis:20%}.banner-top[_ngcontent-%COMP%]   .banner__right[_ngcontent-%COMP%]{flex-basis:80%}.banner-bottom[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;padding:1rem 2rem}.banner-bottom[_ngcontent-%COMP%]   .banner__background[_ngcontent-%COMP%]{top:-230%}.banner-bottom[_ngcontent-%COMP%]   .banner__right[_ngcontent-%COMP%]{width:auto}.banner-bottom[_ngcontent-%COMP%]   .banner__heading[_ngcontent-%COMP%]{margin-bottom:0;font-size:1.5rem}.banner-bottom[_ngcontent-%COMP%]   .banner__cta[_ngcontent-%COMP%]{width:16rem}.footer[_ngcontent-%COMP%]{align-items:flex-start}.footer__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer__social[_ngcontent-%COMP%]{display:flex}.footer__links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0;margin-right:2rem;font-size:1rem}.footer__social[_ngcontent-%COMP%]{align-items:center}.footer__social[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:1rem;color:var(--color-dark-gray);font-size:.833rem}.footer__social[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin-top:3px}}@media (min-width:1100px){body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{font-size:18px}.max-centered[_ngcontent-%COMP%]{position:relative;display:block;width:100vw;max-width:1100px;margin-right:auto;margin-left:auto}.max-centered[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .max-centered[_ngcontent-%COMP%] > hr[role=separator][_ngcontent-%COMP%]{margin-right:0;margin-left:0}.max-centered[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{padding:0}.nav[_ngcontent-%COMP%]{min-height:22vh}.nav__logo[_ngcontent-%COMP%]{margin-top:3rem}.nav__hamburger[_ngcontent-%COMP%]{display:none}.nav__links[_ngcontent-%COMP%]{position:absolute;top:3rem;right:0;left:auto;width:40vw;height:auto;flex-direction:row;align-items:center;justify-content:flex-end;padding:0;background-color:initial;transform:translateX(0)}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:0 1rem 0 0;font-size:1rem;font-weight:300;text-align:right}.nav__links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{order:0}.nav__search[_ngcontent-%COMP%]{width:2rem;height:2rem}.nav__search-input[_ngcontent-%COMP%]{display:none}.hero[_ngcontent-%COMP%]{min-height:700px}.hero__background[_ngcontent-%COMP%]{top:-2.5rem;left:0;width:100vw;height:auto}.hero__featured-card[_ngcontent-%COMP%]{left:0;width:50%;min-width:600px;max-height:unset;margin-top:2.5rem}.featured-card__glass-background[_ngcontent-%COMP%]{background:50% no-repeat linear-gradient(var(--color-dark-background),var(--color-dark-background)),calc(-50vw + 650px) -6rem/105vw auto no-repeat url(pope-francis.7a1a9d7f08f02ebd157f.png)}.featured-card__content[_ngcontent-%COMP%]{padding:2rem 1.5rem}.featured-card__desc[_ngcontent-%COMP%]{max-width:85%;margin:2rem 0 1rem}.featured-card__cta[_ngcontent-%COMP%]{margin:1rem 0 2rem;font-size:1.5rem}.featured-card__buttons[_ngcontent-%COMP%]{margin:0 -1.5rem -2rem}.featured-card__buttons[_ngcontent-%COMP%] > .icon-button[_ngcontent-%COMP%]{height:auto}.featured-card__buttons[_ngcontent-%COMP%] > .icon-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:2rem;height:2rem;margin:1.3rem 0}.closing-gauge__left[_ngcontent-%COMP%]{padding-right:1rem}.closing-gauge__right[_ngcontent-%COMP%]{padding-left:1rem}.closing-gauge__title[_ngcontent-%COMP%]{font-size:1.25rem}.closing-gauge__desc[_ngcontent-%COMP%], .closing-gauge__number[_ngcontent-%COMP%]{font-size:2rem}.closing-gauge__left[_ngcontent-%COMP%]:after{border-top-width:.33rem;border-bottom-width:.33rem}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%] > .banner__hairline[_ngcontent-%COMP%], .banner-top[_ngcontent-%COMP%]   .banner__text[_ngcontent-%COMP%]{font-size:1rem}.banner-top[_ngcontent-%COMP%]   .banner__left[_ngcontent-%COMP%] > .banner__title[_ngcontent-%COMP%]{font-size:1.5rem;letter-spacing:0}.banner-top[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{display:block;margin-left:2rem}.banner-bottom[_ngcontent-%COMP%]   .banner__cta[_ngcontent-%COMP%]{width:20rem}main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}hr[role=separator][_ngcontent-%COMP%]{margin:2rem 0}}']}),t})(),hy=(()=>{class t{}return t.\u0275mod=r.qb({type:t,bootstrap:[ly]}),t.\u0275inj=r.pb({factory:function(e){return new(e||t)},providers:[],imports:[[J,Z.a.initializeApp(i),Fg]]}),t})();Object(r.I)(),$().bootstrapModule(hy).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);